I"<!-- more -->
<p>ç¯å¢ƒ:å®‰è£…docker        å…³é—­selinux     å¼€å¯è·¯ç”±è½¬å‘ï¼ˆnet.ipv4.ip_forward =  1ï¼‰
ä¸€ã€å°† Docker å®¹å™¨é…ç½®åˆ°æœ¬åœ°ç½‘ç»œç¯å¢ƒä¸­
ä¸ºäº†ä½¿æœ¬åœ°ç½‘ç»œä¸­çš„æœºå™¨å’Œ Docker å®¹å™¨æ›´æ–¹ä¾¿çš„é€šä¿¡ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šæœ‰å°† Docker å®¹å™¨é…ç½®åˆ°å’Œä¸»æœºåŒä¸€ç½‘æ®µçš„éœ€æ±‚ã€‚è¿™ä¸ªéœ€æ±‚å…¶å®å¾ˆå®¹æ˜“å®ç°ï¼Œæˆ‘ä»¬åªè¦å°† Docker å®¹å™¨å’Œä¸»æœºçš„ç½‘å¡æ¡¥æ¥èµ·æ¥ï¼Œå†ç»™ Docker å®¹å™¨é…ä¸Š IP å°±å¯ä»¥äº†ã€‚
ä¸‹é¢æˆ‘ä»¬æ¥æ“ä½œä¸€ä¸‹ï¼Œæˆ‘ä¸»æœº A åœ°å€ä¸º 192.168.157.128/24,ç½‘å…³ä¸º 192.168.157.2,éœ€è¦ç»™ Dockerå®¹å™¨çš„åœ°å€é…ç½®ä¸º 192.168.157.150/24ã€‚åœ¨ä¸»æœº A ä¸Šåšå¦‚ä¸‹æ“ä½œï¼š
å®‰è£… pipework
ä¸‹è½½åœ°å€ï¼šwget https://github.com/jpetazzo/pipework.git
unzippipework-master.zip
cp -p /root/pipework-master/pipework/usr/local/bin/
å¯åŠ¨ Docker å®¹å™¨ã€‚
docker run -itdâ€“name test1 é•œåƒ /bin/bash
é…ç½®å®¹å™¨ç½‘ç»œï¼Œå¹¶è¿åˆ°ç½‘æ¡¥ br0 ä¸Šã€‚ç½‘å…³åœ¨ IP åœ°å€åé¢åŠ @æŒ‡å®šã€‚
pipework br0 test1192.168.157.150/24@192.168.157.2
å°†ä¸»æœº eno16777736 æ¡¥æ¥åˆ° br0 ä¸Šï¼Œå¹¶æŠŠ eno16777736 çš„ IP é…ç½®åœ¨ br0 ä¸Šã€‚
p addradd 192.168.157.128/24 dev br0
ip addrdel 192.168. 157.128/24 dev eno16777736
brctladdif br0 eno16777736
ip routedel default
ip routeadd default via 192.168.157.2 dev br0
æ³¨ï¼šå¦‚æœæ˜¯è¿œç¨‹æ“ä½œï¼Œä¸­é—´ç½‘ç»œä¼šæ–­æ‰ï¼Œæ‰€ä»¥æ”¾åœ¨ä¸€æ¡å‘½ä»¤ä¸­æ‰§è¡Œã€‚
ip addradd 192.168.157.128/24 dev br0ï¼›ip addr del 192.168. 157.128/24 deveno16777736ï¼›brctl addif br0 eno16777736ï¼›ip route del defaultï¼›ip route add default via 192.168.157.2dev br0
å®Œæˆä¸Šè¿°æ­¥éª¤åï¼Œæˆ‘ä»¬å‘ç° Docker å®¹å™¨å·²ç»å¯ä»¥ä½¿ç”¨æ–°çš„ IP å’Œä¸»æœºç½‘ç»œé‡Œçš„æœºå™¨ç›¸äº’é€šä¿¡äº†</p>
:ET