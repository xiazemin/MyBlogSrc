I"ã<p>https://github.com/prometheus/client_golang
https://github.com/grpc-ecosystem/go-grpc-prometheus</p>

<p>Server-side
    // After all your registrations, make sure all of the Prometheus metrics are initialized.
    grpc_prometheus.Register(myServer)
    // Register Prometheus metrics handler.  <br />
    http.Handle(â€œ/metricsâ€, promhttp.Handler())</p>

<p>Client-side
 grpc.WithUnaryInterceptor(grpc_prometheus.UnaryClientInterceptor),</p>

<p>https://github.com/zsais/go-gin-prometheus
 p := ginprometheus.NewPrometheus(â€œginâ€)</p>

<p>ä¸ºäº†æ–¹ä¾¿client libraryçš„ä½¿ç”¨æä¾›äº†å››ç§æ•°æ®ç±»å‹ï¼š Counter, Gauge, Histogram, Summary, ç®€å•ç†è§£å°±æ˜¯Counterå¯¹æ•°æ®åªå¢ä¸å‡ï¼ŒGauageå¯å¢å¯å‡ï¼ŒHistogram,Summaryæä¾›è·Ÿå¤šçš„ç»Ÿè®¡ä¿¡æ¯ã€‚
<!-- more -->
https://www.cnblogs.com/gaorong/p/7881203.html</p>

<p>https://skyingzz.github.io/2020/01/19/prometheus-client-go/</p>

<p>https://blog.csdn.net/huosenbulusi/article/details/107529961</p>

<p>ä¸‹è½½è§£å‹
åœ¨å®˜ç½‘ ä¸‹åœ¨æœ€æ–°ç‰ˆæœ¬å‹ç¼©åŒ…ï¼šprometheus-2.3.0.darwin-amd64.tar.gz</p>

<p>è§£å‹å¹¶è¿›å…¥è¯¥ç›®å½•ï¼š</p>

<p>tar xvfz prometheus-<em>.tar.gz
cd prometheus-</em>
ä¿®æ”¹é…ç½®æ–‡ä»¶
æœ¬æ–‡å°†é…ç½®æ–‡ä»¶ä¿®æ”¹ä¸ºæ£€æµ‹Prometheusè‡ªèº«ï¼š
ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸ºï¼š</p>

<p>global:
  scrape_interval:     15s # By default, scrape targets every 15 seconds.</p>

<p># Attach these labels to any time series or alerts when communicating with
  # external systems (federation, remote storage, Alertmanager).
  external_labels:
    monitor: â€˜codelab-monitorâ€™</p>

<h1 id="a-scrape-configuration-containing-exactly-one-endpoint-to-scrape">A scrape configuration containing exactly one endpoint to scrape:</h1>
<h1 id="here-its-prometheus-itself">Here itâ€™s Prometheus itself.</h1>
<p>scrape_configs:
  # The job name is added as a label <code class="language-plaintext highlighter-rouge">job=&lt;job_name&gt;</code> to any timeseries scraped from this config.</p>
<ul>
  <li>
    <p>job_name: â€˜prometheusâ€™</p>

    <h1 id="override-the-global-default-and-scrape-targets-from-this-job-every-5-seconds">Override the global default and scrape targets from this job every 5 seconds.</h1>
    <p>scrape_interval: 5s</p>

    <p>static_configs:</p>
    <ul>
      <li>targets: [â€˜localhost:9090â€™]</li>
    </ul>
  </li>
</ul>

<p>.è®¿é—®web
http://190.168.3.250:9090è®¿é—®è‡ªå·±çš„çŠ¶æ€é¡µé¢
å¯ä»¥é€šè¿‡è®¿é—®localhost:9090éªŒè¯Prometheusè‡ªèº«çš„æŒ‡æ ‡ï¼š190.168.3.250:9090/metrics</p>

<p>1.é…ç½®Prometheusç›‘æ§æœ¬èº«
å…¨å±€é…ç½®æ–‡ä»¶ç®€ä»‹
æœ‰å…³é…ç½®é€‰é¡¹çš„å®Œæ•´ï¼Œè¯·å‚é˜…ï¼šhttps://prometheus.io/docs/prometheus/latest/configuration/configuration/
Prometheusä»¥scrape_intervalè§„åˆ™å‘¨æœŸæ€§ä»ç›‘æ§ç›®æ ‡ä¸Šæ”¶é›†æ•°æ®ï¼Œç„¶åå°†æ•°æ®å­˜å‚¨åˆ°æœ¬åœ°å­˜å‚¨ä¸Šã€‚scrape_intervalå¯ä»¥è®¾å®šå…¨å±€ä¹Ÿå¯ä»¥è®¾å®šå•ä¸ªmetricsã€‚
Prometheusä»¥evaluation_intervalè§„åˆ™å‘¨æœŸæ€§å¯¹å‘Šè­¦è§„åˆ™åšè®¡ç®—ï¼Œç„¶åæ›´æ–°å‘Šè­¦çŠ¶æ€ã€‚evaluation_intervalåªæœ‰è®¾å®šåœ¨å…¨å±€ã€‚</p>

<p>globalï¼šå…¨å±€é…ç½®
alertingï¼šå‘Šè­¦é…ç½®
rule_filesï¼šå‘Šè­¦è§„åˆ™
scrape_configsï¼šé…ç½®æ•°æ®æºï¼Œç§°ä¸ºtargetï¼Œæ¯ä¸ªtargetç”¨job_nameå‘½åã€‚åˆåˆ†ä¸ºé™æ€é…ç½®å’ŒæœåŠ¡å‘ç°</p>

<p>global:
é»˜è®¤æŠ“å–å‘¨æœŸï¼Œå¯ç”¨å•ä½msã€smhdwy #è®¾ç½®æ¯15sé‡‡é›†æ•°æ®ä¸€æ¬¡ï¼Œé»˜è®¤1åˆ†é’Ÿ
[ scrape_interval: <duration> | default = 1m ]
é»˜è®¤æŠ“å–è¶…æ—¶
[ scrape_timeout: <duration> | default = 10s ]
ä¼°ç®—è§„åˆ™çš„é»˜è®¤å‘¨æœŸ # æ¯15ç§’è®¡ç®—ä¸€æ¬¡è§„åˆ™ã€‚é»˜è®¤1åˆ†é’Ÿ
[ evaluation_interval: <duration> | default = 1m ]
å’Œå¤–éƒ¨ç³»ç»Ÿï¼ˆä¾‹å¦‚AlertManagerï¼‰é€šä¿¡æ—¶ä¸ºæ—¶é—´åºåˆ—æˆ–è€…è­¦æƒ…ï¼ˆAlertï¼‰å¼ºåˆ¶æ·»åŠ çš„æ ‡ç­¾åˆ—è¡¨
external_labels:
[ <labelname>: <labelvalue> ... ]</labelvalue></labelname></duration></duration></duration></p>

<p>è§„åˆ™æ–‡ä»¶åˆ—è¡¨
rule_files:
[ - <filepath_glob> ... ]</filepath_glob></p>

<p>æŠ“å–é…ç½®åˆ—è¡¨
scrape_configs:
[ - <scrape_config> ... ]</scrape_config></p>

<p>Alertmanagerç›¸å…³é…ç½®
alerting:
alert_relabel_configs:
[ - <relabel_config> ... ]
alertmanagers:
[ - <alertmanager_config> ... ]</alertmanager_config></relabel_config></p>

<p>è¿œç¨‹è¯»å†™ç‰¹æ€§ç›¸å…³çš„é…ç½®
remote_write:
[ - <remote_write> ... ]
remote_read:
[ - <remote_read> ... ]</remote_read></remote_write></p>

<p>vi prometheus.yml
ä¸‹é¢å°±æ˜¯æ‹‰å–è‡ªèº«æœåŠ¡é‡‡æ ·ç‚¹æ•°æ®é…ç½®
scrape_configs:
åˆ«ç›‘æ§æŒ‡æ ‡ï¼Œjobåç§°ä¼šå¢åŠ åˆ°æ‹‰å–åˆ°çš„æ‰€æœ‰é‡‡æ ·ç‚¹ä¸Šï¼ŒåŒæ—¶è¿˜æœ‰ä¸€ä¸ªinstanceç›®æ ‡æœåŠ¡çš„hostï¼športæ ‡ç­¾ä¹Ÿä¼šå¢åŠ åˆ°é‡‡æ ·ç‚¹ä¸Š</p>

<p>job_name: â€˜prometheusâ€™
è¦†ç›–globalçš„é‡‡æ ·ç‚¹ï¼Œæ‹‰å–æ—¶é—´é—´éš”5s
scrape_interval: 5s
static_configs:
targets: [â€˜localhost:9090â€™]
æœ€ä¸‹é¢ï¼Œé™æ€é…ç½®ç›‘æ§æœ¬æœºï¼Œé‡‡é›†æœ¬æœº9090ç«¯å£æ•°æ®
https://www.infoq.cn/article/uj12knworcwg0kke8zfv</p>

<p>Grafanaå®‰è£…
å®‰è£…æ­¥éª¤å‚è€ƒgrafanaå®˜æ–¹æ–‡æ¡£ï¼šhttp://docs.grafana.org/installation/mac/</p>

<p>ä½¿ç”¨homebrewå®‰è£…ï¼š</p>

<p>brew update
brew install grafana
å®‰è£…æˆåŠŸåä½ å¯ä»¥ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨ï¼š</p>

<p>brew services start grafana
ç™»å½•
ä½¿ç”¨é»˜è®¤è´¦å·å¯†ç  ï¼š admin/admin ç™»å½•</p>

<p>https://www.jianshu.com/p/7954823d6e65
https://blog.csdn.net/Holly_walker/article/details/103820509</p>

<p>https://blog.csdn.net/Kammingo/article/details/105225838
https://segmentfault.com/a/1190000018372409
https://cloud.tencent.com/developer/article/1744617</p>

<p>https://www.yisu.com/zixun/7612.html</p>

<p>https://dbaplus.cn/news-134-3247-1.html
https://zhuanlan.zhihu.com/p/117719823
https://www.bladewan.com/2020/01/03/prometheus_1/</p>

<p>https://www.cnblogs.com/netonline/p/8289411.html</p>
:ET