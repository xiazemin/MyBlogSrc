I"á<p>phpä½¿ç”¨curlè®¿é—®httpsè¿”å›æ— ç»“æœçš„é—®é¢˜
<!-- more -->
ç”¨curlå‘èµ·httpsè¯·æ±‚çš„æ—¶å€™æŠ¥é”™ï¼šâ€œSSL certificate problem, verify that the CA cert is OK. Details: error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failedâ€
å¾ˆæ˜æ˜¾ï¼ŒéªŒè¯è¯ä¹¦çš„æ—¶å€™å‡ºç°äº†é—®é¢˜ã€‚</p>

<p>ä½¿ç”¨curlå¦‚æœæƒ³å‘èµ·çš„httpsè¯·æ±‚æ­£å¸¸çš„è¯æœ‰2ç§åšæ³•ï¼š</p>

<p>æ–¹æ³•ä¸€ã€è®¾å®šä¸ºä¸éªŒè¯è¯ä¹¦å’Œhostã€‚</p>

<p>åœ¨æ‰§è¡Œcurl_exec()ä¹‹å‰ã€‚è®¾ç½®option</p>

<p>$ch = curl_init();</p>

<p>â€¦â€¦</p>

<p>curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);</p>

<p>æ–¹æ³•äºŒã€è®¾å®šä¸€ä¸ªæ­£ç¡®çš„è¯ä¹¦ã€‚</p>

<p>æœ¬åœ°sslåˆ¤åˆ«è¯ä¹¦å¤ªæ—§ï¼Œå¯¼è‡´é“¾æ¥æŠ¥é”™sslè¯ä¹¦ä¸æ­£ç¡®ã€‚</p>

<p>æˆ‘ä»¬éœ€è¦ä¸‹è½½æ–°çš„ssl æœ¬åœ°åˆ¤åˆ«æ–‡ä»¶</p>

<p>http://curl.haxx.se/ca/cacert.pem</p>

<p>æ”¾åˆ° ç¨‹åºæ–‡ä»¶ç›®å½•</p>

<p>curl å¢åŠ ä¸‹é¢çš„é…ç½®</p>

<p>curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,true); ;
curl_setopt($ch,CURLOPT_CAINFO,dirname(<strong>FILE</strong>).â€™/cacert.pemâ€™);</p>

<p>$curl http://curl.haxx.se/ca/cacert.pem -o cacert.pem</p>

<p>ErrnoSSL: certificate verification failed</p>

<p>è‹±æ–‡macæœ¬åœ°å®‰è£…äº†å¤šç‰ˆæœ¬çš„phpï¼Œphp curl æ‰©å±•ç‰ˆæœ¬ä¸åŒ¹é…
æ—§ç‰ˆæœ¬çš„cur é»˜è®¤ä¸æ”¯æŒhttps éœ€è¦é‡æ–°ç¼–è¯‘php curl æ‰©å±•</p>

<p>certificate verification failed (result: 5)
 vi cacert.pem å‘ç°æ˜¯ç©º
 curl-config â€“ca
 ä¹Ÿä¸ºç©º
 ä¸‹è½½è¯ä¹¦
 curl_setopt($ch,CURLOPT_CAINFO,dirname(<strong>FILE</strong>).â€™/cacert.pemâ€™);
 æˆ–è€…
 /.ssh
sudo wget http://curl.haxx.se/ca/cacert.pem
export CURL_CA_BUNDLE=~/.ssh/cacert.pem
å‘ç°
$url=â€™https://yq.aliyun.com/ziliao/157066â€™;
æˆåŠŸï¼Œä½†æ˜¯
$url=â€https://www.baidu.comâ€;
å¤±è´¥</p>
:ET