I"â<p>å•å…ƒæµ‹è¯•testCaseä¸€èˆ¬æ˜¯æ”¾åœ¨é¡¹ç›®æ ¹ç›®å½•çš„testsç›®å½•ä¸‹ï¼Œå¯ä»¥å»ºå­ç›®å½•å¯¹åº”ä¸€ä¸ªæ¨¡å—ï¼Œæ¯ä¸€ä¸ªtestæ–‡ä»¶å¯¹åº”ä¸€ä¸ªå…·ä½“åŠŸèƒ½çš„å•å…ƒæµ‹è¯•ç‚¹ï¼Œç„¶ååœ¨é¡¹ç›®æ ¹ç›®å½•å»ºä¸ªphpunit.xml.distæ¥ç¼–æ’æµ‹è¯•å¥—ä»¶ï¼Œæµ‹è¯•æ—¶åªç”¨åœ¨phpunit.xml.distæ‰€åœ¨ç›®å½•è¿è¡Œphpunitå‘½ä»¤å³å¯ã€‚è¿™é‡Œç”¨composerä¸»è¦ç”¨å®ƒçš„autoloadã€‚</p>

<p>ã€€ã€€å®‰è£…ç›¸å…³ç¯å¢ƒæ”¯æŒ</p>

<p>ä¸»è¦æ˜¯å®‰è£…Composerå’ŒPhpunitï¼Œå…·ä½“æŸ¥çœ‹ç›¸åº”å®˜æ–¹æ–‡æ¡£å³å¯ï¼Œè¿™é‡Œä¸ç»†è¯´ã€‚</p>

<p>ç”Ÿæˆé¡¹ç›®å¯¹åº”vendor</p>

<p>æ ¹ç›®å½•åˆ›å»ºcomposer.jsonæ–‡ä»¶</p>

<p>{</p>

<p>â€œrequireâ€:{}</p>

<p>}</p>

<p>ç„¶åæ‰§è¡Œ</p>

<p>composerupdate</p>

<p>æ ¹ç›®å½•ä¸‹ä¼šåˆ›å»ºä¸€ä¸ªvendorç›®å½•ï¼Œè¿™é‡Œä¸»è¦ç”¨åˆ°vendor/autoload.php</p>

<p>åˆ›å»ºphpunit.xml.distæ–‡ä»¶</p>

<p>åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºphpunit.xml.dist</p>
<phpunit bootstrap="src/autoload.php">
  <testsuites>
    <testsuite name="money">
      <directory>tests</directory>
    </testsuite>
  </testsuites>
</phpunit>

<p>åˆ›å»ºä¸€ä¸ªç®€å•æµ‹è¯•ç”¨ä¾‹</p>

<p>é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºtestsç›®å½•ï¼Œè¿›å…¥åˆ›å»ºSampleTest.phpæ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹:
&lt;?php
use PHPUnit\Framework\TestCase;</p>

<p>class SampleTest extends TestCase
{
    public function testSomething()
    {
        // å¯é€‰ï¼šå¦‚æœæ„¿æ„ï¼Œåœ¨è¿™é‡Œéšä¾¿æµ‹è¯•ç‚¹ä»€ä¹ˆã€‚
        $this-&gt;assertTrue(true, â€˜è¿™åº”è¯¥å·²ç»æ˜¯èƒ½æ­£å¸¸å·¥ä½œçš„ã€‚â€™);</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    // åœ¨è¿™é‡Œåœæ­¢ï¼Œå¹¶å°†æ­¤æµ‹è¯•æ ‡è®°ä¸ºæœªå®Œæˆã€‚
    $this-&gt;markTestIncomplete(
      'æ­¤æµ‹è¯•ç›®å‰å°šæœªå®ç°ã€‚'
    );
} }
</code></pre></div></div>

<p>è¿›è¡Œå•å…ƒæµ‹è¯•</p>

<p>åœ¨æ ¹ç›®å½•æ‰§è¡Œï¼š</p>

<p>phpunit</p>

<p>å°±ä¼šçœ‹åˆ°æµ‹è¯•æƒ…å†µï¼š</p>

<p>phpunit
PHPUnit 3.7.10 by Sebastian Bergmann.</p>

<p>Configuration read from /Users/didi/PhpstormProjects/php/xiazemin/phpunit.xml.dist</p>

<p>Time: 50 ms, Memory: 4.00MB</p>

<p>No tests executed!</p>

<p>$phpunit tests/StatckTest.php
PHPUnit 3.7.10 by Sebastian Bergmann.</p>

<p>Class â€˜tests/StatckTestâ€™ could not be found in â€˜/Users/didi/PhpstormProjects/php/xiazemin/tests/StatckTest.phpâ€™.</p>

<p>https://stackoverflow.com/questions/47946717/class-tests-dusktestcase-not-found-in-exampletest-php
ä¼°è®¡æ˜¯å±‚çº§å…³ç³»ï¼Œé‡æ–°å®‰è£…ä¾èµ–åº“
$composer require â€“dev phpunit/phpunit ^6.5</p>

<p>$ls
composer.json		phpunit.xml.dist	vendor
composer.lock		tests</p>

<phpunit bootstrap="./vendor/autoload.php">

è¿˜æ˜¯ä¸å¯ä»¥

$./vendor/bin/phpunit
PHPUnit 6.5.14 by Sebastian Bergmann and contributors.

I1......FE                                                           9 / 9 (100%)

Time: 82 ms, Memory: 4.00MB

There was 1 error:

1) StackTest::testFailingInclude
ReflectionException: Class PHPUnit_Framework_Error does not exist

--

There was 1 failure:

1) StackTest::testAdd with data set #3 (1, 1, 3)
Failed asserting that 2 matches expected 3.

/Users/didi/PhpstormProjects/php/xiazemin/tests/StatckTest.php:47

ERRORS!
Tests: 9, Assertions: 10, Errors: 1, Failures: 1, Incomplete: 1.


https://phpunit.de/manual/6.5/zh_cn/phpunit-book.html#organizing-tests
<!-- more -->
æµ‹è¯•å•ä¸ªæ–‡ä»¶
hahaTest.php çš„åŸºæœ¬å†…å®¹å¯ä»¥è¿™æ ·å†™ï¼š

<?php
use PHPUnit\Framework\TestCase;
 
require("./src/index.php");
 
class hahaTest extends TestCase{
    //å¿…é¡»æ˜¯publicä¸”æ–¹æ³•åæ˜¯testå¼€å¤´çš„æ‰ä¼šå‚ä¸æµ‹è¯•,protectedå’Œprivateçš„æµ‹è¯•æ—¶ä¼šæç¤ºé”™è¯¯
    public function test_index(){
        $index=new index();//index.phpä¸­çš„ç±»
        $re=$index->haha();
        $this->assertEquals(1,$re);//æµ‹è¯• ./src/index.php ä¸­çš„indexç±»çš„hahaæ–¹æ³•è¿”å›å€¼æ˜¯ä¸æ˜¯1
    }
}
 
å‘½ä»¤è¡Œè¿è¡Œï¼š

phpunit hahaTest.php
æµ‹è¯•æ•´ä¸ªæ–‡ä»¶å¤¹çš„æ–¹æ³•ï¼š
é€’å½’è¯»å–æ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰çš„æ–‡ä»¶å‘½åä¸º *Test.phpï¼Œå¦‚æœæ–‡ä»¶åä¸æ˜¯Test.phpç»“å°¾çš„ï¼Œä¸ä¼šåŠ è½½åˆ°æµ‹è¯•
æ¯ä¸ªæ–¹æ³•å¿…é¡»ä»¥testå¼€å…³ï¼Œå¦åˆ™ä¼šç›´æ¥è·³è¿‡
æ–¹æ³•çš„æƒé™å¿…é¡»æ˜¯ public
è¿è¡Œ phpunit ç›®å½•åï¼Œå³å¯
phpunit ä¸­ä¾èµ– (@depends) çš„ä½¿ç”¨ï¼š
depends çš„ä½¿ç”¨ï¼š
  /**  //å¿…é¡»æ˜¯æ–‡æ¡£æ³¨é‡Šï¼Œä¸èƒ½è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£æ³¨é‡Šçš„è¦æ³¨æ„ä¸€ä¸‹ï¼šç¬¬ä¸€è¡Œä¸€å®šè¦ä¸¤ä¸ª*å·
   * @depends test_haha æä¾›æ•°æ®çš„å‡½æ•°çš„è¿”å›å€¼ä½œä¸ºå‚æ•° 
   */
  public function test_hehe($re){
      //$re æ˜¯ test_haha çš„è¿”å›å€¼ï¼Œå¯ä»¥åœ¨è¿™ä¸ªæ–¹æ³•å†…ä½¿ç”¨
  }
æœ€å¥½å…ˆåˆ›å»ºä¸€ä¸ªåŸºç±»ï¼šbaseTestç»§æ‰¿è‡ª TestCaseç±»ï¼Œæ–‡ä»¶åä¸ºaaTest.phpï¼Œå†™aaæ˜¯ä¿è¯è®©å®ƒæœ€å…ˆè¢«åŠ è½½ï¼ŒåŠ Testæ˜¯å› ä¸ºä¸åŠ çš„ä¸ä¼šè¢«åŠ è½½è¿è¡Œã€‚ aaTest.php æ–‡ä»¶ä¸­å¯ä»¥å†™å…¬å…±å‡½æ•°ï¼Œéœ€è¦å…¬å…±å¼•è¿›çš„ï¼Œä¸€äº›å‰ç½®çš„æ“ä½œï¼Œç„¶åå…¶å®ƒæµ‹è¯•ç±»ç»§æ‰¿è¿™ä¸ªç±»å°±å¯ä»¥äº†

å¦ä¸€ç§è§£å†³æ–¹æ¡ˆï¼š ä½¿ç”¨ phpunit.xml æ–‡ä»¶ï¼ŒæŠŠå¯åŠ¨éœ€è¦çš„å†…å®¹å†™åˆ° base.php æ–‡ä»¶ï¼Œç„¶ååœ¨ phpunit çš„ bootstrap å±äºä¸­å¼•å…¥è¯¥æ–‡ä»¶ æ‰§è¡Œ phpunit dir æ—¶ï¼Œå¦‚æœæ²¡æœ‰æ·»åŠ  -c phpunit.xml çš„è¯ï¼Œå®ƒä¼šè‡ªåŠ¨åœ¨å½“å‰ç›®å½•ä¸‹æŸ¥æ‰¾phpunit.xmlæˆ–phpunit.xml.distæ–‡ä»¶ï¼Œé€šè¿‡é…åˆ¶æ–‡ä»¶ï¼Œå¯ä»¥æŒ‡å®šåŠ è½½é¡ºåº åœ¨é…ç½®ä¸­å¼•å…¥äº†çš„æ–‡ä»¶ä¼šä¼˜å…ˆåŠ è½½ï¼Œç„¶åä¼šé»˜è®¤åŠ è½½*Test.phpæ–‡ä»¶

<?xml version="1.0" encoding="UTF-8"?>
<phpunit bootstrap="./Index/baseTest.php">
  <testsuites>
    <testsuite name="index">
      <file>./Index/loginTest.php</file> //å†™äº†çš„ä¼šä¼˜å…ˆåŠ è½½
    </testsuite>
  </testsuites>
</phpunit>
phpunit.xml çš„é…ç½®ï¼šhttps://phpunit.readthedocs.io/zh_CN/latest/configuration.html#appendixes-configuration
é—®é¢˜
æ€æ ·æŒ‡å®šæµ‹è¯•æ–‡ä»¶çš„é¡ºåºï¼Ÿ
<!-- ä½¿ç”¨ phpunit.xml é…ç½®æ–‡ä»¶ï¼Œå†™åœ¨testsuite ä¸­çš„ä¼šä¼˜å…ˆåŠ è½½ï¼Œå¹¶ä¸”æŒ‰å†™çš„é¡ºåºåŠ è½½ -->

è·¨æ–‡ä»¶/è·¨ç±» æ€æ ·ä½¿ç”¨@depends
<!-- ç›®å‰çš„è§£å†³æ–¹æ³•ï¼šç»§æ‰¿éœ€è¦ä¾èµ–çš„ç±»ï¼Œå†é‡å†™éœ€è¦ä¾èµ–çš„æ–¹æ³•ï¼Œç›´æ¥é€šè¿‡parent:: æ¥è°ƒç”¨ï¼Œè¿™æ ·å°±å¯ä»¥ä½¿ç”¨ @depends äº† è¡¥å……ï¼šè¿™æ ·ä¼šæœ‰é—®é¢˜ï¼Œç»§æ‰¿å…¶å®ƒæµ‹è¯•ç±»ï¼Œä¼šæ²¡è¢«ç»§æ‰¿çš„æ–¹æ³•é‡å¤æµ‹è¯•ï¼Œ ç»æµ‹è¯•åå‘ç°ï¼Œç›´æ¥ä½¿ç”¨ ç±»å::æ–¹æ³•å æ˜¯å¯ä»¥æ·»åŠ åˆ°ä¾èµ–çš„ -->

æ€æ ·çŸ¥é“å“ªäº›æµ‹è¯•æ–¹æ³•è¢« phpunit è·³è¿‡äº†ï¼Ÿ
<!-- è¿è¡Œæ—¶ï¼Œæ·»åŠ  -v å‚æ•°ï¼Œå¦‚: phpunit index -v -->

https://www.cnblogs.com/Jerry-blog/p/4988492.html

é»˜è®¤æƒ…å†µä¸‹ï¼Œç”Ÿäº§è€…æ‰€äº§ç”Ÿçš„è¿”å›å€¼å°†â€œåŸæ ·â€ä¼ é€’ç»™ç›¸åº”çš„æ¶ˆè´¹è€…ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœç”Ÿäº§è€…è¿”å›çš„æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œé‚£ä¹ˆä¼ é€’ç»™æ¶ˆè´¹è€…çš„å°†æ˜¯ä¸€ä¸ªæŒ‡å‘æ­¤å¯¹è±¡çš„å¼•ç”¨ã€‚å¦‚æœéœ€è¦ä¼ é€’å¯¹è±¡çš„å‰¯æœ¬è€Œéå¼•ç”¨ï¼Œåˆ™åº”å½“ç”¨ @depends clone æ›¿ä»£ @dependsã€‚


PHPUnitå‘½ä»¤è¡Œå·¥å…·ä¼šè¾“å‡ºä¸€ä¸ªå­—ç¬¦æ¥æŒ‡ç¤ºè¿›å±•ï¼š

. å½“æµ‹è¯•é™ˆå®«æ—¶è¾“å‡º
F å½“æµ‹è¯•æ–¹æ³•è¿è¡Œè¿‡ç¨‹ä¸­ä¸€ä¸ªæ–­è¨€å¤±è´¥æ—¶è¾“å‡ºï¼Œä¾‹å¦‚ä¸€ä¸ªå¤±è´¥çš„assertEquals()è°ƒç”¨
E å½“æµ‹è¯•æ–¹æ³•è¿è¡Œè¿‡ç¨‹ä¸­äº§ç”Ÿä¸€ä¸ªé”™è¯¯æ—¶è¾“å‡ºï¼Œé”™è¯¯æ˜¯æŒ‡æ„æ–™ä¹‹å¤–çš„å¼‚å¸¸ï¼ˆexceptionï¼‰æˆ–è€…PHPé”™è¯¯
R å½“æµ‹è¯•è¢«æ ‡è®°æœ‰é£é™©æ—¶è¾“å‡º
S å½“æµ‹è¯•è·³å‡ºæ—¶è¾“å‡º
I å½“æµ‹è¯•è¢«æ ‡è®°ä¸å®Œæ•´æˆ–ä¸ºå®ç°æ—¶è¾“å‡º

https://www.jianshu.com/p/c0396fbb0d6b

https://phpunit.de/manual/6.5/zh_cn/phpunit-book.html#organizing-tests

https://blog.csdn.net/fareast_mzh/article/details/82458491

</phpunit>
:ET