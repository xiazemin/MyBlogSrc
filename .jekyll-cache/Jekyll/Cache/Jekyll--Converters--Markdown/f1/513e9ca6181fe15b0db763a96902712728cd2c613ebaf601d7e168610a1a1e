I"<p>https://github.com/jpetazzo/nsenter
you can use Docker exec to enter a Docker container. Example:</p>

<p>docker exec -it CONTAINER_NAME /bin/bash
There are differences between nsenter and docker exec; namely, nsenter doesnâ€™t enter the cgroups, and therefore evades resource limitations. The potential benefit of this would be debugging and external audit, but for remote access, docker exec is the current recommended approach.</p>

<p>It is a small tool allowing to enter into namespaces. Technically, it can enter existing namespaces, or spawn a process into a new set of namespaces. â€œWhat are those namespaces youâ€™re blabbering about?â€ We are talking about container namespaces.</p>

<!-- more -->
<p>ä¸€ä¸ªæœ€å…¸å‹çš„ç”¨é€”å°±æ˜¯è¿›å…¥å®¹å™¨çš„ç½‘ç»œå‘½ä»¤ç©ºé—´ã€‚ç›¸å½“å¤šçš„å®¹å™¨ä¸ºäº†è½»é‡çº§ï¼Œæ˜¯ä¸åŒ…å«è¾ƒä¸ºåŸºç¡€çš„å‘½ä»¤çš„ï¼Œæ¯”å¦‚è¯´ip addressï¼Œpingï¼Œtelnetï¼Œssï¼Œtcpdumpç­‰ç­‰å‘½ä»¤ï¼Œè¿™å°±ç»™è°ƒè¯•å®¹å™¨ç½‘ç»œå¸¦æ¥ç›¸å½“å¤§çš„å›°æ‰°ï¼šåªèƒ½é€šè¿‡docker inspect ContainerIDå‘½ä»¤è·å–åˆ°å®¹å™¨IPï¼Œä»¥åŠæ— æ³•æµ‹è¯•å’Œå…¶ä»–ç½‘ç»œçš„è¿é€šæ€§ã€‚è¿™æ—¶å°±å¯ä»¥ä½¿ç”¨nsenterå‘½ä»¤ä»…è¿›å…¥è¯¥å®¹å™¨çš„ç½‘ç»œå‘½åç©ºé—´ï¼Œä½¿ç”¨å®¿ä¸»æœºçš„å‘½ä»¤è°ƒè¯•å®¹å™¨ç½‘ç»œã€‚</p>

<p>æ­¤å¤–ï¼Œnsenterä¹Ÿå¯ä»¥è¿›å…¥mnt, uts, ipc, pid, userå‘½ä»¤ç©ºé—´ï¼Œä»¥åŠæŒ‡å®šæ ¹ç›®å½•å’Œå·¥ä½œç›®å½•ã€‚</p>

<p>åŸç†
namespace
namespaceæ˜¯Linuxä¸­ä¸€äº›è¿›ç¨‹çš„å±æ€§çš„ä½œç”¨åŸŸï¼Œä½¿ç”¨å‘½åç©ºé—´ï¼Œå¯ä»¥éš”ç¦»ä¸åŒçš„è¿›ç¨‹ã€‚</p>

<p>Linuxåœ¨ä¸æ–­çš„æ·»åŠ å‘½åç©ºé—´ï¼Œç›®å‰æœ‰ï¼š</p>

<p>mountï¼šæŒ‚è½½å‘½åç©ºé—´ï¼Œä½¿è¿›ç¨‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„æŒ‚è½½æ–‡ä»¶ç³»ç»Ÿï¼Œå§‹äºLinux 2.4.19
ipcï¼šipcå‘½åç©ºé—´ï¼Œä½¿è¿›ç¨‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ipcï¼ŒåŒ…æ‹¬æ¶ˆæ¯é˜Ÿåˆ—ï¼Œå…±äº«å†…å­˜å’Œä¿¡å·é‡ï¼Œå§‹äºLinux 2.6.19
utsï¼šutså‘½åç©ºé—´ï¼Œä½¿è¿›ç¨‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„hostnameå’Œdomainnameï¼Œå§‹äºLinux 2.6.19
netï¼šnetworkå‘½ä»¤ç©ºé—´ï¼Œä½¿è¿›ç¨‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„ç½‘ç»œæ ˆï¼Œå§‹äºLinux 2.6.24
pidï¼špidå‘½åç©ºé—´ï¼Œä½¿è¿›ç¨‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„pidç©ºé—´ï¼Œå§‹äºLinux 2.6.24
userï¼šuserå‘½åç©ºé—´ï¼Œæ˜¯è¿›ç¨‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„userç©ºé—´ï¼Œå§‹äºLinux 2.6.23ï¼Œç»“æŸäºLinux 3.8
cgroupï¼šcgroupå‘½åç©ºé—´ï¼Œä½¿è¿›ç¨‹æœ‰ä¸€ä¸ªç‹¬ç«‹çš„cgroupæ§åˆ¶ç»„ï¼Œå§‹äºLinux 4.6
Linuxçš„æ¯ä¸ªè¿›ç¨‹éƒ½å…·æœ‰å‘½åç©ºé—´ï¼Œå¯ä»¥åœ¨/proc/PID/nsç›®å½•ä¸­çœ‹åˆ°å‘½åç©ºé—´çš„æ–‡ä»¶æè¿°ç¬¦</p>

<p>clone
cloneæ˜¯Linuxçš„ç³»ç»Ÿè°ƒç”¨å‡½æ•°ï¼Œç”¨äºåˆ›å»ºä¸€ä¸ªæ–°çš„è¿›ç¨‹ã€‚</p>

<p>cloneå’Œforkæ¯”è¾ƒç±»ä¼¼ï¼Œä½†æ›´ä¸ºç²¾ç»†åŒ–ï¼Œæ¯”å¦‚è¯´ä½¿ç”¨cloneåˆ›å»ºå‡ºçš„å­è¿›ç¨‹å¯ä»¥å…±äº«çˆ¶è¿›ç¨‹çš„è™šæ‹Ÿåœ°å€ç©ºé—´ï¼Œæ–‡ä»¶æè¿°ç¬¦è¡¨ï¼Œä¿¡å·å¤„ç†è¡¨ç­‰ç­‰ã€‚ä¸è¿‡è¿™é‡Œè¦å¼ºè°ƒçš„æ˜¯ï¼Œcloneå‡½æ•°è¿˜èƒ½ä¸ºæ–°è¿›ç¨‹æŒ‡å®šå‘½åç©ºé—´ã€‚</p>

<p>setns
cloneç”¨äºåˆ›å»ºæ–°çš„å‘½ä»¤ç©ºé—´ï¼Œè€Œsetnsåˆ™ç”¨æ¥è®©å½“å‰çº¿ç¨‹ï¼ˆå•çº¿ç¨‹å³è¿›ç¨‹ï¼‰åŠ å…¥ä¸€ä¸ªå‘½åç©ºé—´ã€‚</p>

<p>nsenter
é‚£ä¹ˆï¼Œæœ€åå°±æ˜¯nsenteräº†ï¼Œnsenterç›¸å½“äºåœ¨setnsçš„ç¤ºä¾‹ç¨‹åºä¹‹ä¸Šåšäº†ä¸€å±‚å°è£…ï¼Œä½¿æˆ‘ä»¬æ— éœ€æŒ‡å®šå‘½åç©ºé—´çš„æ–‡ä»¶æè¿°ç¬¦ï¼Œè€Œæ˜¯æŒ‡å®šè¿›ç¨‹å·å³å¯ã€‚</p>

<p>æŒ‡å®šè¿›ç¨‹å·PIDä»¥åŠéœ€è¦è¿›å…¥çš„å‘½åç©ºé—´åï¼Œnsenterä¼šå¸®æˆ‘ä»¬æ‰¾åˆ°å¯¹åº”çš„å‘½åç©ºé—´æ–‡ä»¶æè¿°ç¬¦/proc/PID/ns/FDï¼Œç„¶åä½¿ç”¨è¯¥å‘½åç©ºé—´è¿è¡Œæ–°çš„ç¨‹åºã€‚</p>

<p>https://staight.github.io/2019/09/23/nsenter%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B/</p>

<p>https://mozillazg.com/2020/04/nsenter-usage.html</p>

<p>Nsenter è°ƒå–å®¿ä¸»æœºå·¥å…·è°ƒè¯•å®¹å™¨å†…ç¨‹åº</p>

<p>nsenter æ˜¯ä¸€ä¸ªå¯ä»¥ç”¨æ¥è¿›å…¥åˆ°ç›®æ ‡ç¨‹åºæ‰€åœ¨ Namespace ä¸­è¿è¡Œå‘½ä»¤çš„å·¥å…·ï¼Œä¸€èˆ¬å¸¸ç”¨äºåœ¨å®¿ä¸»æœºä¸Šè°ƒè¯•å®¹å™¨ä¸­è¿è¡Œçš„ç¨‹åºã€‚</p>

<p>nsenter å®‰è£…
nsenter ä½äº util-linux åŒ…ä¸­ï¼Œä¸€èˆ¬å¸¸ç”¨çš„ Linux å‘è¡Œç‰ˆéƒ½å·²ç»é»˜è®¤å®‰è£…ã€‚å¦‚æœä½ çš„ç³»ç»Ÿæ²¡æœ‰å®‰è£…ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š</p>

<p>$ yum install util-linux</p>

<p>https://cloud.tencent.com/developer/article/1730699</p>

:ET