I"|<p>â€œGo kitâ€æ˜¯ä¸€ç§å¼€æºçš„å¾®æœåŠ¡å·¥å…·ç®±ï¼Œå¯ä»¥ç”¨åœ¨ç°ä»£ä¼ä¸šåº”ç”¨ç¨‹åºæ ˆä¸­ä¿ƒè¿›å’Œè§„èŒƒåŒ–åŸºäº Go æœåŠ¡çš„åˆ›å»ºã€‚
https://github.com/go-kit/kit
https://gokit.io/
ç›¸ä¼¼çš„è¿˜æœ‰
gizmo, a microservice toolkit from The New York Times â˜…
go-micro, a microservices client/server library â˜…
gotalk, async peer communication protocol &amp; library
Kite, a micro-service framework
gocircuit, dynamic cloud orchestration
<!-- more -->
gokitå°±æ˜¯ä¸€ä¸ªgoè¯­è¨€ç›¸å…³çš„å¾®æœåŠ¡å·¥å…·åŒ…ã€‚å®ƒè‡ªèº«ç§°ä¸ºtoolkitï¼Œå¹¶ä¸æ˜¯frameworkã€‚ä¹Ÿå°±æ˜¯gokitæ˜¯å°†ä¸€ç³»åˆ—çš„æœåŠ¡é›†åˆåœ¨ä¸€èµ·ï¼Œæä¾›æ¥å£ï¼Œä»è€Œè®©å¼€å‘è€…è‡ªç”±ç»„åˆæ­å»ºè‡ªå·±çš„å¾®æœåŠ¡é¡¹ç›®</p>

<p>gokitçš„ç»“æ„åˆ†ä¸ºï¼š
transport
å†³å®šç”¨å“ªç§æ–¹å¼æä¾›æœåŠ¡è¯·æ±‚ï¼Œä¸€èˆ¬å°±æ˜¯ http,rpc</p>

<p>endpoint
æ˜¯gokitæœ€é‡è¦çš„ä¸€ä¸ªå±‚ï¼Œæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¥æ”¶è¯·æ±‚è¿”å›å“åº”çš„å‡½æ•°ç±»å‹ã€‚åœ¨è¿™ä¸ªå®šä¹‰çš„ç±»å‹é‡Œé¢ä¼šå»è°ƒç”¨serviceå±‚çš„æ–¹æ³•ï¼Œç»„è£…æˆresponseè¿”å›ã€‚è€Œgokitä¸­çš„æ‰€æœ‰ä¸­é—´ä»¶ç»„ä»¶éƒ½æ˜¯é€šè¿‡è£…é¥°è€…è®¾è®¡æ¨¡å¼æ³¨å…¥çš„ã€‚</p>

<p>type Endpoint func(ctx context.Context, request interface{}) (response interface{}, err error)</p>

<p>func(log Logger, in endpoint.Endpoint) endpoint.Endpoint {
    return func(ctx context.Context, req interface{}) (interface{}, error) {
            logger.Log(â€œinputâ€, toJSON(req))
            resp, err := in(ctx, req)
            logger.Log(â€œoutputâ€, toJSON(resp), â€œerrâ€, err)
            return resp, err
    }
}
service
æ‰€æœ‰çš„å…·ä½“æ–¹æ³•å†™åœ¨è¿™é‡Œï¼Œå¯ä»¥ç†è§£ä¸ºå•ä½“webæ¡†æ¶ä¸­çš„æ§åˆ¶å™¨éƒ¨åˆ†ã€‚</p>

<p>å·¥å…·åŒ…
è¿™ä¸‰ä¸ªå±‚ç»„æˆä¸€ä¸ªgokitå¾®æœåŠ¡åº”ç”¨ã€‚æ­¤å¤–ï¼Œä½œä¸ºä¸€ä¸ªå·¥å…·åŒ…ï¼Œgokitä¸ºæ­¤æä¾›äº†å¾ˆå¤šå¾®æœåŠ¡å·¥å…·ç»„ä»¶ã€‚
è®¤è¯ç»„ä»¶ï¼ˆbasic, jwtï¼‰
å›è·¯ç†”æ–­å™¨
æ—¥å¿—ç»„ä»¶
æ™®ç½—ç±³ä¿®æ–¯ç›‘æ§ç³»ç»Ÿ
é™æµå™¨
æœåŠ¡å‘ç°ç³»ç»Ÿæ¥å£ï¼ˆetcd, consulç­‰ï¼‰
è·¯ç”±è·Ÿè¸ª</p>

<p>ä¸€ä¸ªåŸºæœ¬çš„å¾®æœåŠ¡æ¶æ„åŒ…æ‹¬ï¼šåˆ†å‘å±‚apiç½‘å…³ï¼Œç›‘æ§ç³»ç»Ÿï¼Œæ—¥å¿—ç³»ç»Ÿï¼ŒæœåŠ¡æä¾›å±‚ç­‰</p>

<p>go-kit [TransportServer]
ä¸€ä¸ª Transport çš„ Server å¿…é¡»è¦æ‹¥æœ‰ endPointã€decodeRequestFuncã€encodeResponseFunc</p>

<p>1ã€ endPoint ä¸€ä¸ªç«¯ç‚¹ä»£è¡¨ä¸€ä¸ª RPCï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœåŠ¡æ¥å£ä¸­çš„ä¸€ä¸ªå‡½æ•°</p>

<p>2ã€ decodeRequestFunc è¯·æ±‚å‚æ•°è§£ç å‡½æ•°</p>

<p>3ã€ encodeResponseFunc è¿”å›å‚æ•°ç¼–ç å‡½æ•°</p>

<p>è¯·æ±‚æµç¨‹ï¼š
è¯·æ±‚-&gt;decodeRequestFunc -&gt; endPoint -&gt; encodeResponseFunc -&gt; è¿”å›è¾“å‡º</p>

<p>go-kit æä¾›ä»¥ä¸‹åŠŸèƒ½ï¼š</p>

<p>1ã€Circuit breakerï¼ˆç†”æ–­å™¨ï¼‰</p>

<p>2ã€Rate limiterï¼ˆé™æµå™¨ï¼‰</p>

<p>3ã€Loggingï¼ˆæ—¥å¿—ï¼‰</p>

<p>4ã€Metricsï¼ˆPrometheus ç»Ÿè®¡ï¼‰</p>

<p>5ã€Request tracingï¼ˆè¯·æ±‚è·Ÿè¸ªï¼‰</p>

<p>6ã€Service discovery and load balancingï¼ˆæœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡ï¼‰</p>

<p>1ã€å®‰è£…go-kitåŒ…
git clone https://github.com/go-kit/kit.git
2ã€protobufæ–‡ä»¶
ç”Ÿæˆå¯¹åº”çš„goè¯­è¨€ä»£ç æ–‡ä»¶ï¼šprotoc â€“go_out=plugins=grpc:. book.proto  ï¼ˆå…¶ä¸­ï¼šprotobufæ–‡ä»¶åä¸ºï¼šbook.proto
ä¹Ÿå¯ä»¥æ”¯æŒthrift
https://github.com/go-kit/kit/tree/master/transport/thrift</p>

<p>3ã€æœåŠ¡å™¨ç«¯ä»£ç 
4ã€å®¢æˆ·ç«¯ä»£ç </p>

<p>go-kitæŠ½è±¡çš„endpointï¼š</p>

<p>ä¸€ä¸ªTransportçš„Server å¿…é¡»è¦æ‹¥æœ‰endPointã€decodeRequestFuncã€encodeResponseFunc</p>

<p>1ã€ endPointä¸€ä¸ªç«¯ç‚¹ä»£è¡¨ä¸€ä¸ªRPCï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æœåŠ¡æ¥å£ä¸­çš„ä¸€ä¸ªå‡½æ•°</p>

<p>2ã€ decodeRequestFunc è¯·æ±‚å‚æ•°è§£ç å‡½æ•°</p>

<p>3ã€ encodeResponseFunc è¿”å›å‚æ•°ç¼–ç å‡½æ•°</p>

<p>è¯·æ±‚æµç¨‹ï¼š</p>

<p>è¯·æ±‚-&gt;encodeResponseFunc -&gt; endPoint -&gt; decodeRequestFunc -&gt; è¿”å›è¾“å‡º</p>

<p>https://books.studygolang.com/go-rpc-programming-guide/part1/thrift.html</p>
:ET