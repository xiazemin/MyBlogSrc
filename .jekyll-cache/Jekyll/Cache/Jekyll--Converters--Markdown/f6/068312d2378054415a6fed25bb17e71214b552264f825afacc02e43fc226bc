I"è<p>mmap() failed: [12] Cannot allocate memory
PHP Fatal error:  Out of memory (allocated 81788928) (tried to allocate 14987979559889010744 bytes) in phar:///usr/local/bin/composer/vendor/composer/ca-bundle/src/CaBundle.php on line 167</p>

<p>openssl_x509_parseè°ƒç”¨ä¹‹åå†…å­˜æ³„æ¼</p>

<p>$x509data = file_get_contents ( â€œd:/certs/xxx.cerâ€ );
$resource = openssl_x509_read ( $x509data );
$certdata = openssl_x509_parse ( $resource ); //&lt;=å°±æ˜¯è¿™å¥æœ‰é—®é¢˜
echo $certdata [â€˜serialNumberâ€™]; //&lt;=å°±æ˜¯éœ€è¦è¿™ä¸ªæ•°æ®æ‰€ä»¥è¦è°ƒä¸Šé¢é‚£å¥
echo $x509data;
unset($certdata); //&lt;=ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆç”¨
openssl_x509_free($resource); //&lt;=ä¼¼ä¹æ²¡æœ‰ä»€ä¹ˆç”¨x2</p>

<p>å¾ªç¯ä¸ª100000æ¬¡å¯ä»¥çœ‹åˆ°æ˜æ˜¾ä¸€ç›´åœ¨æ¶¨ã€‚
windowsä¸‹è¯•è¿‡php5.4+openssl0.9.8ï¼Œphp7.0+openssl1.0.2éƒ½æœ‰è¿™é—®é¢˜ã€‚
<!-- more --></p>

<p>https://www.jianshu.com/p/12a1dc4ab7a0</p>

<p>https://www.openssl.org/source/</p>

<p>https://github.com/openssl/openssl/tags?after=OpenSSL_1_0_2u</p>

<p>https://github.com/openssl/openssl</p>

<p>https://www.jb51.net/article/144387.htm</p>

<p>https://bugs.php.net/bug.php?id=65602%20</p>

<p>https://www.cnblogs.com/coolYuan/p/8963972.html</p>

<p>curl -O https://github.com/openssl/openssl/archive/OpenSSL_1_1_0l.tar.gz</p>

<p>curl -O https://github.com/openssl/openssl/archive/OpenSSL_1_1_0l.zip</p>

<p>$tar -zxvf OpenSSL_1_0_2t.tar.gz
tar: Unrecognized archive format
tar: Error exit delayed from previous errors.</p>

<p>git clone https://github.com/openssl/openssl</p>

<p>$brew install openssl
^C
Warning: You are using macOS 10.11.
We (and Apple) do not provide support for this old version.
You will encounter build failures with some formulae.
Please create pull requests instead of asking for help on Homebrewâ€™s GitHub,
Discourse, Twitter or IRC. You are responsible for resolving any issues you
experience while you are running this old version.</p>

<p>==&gt; Downloading https://www.openssl.org/source/openssl-1.1.1g.tar.gz
######                <br />
==&gt; perl ./Configure â€“prefix=/usr/local/Cellar/openssl@1.1/1.1.1g â€“openssldir=/usr/local/etc/openssl@1.1 no-ssl3 n
==&gt; make</p>

<p>==&gt; make install MANDIR=/usr/local/Cellar/openssl@1.1/1.1.1g/share/man MANSUFFIX=ssl
  ==&gt; Caveats
A CA file has been bootstrapped using certificates from the system
keychain. To add additional certificates, place .pem files in
  /usr/local/etc/openssl@1.1/certs</p>

<p>and run
  /usr/local/opt/openssl@1.1/bin/c_rehash</p>

<p>openssl@1.1 is keg-only, which means it was not symlinked into /usr/local,
because macOS provides LibreSSL.</p>

<p>If you need to have openssl@1.1 first in your PATH run:
  echo â€˜export PATH=â€/usr/local/opt/openssl@1.1/bin:$PATHâ€â€™Â Â» /Users/didi/.bash_profile</p>

<p>For compilers to find openssl@1.1 you may need to set:
  export LDFLAGS=â€-L/usr/local/opt/openssl@1.1/libâ€
  export CPPFLAGS=â€-I/usr/local/opt/openssl@1.1/includeâ€</p>

<p>For pkg-config to find openssl@1.1 you may need to set:
  export PKG_CONFIG_PATH=â€/usr/local/opt/openssl@1.1/lib/pkgconfigâ€</p>

<p>curl -O https://www.openssl.org/source/openssl-1.1.1g.tar.gz</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>526  tar -zxvf openssl-1.1.1g.tar.gz   527  cd openssl-1.1.1g
  
528  ./Configure  darwin64-x86_64-cc -shared --prefix=/usr/local   529  sudo make -j4   530   sudo make install
</code></pre></div></div>

<p>$   openssl version
OpenSSL 1.1.1g  21 Apr 2020</p>

<p>cd ..</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>537  make clean   538  ./configure   539  make -j4
</code></pre></div></div>

<p>/Users/didi/PhpstormProjects/c/php-src/ext/openssl/openssl.c:3620:6: error: incomplete definition of type
      â€˜struct dsa_stâ€™</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  é«˜ç‰ˆæœ¬é—®é¢˜æ˜¯å’Œphp7.0 ä¸å…¼å®¹
  ä½ç‰ˆæœ¬å†…å­˜æ³„éœ²                         
</code></pre></div></div>

:ET