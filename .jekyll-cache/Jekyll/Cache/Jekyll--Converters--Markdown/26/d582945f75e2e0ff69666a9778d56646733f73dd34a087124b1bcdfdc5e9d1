I"¶)<p>https://www.webpackjs.com/loaders/babel-loader/
https://www.babeljs.cn/</p>

<p>npm install babel-loader babel-core babel-preset-env webpack
<!-- more -->
ä¸€ã€è¯´æ˜
webpackï¼Œé»˜è®¤åªèƒ½å¤„ç†ä¸€éƒ¨åˆ†ES6æ–°è¯­æ³•ï¼Œä¸€äº›æ›´é«˜çº§å¤„ç†ä¸äº†ï¼ˆES2015+çš„è¯­æ³•ï¼‰ã€‚
éœ€è¦å€ŸåŠ©ç¬¬ä¸‰æ–¹loaderæ¥å¸®å¿™å¤„ç†æˆä½çº§ç‚¹çš„è¯­æ³•ï¼Œå†æŠŠç»“æœäº¤ç»™webpackæ‰“åŒ…ç¼–è¯‘å¤„ç†ã€‚
é€šè¿‡Babelå¯ä»¥å¸®åŠ©å¤„ç†ES6+é«˜çº§è¯­æ³•ã€‚
äºŒã€å®‰è£…</p>

<p>npm install -D babel-loaderï¼Œå®‰è£…babel-loaderã€‚å®‰è£…å®Œæˆä¼šæç¤ºéœ€è¦å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„babel-coreã€‚</p>

<p>æ ¹æ®æç¤ºå®‰è£…å¯¹åº”ç‰ˆæœ¬çš„babel-coreã€‚npm i @babel/core@^7.0.0 -Dï¼ˆ7.xå¯ä»¥ç›´æ¥npm i @babel/core -Dï¼‰ï¼Œbabel çš„ node API å·²ç»è¢«ç§»åˆ° babel-coreã€‚</p>

<p>npm i @babel/preset-env -Dï¼Œæä¾›è¯­æ³•è½¬æ¢å¯¹åº”å…³ç³»ï¼ˆè½¬æ¢å­—å…¸ï¼‰ã€‚babelæœ‰å‡ ç§è§„åˆ™éƒ½å¯ä»¥å®ç°å¯¹ES6è¯­æ³•çš„è½¬ç ï¼Œå®˜æ–¹ç°å·²å»ºè®®é‡‡ç”¨babel-preset-envã€‚</p>

<p>å¯èƒ½ä¼šæŠ¥é”™ï¼š</p>

<p>è¿™æ˜¯å› ä¸º babel çš„ç‰ˆæœ¬å†²çªï¼Œbabel-loader 8.xå¯¹åº”babel 7.xä»¥æ­¤ç±»æ¨ã€‚</p>

<p>ä¸‰ã€é…ç½®
1ã€å¢åŠ åŒ¹é…è§„åˆ™
webpack.config.jsä¸­å¢åŠ åŒ¹é…è§„åˆ™ï¼š</p>

<p>module.exports = {
    module:{<br />
        rules:[ <br />
            {
                test:/.js$/,   //åŒ¹é…JSæ–‡ä»¶<br />
                use:â€™babel-loaderâ€™,
                exclude:/node_modules/   //æ’é™¤node_modulesç›®å½•
            }
        ]
    }
}
éœ€è¦æ’é™¤node_modulesç›®å½•ï¼Œæ­¤ç›®å½•ä¸‹éƒ½æ˜¯ç°æˆçš„åŒ…ï¼ˆå·²æ‰“åŒ…ç¼–è¯‘è¿‡ï¼‰ï¼Œé‡æ–°æ‰“åŒ…è€—èµ„æºã€è¿è¡Œé¡¹ç›®æŠ¥é”™ã€‚
2ã€Babelé…ç½®æ–‡ä»¶</p>

<p>åœ¨é¡¹ç›®æ ¹è·¯å¾„ä¸‹åˆ›å»ºåä¸º .babelrc çš„Babelé…ç½®æ–‡ä»¶ï¼ˆè§„èŒƒçš„JSONæ ¼å¼ï¼Œæ— æ³¨é‡Šã€å­—ç¬¦ä¸²å¿…é¡»åŒå¼•å·ç­‰ç­‰ï¼‰ï¼Œé…ç½®è§„åˆ™ã€‚
pluginsæ’ä»¶ï¼›presetsé¢„è®¾ã€è¯­æ³•ã€‚
{
    â€œpresetsâ€: [â€œ@babel/envâ€]
}
ä¹Ÿå¯ä»¥åœ¨package.jsonä¸­é…ç½®ã€‚</p>

<p>â€œbabelâ€:{
   â€œpresetsâ€: [â€œ@babel/envâ€]
}</p>

<p>ä¸€ã€babelä»‹ç»#
â‘ Babel æ˜¯ä¸€ä¸ª JavaScript ç¼–è¯‘å™¨ï¼Œå¯ä»¥æŠŠES6çš„è¯­æ³•è½¬ä¸ºå…¼å®¹æµè§ˆå™¨çš„ES5è¯­æ³•</p>

<p>â‘¡Babelä¸­æ–‡å®˜ç½‘ï¼šhttps://www.babeljs.cn/</p>

<p>â‘¢Babelå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä½†æ˜¯ä¸€èˆ¬éƒ½æ˜¯å’Œwebpackç»“åˆä¸€èµ·ä½¿ç”¨</p>

<p>äºŒã€webpacké‡Œä½¿ç”¨babel#
1ã€babel-loader babel-core babel-preset-env ï¼ˆè½¬æ¢è¯­æ³•ï¼‰</p>

<p>â‘ å®‰è£…ä¾èµ–ï¼š</p>

<p>// å·²ç»åœ¨é¡¹ç›®é‡Œå®‰è£…äº†webpackçš„æƒ…å†µä¸‹
npm install â€“save-dev babel-loader babel-core babel-preset-env
â‘¡é…ç½®</p>

<p>å¤åˆ¶ä»£ç 
// è¯¥æ–‡ä»¶å…¶å®æœ€ç»ˆæ˜¯è¦åœ¨nodeç¯å¢ƒä¸‹æ‰§è¡Œçš„
const path = require(â€˜pathâ€™)
const htmlWebpackPlugin = require(â€˜html-webpack-pluginâ€™)</p>

<p>// å¯¼å‡ºä¸€ä¸ªå…·æœ‰ç‰¹æ®Šå±æ€§é…ç½®çš„å¯¹è±¡
module.exports = {
    entry:â€™./src/main.jsâ€™,/* å…¥å£æ–‡ä»¶æ¨¡å—è·¯å¾„ <em>/
    output:{
        path:path.join(__dirname,â€™./dist/â€™),/</em> å‡ºå£æ–‡ä»¶æ¨¡å—æ‰€å±ç›®å½•ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ <em>/
        filename:â€™bundle.jsâ€™/</em> æ‰“åŒ…çš„ç»“æœæ–‡ä»¶åç§° */
    },
    devServer:{
        // é…ç½®webpack-dev-serverçš„wwwç›®å½•
        contentBase:â€™./distâ€™
    },
    plugins:[
        // è¯¥æ’ä»¶å¯ä»¥æŠŠindex.htmlæ‰“åŒ…åˆ°bundle.jsæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œè·Ÿç€bundleèµ°
        // åŒæ—¶ä¹Ÿä¼šè‡ªåŠ¨åœ¨index.htmlä¸­æ³¨å…¥scriptå¼•ç”¨é“¾æ¥ï¼Œå¹¶ä¸”å¼•ç”¨çš„èµ„æºåç§°ï¼Œä¹Ÿå–å†³äºæ‰“åŒ…çš„æ–‡ä»¶åç§°
        new htmlWebpackPlugin({
            template:â€™./index.htmlâ€™
        })
    ],
    module:{
        rules:[
            {
                test:/.css$/,
                use:[
                    //æ³¨æ„ï¼šè¿™é‡Œçš„é¡ºåºå¾ˆé‡è¦ï¼Œä¸è¦ä¹±äº†é¡ºåº
                    â€˜style-loaderâ€™,
                    â€˜css-loaderâ€™
                ]
            },
            {
                test:/.(jpg|png|gif|svg)$/,
                use:[
                    â€˜file-loaderâ€™
                ]
            },
            {
                test:/.js$/,
                exclude:/(node_modules|bower_components)/,//æ’é™¤æ‰node_moduleç›®å½•
                use:{
                    loader:â€™babel-loaderâ€™,
                    options:{
                        presets:[â€˜envâ€™] //è½¬ç è§„åˆ™
                    }
                }
            }
        ]
    }
}
å¤åˆ¶ä»£ç 
â‘¢æ‰“åŒ…</p>

<p>npm run build</p>

<p>2ã€babel-polyfill æ¥æä¾›ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­çš„ä¸æ”¯æŒAPI</p>

<p>â‘ å®‰è£…ä¾èµ–</p>

<p>npm install â€“save-dev babel-polyfill
â‘¡é…ç½®ï¼šè¿™æ ·ä¼šåœ¨æ‰“åŒ…çš„æ—¶å€™æä¾›ä¸€ä¸ªå«è„šç‰‡ç”¨ä»¥å…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸­ä¸æ”¯æŒçš„APIï¼ˆå…¼å®¹ä½ç‰ˆæœ¬æµè§ˆå™¨çš„ä¸€ä¸ªæ–¹æ³•ï¼‰</p>

<p>å¤åˆ¶ä»£ç 
// è¯¥æ–‡ä»¶å…¶å®æœ€ç»ˆæ˜¯è¦åœ¨nodeç¯å¢ƒä¸‹æ‰§è¡Œçš„
const path = require(â€˜pathâ€™)
const htmlWebpackPlugin = require(â€˜html-webpack-pluginâ€™)</p>

<p>// å¯¼å‡ºä¸€ä¸ªå…·æœ‰ç‰¹æ®Šå±æ€§é…ç½®çš„å¯¹è±¡
module.exports = {
    entry:[â€˜babel-polyfillâ€™,â€™./src/main.jsâ€™],/* å…¥å£æ–‡ä»¶æ¨¡å—è·¯å¾„ <em>/
    output:{
        path:path.join(__dirname,â€™./dist/â€™),/</em> å‡ºå£æ–‡ä»¶æ¨¡å—æ‰€å±ç›®å½•ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ <em>/
        filename:â€™bundle.jsâ€™/</em> æ‰“åŒ…çš„ç»“æœæ–‡ä»¶åç§° */
    },
    devServer:{
        // é…ç½®webpack-dev-serverçš„wwwç›®å½•
        contentBase:â€™./distâ€™
    },
    plugins:[
        // è¯¥æ’ä»¶å¯ä»¥æŠŠindex.htmlæ‰“åŒ…åˆ°bundle.jsæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œè·Ÿç€bundleèµ°
        // åŒæ—¶ä¹Ÿä¼šè‡ªåŠ¨åœ¨index.htmlä¸­æ³¨å…¥scriptå¼•ç”¨é“¾æ¥ï¼Œå¹¶ä¸”å¼•ç”¨çš„èµ„æºåç§°ï¼Œä¹Ÿå–å†³äºæ‰“åŒ…çš„æ–‡ä»¶åç§°
        new htmlWebpackPlugin({
            template:â€™./index.htmlâ€™
        })
    ],
    module:{
        rules:[
            {
                test:/.css$/,
                use:[
                    //æ³¨æ„ï¼šè¿™é‡Œçš„é¡ºåºå¾ˆé‡è¦ï¼Œä¸è¦ä¹±äº†é¡ºåº
                    â€˜style-loaderâ€™,
                    â€˜css-loaderâ€™
                ]
            },
            {
                test:/.(jpg|png|gif|svg)$/,
                use:[
                    â€˜file-loaderâ€™
                ]
            },
            {
                test:/.js$/,
                exclude:/(node_modules|bower_components)/,//æ’é™¤æ‰node_moduleç›®å½•
                use:{
                    loader:â€™babel-loaderâ€™,
                    options:{
                        presets:[â€˜envâ€™] //è½¬ç è§„åˆ™
                    }
                }
            }
        ]
    }
}
å¤åˆ¶ä»£ç 
â‘¢æ‰“åŒ…</p>

<p>npm run build</p>

<p>3ã€transform-runtimeè§£å†³ä»£ç é‡å¤é—®é¢˜</p>

<p>â‘ åœ¨æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œbabelä¼šåœ¨åŒ…é‡Œæä¾›ä¸€äº›å·¥å…·å‡½æ•°ï¼Œè€Œè¿™äº›å·¥å…·å‡½æ•°å¯èƒ½ä¼šé‡å¤çš„å‡ºç°åœ¨å¤šä¸ªæ¨¡å—ã€‚</p>

<p>â‘¡è¿™æ ·ä¼šå¯¼è‡´æ‰“åŒ…çš„ä½“ç§¯è¿‡å¤§ï¼Œæ‰€ä»¥babelæä¾›äº†babel-transform-runtimeè§£å†³è¿™ä¸ªä½“ç§¯è¿‡å¤§çš„é—®é¢˜</p>

<p>â‘¢å®‰è£…ä¾èµ–</p>

<p>npm install babel-plugin-transform-runtime â€“save-dev
npm install babel-runtime â€“save
â‘£é…ç½®</p>

<p>å¤åˆ¶ä»£ç 
// è¯¥æ–‡ä»¶å…¶å®æœ€ç»ˆæ˜¯è¦åœ¨nodeç¯å¢ƒä¸‹æ‰§è¡Œçš„
const path = require(â€˜pathâ€™)
const htmlWebpackPlugin = require(â€˜html-webpack-pluginâ€™)</p>

<p>// å¯¼å‡ºä¸€ä¸ªå…·æœ‰ç‰¹æ®Šå±æ€§é…ç½®çš„å¯¹è±¡
module.exports = {
    entry:[â€˜babel-polyfillâ€™,â€™./src/main.jsâ€™],/* å…¥å£æ–‡ä»¶æ¨¡å—è·¯å¾„ <em>/
    output:{
        path:path.join(__dirname,â€™./dist/â€™),/</em> å‡ºå£æ–‡ä»¶æ¨¡å—æ‰€å±ç›®å½•ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ <em>/
        filename:â€™bundle.jsâ€™/</em> æ‰“åŒ…çš„ç»“æœæ–‡ä»¶åç§° */
    },
    devServer:{
        // é…ç½®webpack-dev-serverçš„wwwç›®å½•
        contentBase:â€™./distâ€™
    },
    plugins:[
        // è¯¥æ’ä»¶å¯ä»¥æŠŠindex.htmlæ‰“åŒ…åˆ°bundle.jsæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œè·Ÿç€bundleèµ°
        // åŒæ—¶ä¹Ÿä¼šè‡ªåŠ¨åœ¨index.htmlä¸­æ³¨å…¥scriptå¼•ç”¨é“¾æ¥ï¼Œå¹¶ä¸”å¼•ç”¨çš„èµ„æºåç§°ï¼Œä¹Ÿå–å†³äºæ‰“åŒ…çš„æ–‡ä»¶åç§°
        new htmlWebpackPlugin({
            template:â€™./index.htmlâ€™
        })
    ],
    module:{
        rules:[
            {
                test:/.css$/,
                use:[
                    //æ³¨æ„ï¼šè¿™é‡Œçš„é¡ºåºå¾ˆé‡è¦ï¼Œä¸è¦ä¹±äº†é¡ºåº
                    â€˜style-loaderâ€™,
                    â€˜css-loaderâ€™
                ]
            },
            {
                test:/.(jpg|png|gif|svg)$/,
                use:[
                    â€˜file-loaderâ€™
                ]
            },
            {
                test:/.js$/,
                exclude:/(node_modules|bower_components)/,//æ’é™¤æ‰node_moduleç›®å½•
                use:{
                    loader:â€™babel-loaderâ€™,
                    options:{
                        presets:[â€˜envâ€™], //è½¬ç è§„åˆ™
                        plugins:[â€˜transform-runtimeâ€™]
                    }
                }
            }
        ]
    }
}
å¤åˆ¶ä»£ç 
 4ã€é…ç½®cacheDirectoryå¯ä»¥èŠ‚çœwebpackæ‰“åŒ…ç¼–è¯‘æ—¶é—´ï¼Œé»˜è®¤æŠŠæ‰“åŒ…çš„ç»“æœç¼“å­˜åˆ°node_modules/.cacheæ¨¡å—ä¸‹</p>

<p>å¤åˆ¶ä»£ç 
// è¯¥æ–‡ä»¶å…¶å®æœ€ç»ˆæ˜¯è¦åœ¨nodeç¯å¢ƒä¸‹æ‰§è¡Œçš„
const path = require(â€˜pathâ€™)
const htmlWebpackPlugin = require(â€˜html-webpack-pluginâ€™)</p>

<p>// å¯¼å‡ºä¸€ä¸ªå…·æœ‰ç‰¹æ®Šå±æ€§é…ç½®çš„å¯¹è±¡
module.exports = {
    entry:[â€˜babel-polyfillâ€™,â€™./src/main.jsâ€™],/* å…¥å£æ–‡ä»¶æ¨¡å—è·¯å¾„ <em>/
    output:{
        path:path.join(__dirname,â€™./dist/â€™),/</em> å‡ºå£æ–‡ä»¶æ¨¡å—æ‰€å±ç›®å½•ï¼Œå¿…é¡»æ˜¯ä¸€ä¸ªç»å¯¹è·¯å¾„ <em>/
        filename:â€™bundle.jsâ€™/</em> æ‰“åŒ…çš„ç»“æœæ–‡ä»¶åç§° */
    },
    devServer:{
        // é…ç½®webpack-dev-serverçš„wwwç›®å½•
        contentBase:â€™./distâ€™
    },
    plugins:[
        // è¯¥æ’ä»¶å¯ä»¥æŠŠindex.htmlæ‰“åŒ…åˆ°bundle.jsæ–‡ä»¶æ‰€å±ç›®å½•ï¼Œè·Ÿç€bundleèµ°
        // åŒæ—¶ä¹Ÿä¼šè‡ªåŠ¨åœ¨index.htmlä¸­æ³¨å…¥scriptå¼•ç”¨é“¾æ¥ï¼Œå¹¶ä¸”å¼•ç”¨çš„èµ„æºåç§°ï¼Œä¹Ÿå–å†³äºæ‰“åŒ…çš„æ–‡ä»¶åç§°
        new htmlWebpackPlugin({
            template:â€™./index.htmlâ€™
        })
    ],
    module:{
        rules:[
            {
                test:/.css$/,
                use:[
                    //æ³¨æ„ï¼šè¿™é‡Œçš„é¡ºåºå¾ˆé‡è¦ï¼Œä¸è¦ä¹±äº†é¡ºåº
                    â€˜style-loaderâ€™,
                    â€˜css-loaderâ€™
                ]
            },
            {
                test:/.(jpg|png|gif|svg)$/,
                use:[
                    â€˜file-loaderâ€™
                ]
            },
            {
                test:/.js$/,
                exclude:/(node_modules|bower_components)/,//æ’é™¤æ‰node_moduleç›®å½•
                use:{
                    loader:â€™babel-loaderâ€™,
                    options:{
                        cacheDriectory:true,
                        presets:[â€˜envâ€™], //è½¬ç è§„åˆ™
                        plugins:[â€˜transform-runtimeâ€™]
                    }
                }
            }
        ]
    }
}</p>
:ET