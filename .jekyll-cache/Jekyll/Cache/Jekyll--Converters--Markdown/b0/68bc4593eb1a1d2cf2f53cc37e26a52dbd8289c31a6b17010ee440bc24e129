I"¯<p>æœ¬æ–‡ä¸è®²è¿° Go çš„å•å…ƒæµ‹è¯•å¦‚ä½•ç¼–å†™ï¼Œè¿™é‡Œç›´æ¥ä»¥filenamifyï¼ˆä¸€ä¸ªåˆæ³•åŒ–æ–‡ä»¶è·¯å¾„çš„åº“ï¼‰ä¸ºä¾‹å­ã€‚å·²ä¸ºfilenamify.goç¼–å†™æµ‹è¯•æ–‡ä»¶filenamify_test.goã€‚åªéœ€è¦åœ¨tracisä¸­æ‰§è¡Œgo test -vå³å¯ã€‚</p>
<h1 id="httpsgithubcomflytamfilenamifyblobmastertravisyml">https://github.com/flytam/filenamify/blob/master/.travis.yml</h1>
<p>language: go</p>

<p>go:
    - 1.13.x
env:
    - GO111MODULE=on
script: go test -v
å¤åˆ¶ä»£ç ç„¶åç»™åœ¨é¡¹ç›®ä¸­åŠ ä¸Šæ„å»ºçŠ¶æ€å›¾æ ‡ã€‚æå®š
<!-- more -->
è¿™æ ·ï¼Œæ¯æ¬¡æ¨é€åˆ°è¿œç¨‹ï¼Œå°±ä¼šè§¦å‘CIè‡ªåŠ¨æ‰§è¡Œå•å…ƒæµ‹è¯•
å‘å¸ƒ github release
æœ‰æ—¶å€™æˆ‘ä»¬çš„ Go é¡¹ç›®æ˜¯éœ€è¦æ‰“åŒ…æˆå¯è¡Œæ–‡ä»¶ç›´æ¥å‘å¸ƒåˆ° github release è®©åˆ«äººä¸‹è½½æ‰§è¡Œçš„ã€‚è¿™æ—¶å€™ä¹Ÿå¯ä»¥ä½¿ç”¨traviså®ç°ï¼Œå€ŸåŠ©travis releaseså·¥å…·å³å¯
1ã€æ–°å»ºä¸€ä¸ª.travis.ymlæ–‡ä»¶ï¼Œå¡«å…¥åŸºæœ¬çš„ Go é…ç½®ç¯å¢ƒ
language: go</p>

<p>go:
    - 1.13.x
env:
    - GO111MODULE=on # å¯ç”¨Go mod
install:
    - go get -v
å¤åˆ¶ä»£ç 2ã€ç¼–å†™Makefile
åœ¨nodejsé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä¼šé…ç½®ä¸€ä¸ªnpm run testçš„å‘½ä»¤æ‰§è¡Œæµ‹è¯•ï¼Œä½†æ˜¯ Go æ˜¯æ²¡æœ‰npmå’Œpackage.jsonè¿™ä¸¤ä¸ªä¸œè¥¿ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç¼–å†™Makefileæ¥å®ç°äº†ï¼ˆå¯ä»¥æŠŠMakefileçœ‹ä½œåŠŸèƒ½ç±»å‹äºpackage.jsonçš„ä¸œè¥¿ï¼Œåªæ˜¯ä½¿ç”¨make xxxæ¥æ‰§è¡Œï¼‰ï¼ŒMakefileç¼–å†™å¯ä»¥å‚è€ƒã€‚
ä»¥blog-syncä¸ºä¾‹å­ï¼Œè¿™é‡Œæˆ‘æ˜¯éœ€è¦æ‰“åŒ…å…¨å¹³å°çš„å¯è¡Œæ–‡ä»¶ï¼Œäºæ˜¯Makefileå¦‚ä¸‹
GOCMD=go
GOBUILD=$(GOCMD) build
BINARY_NAME=bin
NAME=blog-sync</p>

<p>#mac
build:
	CGO_ENABLED=0 $(GOBUILD) -o $(BINARY_NAME)/$(NAME)-mac</p>
<h1 id="windows">windows</h1>
<p>build-linux:
	CGO_ENABLED=0 GOOS=windows GOARCH=amd64 $(GOBUILD) -o $(BINARY_NAME)/$(NAME)-linux</p>
<h1 id="linux">linux</h1>
<p>build-win:
	CGO_ENABLED=0 GOOS=linux GOARCH=amd64 $(GOBUILD) -o $(BINARY_NAME)/$(NAME)-win.exe</p>
<h1 id="å…¨å¹³å°">å…¨å¹³å°</h1>
<p>build-all:
	make build
	make build-win
	make build-linux
å¤åˆ¶ä»£ç æ‰§è¡Œmake build-allå³å¯åœ¨binç›®å½•ä¸‹ç”Ÿæˆ 3 ä¸ªå¹³å°çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚
language: go</p>

<p>go:
    - 1.13.x
env:
    - GO111MODULE=on # å¯ç”¨Go mod
install:
    - go get -v
before_deploy: make build-all
deploy:
    provider: releases
    api_key: è‡ªåŠ¨ç”Ÿæˆçš„github key
    file_glob: true
    file: bin/*
    skip_cleanup: true
    on:
        repo: flytam/blog-sync
        tags: true
å¤åˆ¶ä»£ç 3ã€ä½¿ç”¨setupåˆå§‹åŒ–é…ç½®</p>
<h1 id="å·²ç»å®‰è£…travis-cli">å·²ç»å®‰è£…travis cli</h1>
<p>travis setup releases</p>
<h1 id="æŒ‰éœ€å¡«å†™è¾“å…¥githubè´¦å·å¯†ç åŠ å¯†keyå‘å¸ƒæ–‡ä»¶ç­‰">æŒ‰éœ€å¡«å†™ï¼Œè¾“å…¥githubè´¦å·å¯†ç ï¼ŒåŠ å¯†keyï¼Œå‘å¸ƒæ–‡ä»¶ç­‰</h1>
<p>å¤åˆ¶ä»£ç å†ç®€å•å®šåˆ¶åŒ–åï¼Œæœ€ç»ˆå¦‚ä¸‹é…ç½®ï¼Œreleasesé…ç½®å¯å‚è€ƒæ–‡æ¡£</p>
<h1 id="httpsgithubcomflytamblog-syncblobmastertravisyml">https://github.com/flytam/blog-sync/blob/master/.travis.yml</h1>
<p>language: go</p>

<p>go:
    - 1.13.x
env:
    - GO111MODULE=on # å¯ç”¨Go mod
install:
    - go get -v
before_deploy: make build-all # å‘å¸ƒå‰æ‰§è¡Œç”ŸæˆäºŒè¿›åˆ¶æ–‡ä»¶çš„å‘½ä»¤
deploy:
    provider: releases
    api_key:
        secure: xxxx
    # ä½¿ç”¨globåŒ¹é…å‘å¸ƒbinç›®å½•ä¸‹çš„æ–‡ä»¶
    file_glob: true
    file: bin/*
    skip_cleanup: true
    on:
        repo: flytam/blog-sync
        # tagæ‰è§¦å‘å‘å¸ƒ
        tags: true
å¤åˆ¶ä»£ç 4ã€å‘å¸ƒ
æ¯æ¬¡æ‰“tagæ¨é€åˆ°ä»“åº“ï¼Œå°±ä¼šè§¦å‘è‡ªåŠ¨å‘å¸ƒå¯æ‰§è¡Œæ–‡ä»¶åˆ°github release
git tag 1.0.0
git push â€“tags
å¤åˆ¶ä»£ç 5ã€å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘ä»¬çš„è‡ªåŠ¨æ„å»ºå‘å¸ƒ release æˆåŠŸäº†</p>
:ET