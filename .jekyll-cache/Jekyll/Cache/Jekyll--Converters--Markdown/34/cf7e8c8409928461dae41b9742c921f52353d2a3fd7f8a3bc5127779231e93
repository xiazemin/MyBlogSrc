I"/<p>https://mp.weixin.qq.com/s/pZadyJ3YUYK3Q30w8dTymw
CAT 是大众点评开源的一个基于 Trace 的应用监控系统。2014 年底，携程开始引入 CAT 并落地。在这几年里，我们的数据量一直呈现着爆发式的增长，在这期间我们不断地对 CAT 做了很多大大小小的优化，使得我们的机器数目并没有像数据量那样呈现出指数级的增加。到目前为止，我们已经有超过 7 万的客户端，每天处理的消息树已经超过了 8000 亿，每天处理的日志量超过 4 万亿行，峰值流量达到 1.5 亿行 / 秒。
<!-- more -->
CAT 客户端的监控数据会组装成一种树状结构，也就是 CAT 里面的 MessageTree，然后发送到 CAT 服务端。CAT 服务端会把这份数据同时分发给多个不同用途的报表分析器进行实时计算，计算出来的结果会被存到服务端的内存报表里面。
那么我们的报表是什么样子的呢？这里是一个 CAT 里面最基本的 Transaction 报表的截图，我们可以把它简单理解成一段时间内的一些监控指标的聚合。这个例子里面展示的是 RPCService 这个 Transaction 在这一小时内每一分钟发生的次数、平均耗时、每分钟的失败以及这个小时的平均耗时，99 线、95 线。
1）CAT 线程模型</p>
:ET