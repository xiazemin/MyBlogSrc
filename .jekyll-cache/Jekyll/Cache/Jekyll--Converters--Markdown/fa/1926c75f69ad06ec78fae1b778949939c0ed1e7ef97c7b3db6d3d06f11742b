I"¢<p>å½“æ•´æ•°è¶…è¿‡6ä½çš„æ—¶å€™ï¼Œmarshal ä¼šå˜æˆæµ®ç‚¹æ•°ï¼Œç„¶åparseInt ä¼šå¤±è´¥
strconv.ParseInt: parsing â€œ1.04746e+06â€: invalid syntax</p>

<p>ç‰¹åˆ«æ˜¯ä¸šåŠ¡ä¸­å¤„ç†é€’å¢idçš„æ—¶å€™ï¼Œè¦éå¸¸å°å¿ƒï¼Œæœ€å¥½ç”¨ParseFloat ç„¶åè½¬intï¼Œç¦æ­¢ä½¿ç”¨parseInt</p>

<p>golang strconv.ParseInt æ˜¯å°†å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ•°å­—çš„å‡½æ•°,åŠŸèƒ½ç°å¸¸ä¹‹å¼ºå¤§,çœ‹çš„æˆ‘å£æ°´ç›´æµ.</p>

<p>func ParseInt(s string, base int, bitSize int) (i int64, err error)</p>

<p>å‚æ•°1 æ•°å­—çš„å­—ç¬¦ä¸²å½¢å¼</p>

<p>å‚æ•°2 æ•°å­—å­—ç¬¦ä¸²çš„è¿›åˆ¶ æ¯”å¦‚äºŒè¿›åˆ¶ å…«è¿›åˆ¶ åè¿›åˆ¶ åå…­è¿›åˆ¶</p>

<p>å‚æ•°3 è¿”å›ç»“æœçš„bitå¤§å° ä¹Ÿå°±æ˜¯int8 int16 int32 int64
<!-- more -->
Golang ä½¿ç”¨ JSON unmarshal æ•°å­—åˆ° interface{} æ•°å­—å˜æˆ float64 ç±»å‹</p>

<p>è¿™æ˜¯ç”±äº JSON é‡Œçš„æ•°å­—é»˜è®¤éƒ½ä¼šè½¬æˆ Golang çš„ float64 ç±»å‹å¼•èµ·çš„ï¼Œ</p>

<p>ä½¿ç”¨ Golang è§£æ JSONÂ  æ ¼å¼æ•°æ®æ—¶ï¼Œè‹¥ä»¥ interface{} æ¥æ”¶æ•°æ®ï¼Œåˆ™ä¼šæŒ‰ç…§ä¸‹åˆ—è§„åˆ™è¿›è¡Œè§£æï¼š</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bool, for JSON booleans
 
float64, for JSON numbers
 
string, for JSON strings
 
[]interface{}, for JSON arrays
 
map[string]interface{}, for JSON objects
 
nil for JSON null
</code></pre></div></div>

<p>è€Œæµ®ç‚¹æ•°æ‰“å°æ—¶çš„é»˜è®¤è§„åˆ™æ˜¯è¶…è¿‡ä¸€å®šé•¿åº¦åä¼šæ¢æˆç§‘å­¦è®¡æ•°æ³•æ‰“å°ã€‚</p>

<p>å› æ­¤ï¼Œåªè¦åœ¨æ‰“å°æ—¶æŒ‡å®šæ‰“å°æ ¼å¼ï¼Œæˆ–è€…ï¼ˆæŒ‰ç…§LZç¤ºä¾‹é‡Œæ˜¯æ•´æ•°çš„æƒ…å†µæ—¶ï¼‰ï¼Œè½¬æ¢ä¸ºæ•´æ•°æ‰“å°</p>

<p>fmt.Println( int( a[â€œidâ€].(float64) ) ) // å°† â€œidâ€ é”®ç”³æ˜ä¸º float64 ç±»å‹ï¼Œå†è½¬æ¢ä¸º int å‹</p>

<p>é‡åˆ°çš„å‘
func parseInt64(a int64){
	var ai interface{}
	as, _ := nativejson.Marshal(a)
	nativejson.Unmarshal(as, &amp;ai)
	it, err := strconv.ParseInt(fmt.Sprint(ai), 10, 64)
	fmt.Println(it,err)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>f64, err := strconv.ParseFloat(fmt.Sprint(ai),64)
fmt.Println(f64,err)
fmt.Println(int64(f64),int32(f64))
fmt.Println("-------------") }
</code></pre></div></div>

<p>func main() {</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>parseInt64(104746)
parseInt64(1047460) }
</code></pre></div></div>

<p>104746 <nil>
104746 <nil>
104746 104746
-------------
0 strconv.ParseInt: parsing "1.04746e+06": invalid syntax
1.04746e+06 <nil>
1047460 1047460
-------------</nil></nil></nil></p>

<p>å½“æ•´æ•°è¶…è¿‡6ä½çš„æ—¶å€™ï¼Œmarshal ä¼šå˜æˆæµ®ç‚¹æ•°ï¼Œç„¶åparseInt ä¼šå¤±è´¥
strconv.ParseInt: parsing â€œ1.04746e+06â€: invalid syntax</p>

<p>ç‰¹åˆ«æ˜¯ä¸šåŠ¡ä¸­å¤„ç†é€’å¢idçš„æ—¶å€™ï¼Œè¦éå¸¸å°å¿ƒï¼Œæœ€å¥½ç”¨ParseFloat ç„¶åè½¬intï¼Œç¦æ­¢ä½¿ç”¨parseInt</p>

<p>æ³¨æ„åªæœ‰interfaceï½›ï½æ‰ä¼šå‡ºç°é—®é¢˜ï¼Œä¸‹é¢è¿™ä¸ªä»ç„¶æ˜¯æ­£å¸¸çš„
	it, err := strconv.ParseInt(fmt.Sprint(â€œ1047460â€), 10, 64)
	fmt.Println(it,err)</p>

<p>1047460 <nil></nil></p>
:ET