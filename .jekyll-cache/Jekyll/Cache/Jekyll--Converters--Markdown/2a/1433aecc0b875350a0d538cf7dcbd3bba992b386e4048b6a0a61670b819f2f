I"ö<p>https://www.php.net/manual/zh/function.apcu-add.php</p>

<p>&lt;?php
$bar = â€˜BARâ€™;
apcu_add(â€˜fooâ€™, $bar);
var_dump(apcu_fetch(â€˜fooâ€™));
echo â€œ\nâ€;
$bar = â€˜NEVER GETS SETâ€™;
apcu_add(â€˜fooâ€™, $bar);
var_dump(apcu_fetch(â€˜fooâ€™));
echo â€œ\nâ€;
?&gt;
ä»¥ä¸Šä¾‹ç¨‹ä¼šè¾“å‡ºï¼š</p>

<p>string(3) â€œBARâ€
string(3) â€œBARâ€</p>

<p>æ³¨æ„ï¼Œç›´æ¥å‘½ä»¤è¡Œè¿è¡Œï¼Œä¼šæ¯æ¬¡æ¸…æ‰apcu ç¼“å­˜çš„éœ€è¦æœåŠ¡å™¨æ–¹å¼è¿è¡Œ
<!-- more -->
Example #1 å¯åŠ¨WebæœåŠ¡å™¨  æœåŠ¡äºå½“å‰ç›®å½•</p>

<p>$ php -S localhost:8000</p>

<p>Example #2 å¯åŠ¨æ—¶æŒ‡å®šæ ¹ç›®å½•
$ php -S localhost:8000 -t foo/</p>

<p>Example #3 ä½¿ç”¨è·¯ç”±ï¼ˆRouterï¼‰è„šæœ¬
$ php -S localhost:8000 router.php</p>

<p>php apcu æ‰©å±•å®‰è£…</p>

<ol>
  <li>http://pecl.php.net/get/apcu-4.0.11.tgz</li>
  <li>tar zxvf apcu-4.0.11.tgz</li>
  <li>cd apcu-4.0.11</li>
  <li>yum install pcre-devel</li>
  <li>phpize</li>
  <li>./configure â€“with-php-config=/usr/bin/php-config</li>
  <li>make &amp;&amp; make install</li>
  <li>é…ç½®php.ini
extension = apcu.so
apc.enabled= on
apc.shm_size= 64M
apc.enable_cli = on</li>
  <li>é‡å¯apacheæœåŠ¡å™¨æˆ–è€…fpm</li>
</ol>

<p>apcu_add -æ•°æ®å­˜å‚¨ä¸­ç¼“å­˜çš„æ–°å˜</p>

<p>apcu_cache_info -æ£€ç´¢ç¼“å­˜çš„ä¿¡æ¯ä»APCuçš„æ•°æ®å­˜å‚¨  è·å–æ•°æ®å­˜å‚¨åˆ—è¡¨(ä¸ä¼šè¿”å›value),åªæœ‰å®šä¹‰å€¼çš„ä¿¡æ¯</p>

<p>apcu_casæ›´æ–°æ—§å€¼å’Œæ–°å€¼</p>

<p>apcu_clear_cache -æ¸…é™¤ç¼“å­˜çš„</p>

<p>apcu_dec -å‡å°‘å­˜å‚¨çš„å€¼(å¿…é¡»æ•°å€¼å‹)</p>

<p>apcu_delete -åˆ é™¤å­˜å‚¨å˜é‡ä»ç¼“å­˜</p>

<p>apcu_entry -è‡ªåŠ¨è¯»å–æˆ–ç”Ÿæˆä¸€ä¸ªç¼“å­˜æ¡ç›®</p>

<p>apcu_exists -æ£€æŸ¥é¡¹ç›®å­˜åœ¨</p>

<p>apcu_fetchä»ç¼“å­˜å–å­˜å‚¨å˜é‡</p>

<p>apcu_incå¢åŠ å­˜å‚¨çš„å€¼(å¿…é¡»æ•°å€¼å‹)</p>

<p>apcu_sma_info -æ£€ç´¢é«˜æ‹›å…±äº«å†…å­˜åˆ†é…ä¿¡æ¯</p>

<p>apcu_store -æ•°æ®å­˜å‚¨åŒºä¸­çš„ç¼“å­˜å˜é‡</p>

<p>https://www.jianshu.com/p/72cfa22d76d9</p>

<p>è¯´æ˜
public void APCUIterator::next ( void )
Moves the iterator pointer to the next element.</p>

<p>å‚æ•°
æ­¤å‡½æ•°æ²¡æœ‰å‚æ•°ã€‚</p>

<p>è¿”å›å€¼
æˆåŠŸæ—¶è¿”å› TRUE ï¼Œ æˆ–è€…åœ¨å¤±è´¥æ—¶è¿”å› FALSE ã€‚</p>

<p>å‚è§
APCUIterator::current() - Get current item
APCUIterator::rewind() - Rewinds iterator
Iterator::next() - å‘å‰ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ </p>

<p>https://www.php.cn/manual/view/415.html
https://php.golaravel.com/class.apcuiterator.html</p>

<p>https://www.php.net/manual/es/apcuiterator.key.php</p>

<p>https://www.php.net/apcuiterator</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    foreach (new \APCUIterator('/^' . ApcuStateStorage::CACHE_PREFIX . '/') as $counter) {
        // APCU entries do not expire within one request context so we have to check manually:
        if ($counter['creation_time'] + $counter['ttl'] &lt; time()) {
            continue;
        }

        $expressionToExtractCommandKey = '/^' . ApcuStateStorage::CACHE_PREFIX . '(.*)_(?:.*)_(?:[0-9]+)$/';
        preg_match($expressionToExtractCommandKey, $counter['key'], $match);
</code></pre></div></div>

:ET