I"·<p>go tool trace 
ä¸åˆé€‚</p>

<p>è¿è¡Œç¼“æ…¢çš„å‡½æ•°ï¼Œæˆ–è€…æ‰¾åˆ°å¤§éƒ¨åˆ†CPUæ—¶é—´èŠ±è´¹åœ¨å“ªé‡Œï¼Œæœ¯ä¸šæœ‰ä¸“æ”»ï¼Œçœ‹CPUæ—¶é—´èŠ±è´¹ï¼Œæ˜¯æœ‰ä¸“é—¨çš„å·¥å…·çš„ go tool pprof</p>

<p>åˆé€‚</p>

<p>æ‰¾å‡ºç¨‹åºåœ¨ä¸€æ®µæ—¶é—´å†…æ­£åœ¨åšä»€ä¹ˆ</p>

<p>go tool trace å¯ä»¥é€šè¿‡ view traceé“¾æ¥æä¾›çš„å…¶ä»–å¯è§†åŒ–åŠŸèƒ½ï¼Œå¯¹äºè¯Šæ–­äº‰ç”¨é—®é¢˜å¸®åŠ©æå¤§</p>

<p>å…³é”®çš„goroutineè¢«é˜»æ­¢è¿è¡Œæ—¶ï¼Œå¯èƒ½ä¼šæœ‰å»¶è¿Ÿé—®é¢˜ï¼Œå¤§æ¦‚çš„åŸå› ç›¸ä¿¡å¤§å®¶åº”è¯¥æœ‰äº›è°±äº†å§</p>

<p>ç³»ç»Ÿè°ƒç”¨æ—¶è¢«é˜»å¡;</p>

<p>è¢«å…±äº«å†…å­˜é˜»å¡ï¼ˆé€šé“/äº’æ–¥ç­‰ï¼‰</p>

<p>è°ƒåº¦ç¨‹åºæ²¡æœ‰æŒ‰ç…§æˆ‘ä»¬æ‰€æœŸæœ›çš„é¢‘ç‡è¿è¡Œåç¨‹</p>

<p>è¢«runtimeç³»ç»Ÿï¼ˆä¾‹å¦‚GCï¼‰é˜»å¡ 
<!-- more -->
https://www.bilibili.com/read/cv11534849/</p>

<p>Go 1.9 is introducing profiler labels, a way to add arbitrary key-values to the samples collected by the CPU profiler. CPU profilers collect and output hot spots where the CPU spent most time in when executing. A typical CPU profiler output is primarily reports the location of these spots as function name, source file/line, etc. By looking at the data, you can also examine which parts of the code invoked these spots. You can also filter by invokers to have more granular understanding of certain execution paths.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>labels := pprof.Labels("worker", "purge")
pprof.Do(ctx, labels, func(ctx context.Context) {
    // Do some work...

    go update(ctx) // propagates labels in ctx.
})
</code></pre></div></div>
<p>https://rakyll.org/profiler-labels/</p>

<p>https://www.jetbrains.com/help/go/using-profiler-labels.html#viewing-labels-in-goland</p>

:ET