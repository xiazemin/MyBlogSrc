I"Ö<p>https://github.com/fullstorydev/grpcurl
https://github.com/fullstorydev/grpcui</p>

<p>gRPCurl æ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·ï¼Œå¯æä¾›ä¸ gRPC æœåŠ¡çš„äº¤äº’ã€‚
gRPCui åŸºäº gRPCurlï¼Œå¹¶ä¸º gRPC æ·»åŠ äº†äº¤äº’å¼ Web UIï¼Œç±»ä¼¼äº Postman å’Œ Swagger UI ç­‰å·¥å…·ã€‚</p>

<p>Protobufæœ¬èº«å…·æœ‰åå°„åŠŸèƒ½ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶è·å–å¯¹è±¡çš„Protoæ–‡ä»¶ã€‚gRPCåŒæ ·ä¹Ÿæä¾›äº†ä¸€ä¸ªåä¸ºreflectionçš„åå°„åŒ…ï¼Œç”¨äºä¸ºgRPCæœåŠ¡æä¾›æŸ¥è¯¢ã€‚gRPCå®˜æ–¹æä¾›äº†ä¸€ä¸ªC++å®ç°çš„grpc_cliå·¥å…·ï¼Œå¯ä»¥ç”¨äºæŸ¥è¯¢gRPCåˆ—è¡¨æˆ–è°ƒç”¨gRPCæ–¹æ³•ã€‚ä½†æ˜¯C++ç‰ˆæœ¬çš„grpc_cliå®‰è£…æ¯”è¾ƒå¤æ‚ï¼Œæˆ‘ä»¬æ¨èç”¨çº¯Goè¯­è¨€å®ç°çš„grpcurlå·¥å…·
<!-- more -->
å¯åŠ¨åå°„æœåŠ¡
reflectionåŒ…ä¸­åªæœ‰ä¸€ä¸ªRegisterå‡½æ•°ï¼Œç”¨äºå°†grpc.Serveræ³¨å†Œåˆ°åå°„æœåŠ¡ä¸­ã€‚reflectionåŒ…æ–‡æ¡£ç»™å‡ºäº†ç®€å•çš„ä½¿ç”¨æ–¹æ³•ï¼š
import (
    â€œgoogle.golang.org/grpc/reflectionâ€
)</p>

<p>func main() {
    s := grpc.NewServer()
    pb.RegisterYourOwnServer(s, &amp;server{})</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Register reflection service on gRPC server.
reflection.Register(s)

s.Serve(lis) } å¦‚æœå¯åŠ¨äº†gprcåå°„æœåŠ¡ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡reflectionåŒ…æä¾›çš„åå°„æœåŠ¡æŸ¥è¯¢gRPCæœåŠ¡æˆ–è°ƒç”¨gRPCæ–¹æ³•ã€‚ æŸ¥çœ‹æœåŠ¡åˆ—è¡¨ grpcurlæ˜¯Goè¯­è¨€å¼€æºç¤¾åŒºå¼€å‘çš„å·¥å…·ï¼Œéœ€è¦æ‰‹å·¥å®‰è£…ï¼š $ go get github.com/fullstorydev/grpcurl $ go install github.com/fullstorydev/grpcurl/cmd/grpcurl grpcurlä¸­æœ€å¸¸ä½¿ç”¨çš„æ˜¯listå‘½ä»¤ï¼Œç”¨äºè·å–æœåŠ¡æˆ–æœåŠ¡æ–¹æ³•çš„åˆ—è¡¨ã€‚æ¯”å¦‚grpcurl localhost:1234 listå‘½ä»¤å°†è·å–æœ¬åœ°1234ç«¯å£ä¸Šçš„grpcæœåŠ¡çš„åˆ—è¡¨ã€‚åœ¨ä½¿ç”¨grpcurlæ—¶ï¼Œéœ€è¦é€šè¿‡-certå’Œ-keyå‚æ•°è®¾ç½®å…¬é’¥å’Œç§é’¥æ–‡ä»¶ï¼Œé“¾æ¥å¯ç”¨äº†tlsåè®®çš„æœåŠ¡ã€‚å¯¹äºæ²¡æœ‰æ²¡ç”¨tlsåè®®çš„grpcæœåŠ¡ï¼Œé€šè¿‡-plaintextå‚æ•°å¿½ç•¥tlsè¯ä¹¦çš„éªŒè¯è¿‡ç¨‹ã€‚å¦‚æœæ˜¯Unix Socketåè®®ï¼Œåˆ™éœ€è¦æŒ‡å®š-unixå‚æ•°ã€‚ å¦‚æœæ²¡æœ‰é…ç½®å¥½å…¬é’¥å’Œç§é’¥æ–‡ä»¶ï¼Œä¹Ÿæ²¡æœ‰å¿½ç•¥è¯ä¹¦çš„éªŒè¯è¿‡ç¨‹ï¼Œé‚£ä¹ˆå°†ä¼šé‡åˆ°ç±»ä¼¼ä»¥ä¸‹çš„é”™è¯¯ï¼š $ grpcurl localhost:1234 list &gt;&gt; Failed to dial target host "localhost:1234": tls: first record does not look like a TLS handshake å¦‚æœgrpcæœåŠ¡æ­£å¸¸ï¼Œä½†æ˜¯æœåŠ¡æ²¡æœ‰å¯åŠ¨reflectionåå°„æœåŠ¡ï¼Œå°†ä¼šé‡åˆ°ä»¥ä¸‹é”™è¯¯ï¼š $ grpcurl -plaintext localhost:1234 list &gt;&gt; Failed to list services: server does not support the reflection API å‡è®¾grpcæœåŠ¡å·²ç»å¯åŠ¨äº†reflectionåå°„æœåŠ¡ï¼ŒæœåŠ¡çš„Protobufæ–‡ä»¶å¦‚ä¸‹ï¼š syntax = "proto3";
</code></pre></div></div>

<p>package HelloService;</p>

<p>message String {
    string value = 1;
}</p>

<p>service HelloService {
    rpc Hello (String) returns (String);
    rpc Channel (stream String) returns (stream String);
}
grpcurlç”¨listå‘½ä»¤æŸ¥çœ‹æœåŠ¡åˆ—è¡¨æ—¶å°†çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºï¼š
$ grpcurl -plaintext localhost:1234 list</p>
<blockquote>
  <blockquote>
    <p>HelloService.HelloService
grpc.reflection.v1alpha.ServerReflection
å…¶ä¸­HelloService.HelloServiceæ˜¯åœ¨protobufæ–‡ä»¶å®šä¹‰çš„æœåŠ¡ã€‚è€ŒServerReflectionæœåŠ¡åˆ™æ˜¯reflectionåŒ…æ³¨å†Œçš„åå°„æœåŠ¡ã€‚é€šè¿‡ServerReflectionæœåŠ¡å¯ä»¥æŸ¥è¯¢åŒ…æ‹¬æœ¬èº«åœ¨å†…çš„å…¨éƒ¨gRPCæœåŠ¡ä¿¡æ¯ã€‚
æœåŠ¡çš„æ–¹æ³•åˆ—è¡¨
ç»§ç»­ä½¿ç”¨listå­å‘½ä»¤è¿˜å¯ä»¥æŸ¥çœ‹HelloServiceæœåŠ¡çš„æ–¹æ³•åˆ—è¡¨ï¼š
$ grpcurl -plaintext localhost:1234 list HelloService.HelloService
Channel
Hello
ä»è¾“å‡ºå¯ä»¥çœ‹åˆ°HelloServiceæœåŠ¡æä¾›äº†Channelå’ŒHelloä¸¤ä¸ªæ–¹æ³•ï¼Œå’ŒProtobufæ–‡ä»¶çš„å®šä¹‰æ˜¯ä¸€è‡´çš„ã€‚
å¦‚æœè¿˜æƒ³äº†è§£æ–¹æ³•çš„ç»†èŠ‚ï¼Œå¯ä»¥ä½¿ç”¨grpcurlæä¾›çš„describeå­å‘½ä»¤æŸ¥çœ‹æ›´è¯¦ç»†çš„æè¿°ä¿¡æ¯ï¼š
$ grpcurl -plaintext localhost:1234 describe HelloService.HelloService
HelloService.HelloService is a service:
{
  â€œnameâ€: â€œHelloServiceâ€,
  â€œmethodâ€: [
    {
      â€œnameâ€: â€œHelloâ€,
      â€œinputTypeâ€: â€œ.HelloService.Stringâ€,
      â€œoutputTypeâ€: â€œ.HelloService.Stringâ€,
      â€œoptionsâ€: {</p>
  </blockquote>
</blockquote>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  }
},
{
  "name": "Channel",
  "inputType": ".HelloService.String",
  "outputType": ".HelloService.String",
  "options": {

  },
  "clientStreaming": true,
  "serverStreaming": true
}   ],   "options": {
</code></pre></div></div>

<p>}
}
è·å–ç±»å‹ä¿¡æ¯
åœ¨è·å–åˆ°æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ç±»å‹ä¹‹åï¼Œè¿˜å¯ä»¥ç»§ç»­æŸ¥çœ‹ç±»å‹çš„ä¿¡æ¯ã€‚ä¸‹é¢æ˜¯ç”¨describeå‘½ä»¤æŸ¥çœ‹å‚æ•°HelloService.Stringç±»å‹çš„ä¿¡æ¯ï¼š
$ grpcurl -plaintext localhost:1234 describe HelloService.String
HelloService.String is a message:
{
  â€œnameâ€: â€œStringâ€,
  â€œfieldâ€: [
    {
      â€œnameâ€: â€œvalueâ€,
      â€œnumberâ€: 1,
      â€œlabelâ€: â€œLABEL_OPTIONALâ€,
      â€œtypeâ€: â€œTYPE_STRINGâ€,
      â€œoptionsâ€: {</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  },
  "jsonName": "value"
}   ],   "options": {
</code></pre></div></div>

<p>}
}
jsonä¿¡æ¯å¯¹åº”HelloService.Stringç±»å‹åœ¨Protobufä¸­çš„å®šä¹‰å¦‚ä¸‹ï¼š
message String {
    string value = 1;
}
è¾“å‡ºçš„jsonæ•°æ®åªä¸è¿‡æ˜¯Protobufæ–‡ä»¶çš„å¦ä¸€ç§è¡¨ç¤ºå½¢å¼ã€‚
è°ƒç”¨æ–¹æ³•
åœ¨è·å–gRPCæœåŠ¡çš„è¯¦ç»†ä¿¡æ¯ä¹‹åå°±å¯ä»¥jsonè°ƒç”¨gRPCæ–¹æ³•äº†ã€‚
ä¸‹é¢å‘½ä»¤é€šè¿‡-då‚æ•°ä¼ å…¥ä¸€ä¸ªjsonå­—ç¬¦ä¸²ä½œä¸ºè¾“å…¥å‚æ•°ï¼Œè°ƒç”¨çš„æ˜¯HelloServiceæœåŠ¡çš„Helloæ–¹æ³•ï¼š
$ grpcurl -plaintext -d â€˜{â€œvalueâ€: â€œgopherâ€}â€™ <br />
    localhost:1234 HelloService.HelloService/Hello
{
  â€œvalueâ€: â€œhello:gopherâ€
}
å¦‚æœ-då‚æ•°æ˜¯@åˆ™è¡¨ç¤ºä»æ ‡å‡†è¾“å…¥è¯»å–jsonè¾“å…¥å‚æ•°ï¼Œè¿™ä¸€èˆ¬ç”¨äºæ¯”è¾ƒè¾“å…¥å¤æ‚çš„jsonæ•°æ®ï¼Œä¹Ÿå¯ä»¥ç”¨äºæµ‹è¯•æµæ–¹æ³•ã€‚
ä¸‹é¢å‘½ä»¤æ˜¯é“¾æ¥Channelæµæ–¹æ³•ï¼Œé€šè¿‡ä»æ ‡å‡†è¾“å…¥è¯»å–è¾“å…¥æµå‚æ•°ï¼š
$ grpcurl -plaintext -d @ localhost:1234 HelloService.HelloService/Channel
{â€œvalueâ€: â€œgopherâ€}
{
  â€œvalueâ€: â€œhello:gopherâ€
}</p>

<p>{â€œvalueâ€: â€œwasmâ€}
{
  â€œvalueâ€: â€œhello:wasmâ€
}
é€šè¿‡grpcurlå·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æ²¡æœ‰å®¢æˆ·ç«¯ä»£ç çš„ç¯å¢ƒä¸‹æµ‹è¯•gRPCæœåŠ¡ã€‚</p>

:ET