I")<p>Node.js åˆ›å»ºç¬¬ä¸€ä¸ªåº”ç”¨
å¦‚æœæˆ‘ä»¬ä½¿ç”¨ PHP æ¥ç¼–å†™åç«¯çš„ä»£ç æ—¶ï¼Œéœ€è¦ Apache æˆ–è€… Nginx çš„ HTTP æœåŠ¡å™¨ï¼Œå¹¶é…ä¸Š mod_php5 æ¨¡å—å’Œ php-cgiã€‚</p>

<p>ä»è¿™ä¸ªè§’åº¦çœ‹ï¼Œæ•´ä¸ªâ€æ¥æ”¶ HTTP è¯·æ±‚å¹¶æä¾› Web é¡µé¢â€çš„éœ€æ±‚å°±ä¸éœ€è¦ PHP æ¥å¤„ç†ã€‚</p>

<p>ä¸è¿‡å¯¹ Node.js æ¥è¯´ï¼Œæ¦‚å¿µå®Œå…¨ä¸ä¸€æ ·äº†ã€‚ä½¿ç”¨ Node.js æ—¶ï¼Œæˆ‘ä»¬ä¸ä»…ä»… åœ¨å®ç°ä¸€ä¸ªåº”ç”¨ï¼ŒåŒæ—¶è¿˜å®ç°äº†æ•´ä¸ª HTTP æœåŠ¡å™¨ã€‚äº‹å®ä¸Šï¼Œæˆ‘ä»¬çš„ Web åº”ç”¨ä»¥åŠå¯¹åº”çš„ Web æœåŠ¡å™¨åŸºæœ¬ä¸Šæ˜¯ä¸€æ ·çš„ã€‚</p>

<p>åœ¨æˆ‘ä»¬åˆ›å»º Node.js ç¬¬ä¸€ä¸ª â€œHello, World!â€ åº”ç”¨å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸‹ Node.js åº”ç”¨æ˜¯ç”±å“ªå‡ éƒ¨åˆ†ç»„æˆçš„ï¼š</p>

<p>å¼•å…¥ required æ¨¡å—ï¼šæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ require æŒ‡ä»¤æ¥è½½å…¥ Node.js æ¨¡å—ã€‚</p>

<p>åˆ›å»ºæœåŠ¡å™¨ï¼šæœåŠ¡å™¨å¯ä»¥ç›‘å¬å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œç±»ä¼¼äº Apache ã€Nginx ç­‰ HTTP æœåŠ¡å™¨ã€‚</p>

<p>æ¥æ”¶è¯·æ±‚ä¸å“åº”è¯·æ±‚ æœåŠ¡å™¨å¾ˆå®¹æ˜“åˆ›å»ºï¼Œå®¢æˆ·ç«¯å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆ–ç»ˆç«¯å‘é€ HTTP è¯·æ±‚ï¼ŒæœåŠ¡å™¨æ¥æ”¶è¯·æ±‚åè¿”å›å“åº”æ•°æ®ã€‚</p>

<p>åˆ›å»º Node.js åº”ç”¨
æ­¥éª¤ä¸€ã€å¼•å…¥ required æ¨¡å—
æˆ‘ä»¬ä½¿ç”¨ require æŒ‡ä»¤æ¥è½½å…¥ http æ¨¡å—ï¼Œå¹¶å°†å®ä¾‹åŒ–çš„ HTTP èµ‹å€¼ç»™å˜é‡ httpï¼Œå®ä¾‹å¦‚ä¸‹:</p>

<p>var http = require(â€œhttpâ€);
æ­¥éª¤äºŒã€åˆ›å»ºæœåŠ¡å™¨
æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨ http.createServer() æ–¹æ³•åˆ›å»ºæœåŠ¡å™¨ï¼Œå¹¶ä½¿ç”¨ listen æ–¹æ³•ç»‘å®š 8888 ç«¯å£ã€‚ å‡½æ•°é€šè¿‡ request, response å‚æ•°æ¥æ¥æ”¶å’Œå“åº”æ•°æ®ã€‚</p>

<p>å®ä¾‹å¦‚ä¸‹ï¼Œåœ¨ä½ é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªå« server.js çš„æ–‡ä»¶ï¼Œå¹¶å†™å…¥ä»¥ä¸‹ä»£ç ï¼š</p>

<p>var http = require(â€˜httpâ€™);</p>

<p>http.createServer(function (request, response) {</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// å‘é€ HTTP å¤´éƒ¨ 
// HTTP çŠ¶æ€å€¼: 200 : OK
// å†…å®¹ç±»å‹: text/plain
response.writeHead(200, {'Content-Type': 'text/plain'});

// å‘é€å“åº”æ•°æ® "Hello World"
response.end('Hello World\n'); }).listen(8888);
</code></pre></div></div>

<p>// ç»ˆç«¯æ‰“å°å¦‚ä¸‹ä¿¡æ¯
console.log(â€˜Server running at http://127.0.0.1:8888/â€™);
ä»¥ä¸Šä»£ç æˆ‘ä»¬å®Œæˆäº†ä¸€ä¸ªå¯ä»¥å·¥ä½œçš„ HTTP æœåŠ¡å™¨ã€‚</p>

<p>ä½¿ç”¨ node å‘½ä»¤æ‰§è¡Œä»¥ä¸Šçš„ä»£ç ï¼š</p>

<p>node server.js
Server running at http://127.0.0.1:8888/
<!-- more -->
NPM ä½¿ç”¨ä»‹ç»
NPMæ˜¯éšåŒNodeJSä¸€èµ·å®‰è£…çš„åŒ…ç®¡ç†å·¥å…·ï¼Œèƒ½è§£å†³NodeJSä»£ç éƒ¨ç½²ä¸Šçš„å¾ˆå¤šé—®é¢˜ï¼Œå¸¸è§çš„ä½¿ç”¨åœºæ™¯æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>

<p>å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½åˆ«äººç¼–å†™çš„ç¬¬ä¸‰æ–¹åŒ…åˆ°æœ¬åœ°ä½¿ç”¨ã€‚
å…è®¸ç”¨æˆ·ä»NPMæœåŠ¡å™¨ä¸‹è½½å¹¶å®‰è£…åˆ«äººç¼–å†™çš„å‘½ä»¤è¡Œç¨‹åºåˆ°æœ¬åœ°ä½¿ç”¨ã€‚
å…è®¸ç”¨æˆ·å°†è‡ªå·±ç¼–å†™çš„åŒ…æˆ–å‘½ä»¤è¡Œç¨‹åºä¸Šä¼ åˆ°NPMæœåŠ¡å™¨ä¾›åˆ«äººä½¿ç”¨ã€‚
ç”±äºæ–°ç‰ˆçš„nodejså·²ç»é›†æˆäº†npmï¼Œæ‰€ä»¥ä¹‹å‰npmä¹Ÿä¸€å¹¶å®‰è£…å¥½äº†ã€‚åŒæ ·å¯ä»¥é€šè¿‡è¾“å…¥ â€œnpm -vâ€ æ¥æµ‹è¯•æ˜¯å¦æˆåŠŸå®‰è£…ã€‚å‘½ä»¤å¦‚ä¸‹ï¼Œå‡ºç°ç‰ˆæœ¬æç¤ºè¡¨ç¤ºå®‰è£…æˆåŠŸ:</p>

<p>$ npm -v
2.3.0
å¦‚æœä½ å®‰è£…çš„æ˜¯æ—§ç‰ˆæœ¬çš„ npmï¼Œå¯ä»¥å¾ˆå®¹æ˜“å¾—é€šè¿‡ npm å‘½ä»¤æ¥å‡çº§ï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š</p>

<p>$ sudo npm install npm -g
/usr/local/bin/npm -&gt; /usr/local/lib/node_modules/npm/bin/npm-cli.js
npm@2.14.2 /usr/local/lib/node_modules/npm
å¦‚æœæ˜¯ Window ç³»ç»Ÿä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å³å¯ï¼š</p>

<p>npm install npm -g
ä½¿ç”¨æ·˜å®é•œåƒçš„å‘½ä»¤ï¼š</p>

<p>npm install -g cnpm â€“registry=https://registry.npm.taobao.org
ä½¿ç”¨ npm å‘½ä»¤å®‰è£…æ¨¡å—
npm å®‰è£… Node.js æ¨¡å—è¯­æ³•æ ¼å¼å¦‚ä¸‹ï¼š</p>

<p>$ npm install <Module Name="">
ä»¥ä¸‹å®ä¾‹ï¼Œæˆ‘ä»¬ä½¿ç”¨ npm å‘½ä»¤å®‰è£…å¸¸ç”¨çš„ Node.js webæ¡†æ¶æ¨¡å— express:</Module></p>

<p>$ npm install express
å®‰è£…å¥½ä¹‹åï¼Œexpress åŒ…å°±æ”¾åœ¨äº†å·¥ç¨‹ç›®å½•ä¸‹çš„ node_modules ç›®å½•ä¸­ï¼Œå› æ­¤åœ¨ä»£ç ä¸­åªéœ€è¦é€šè¿‡ require(â€˜expressâ€™) çš„æ–¹å¼å°±å¥½ï¼Œæ— éœ€æŒ‡å®šç¬¬ä¸‰æ–¹åŒ…è·¯å¾„ã€‚</p>

<p>var express = require(â€˜expressâ€™);
å…¨å±€å®‰è£…ä¸æœ¬åœ°å®‰è£…
npm çš„åŒ…å®‰è£…åˆ†ä¸ºæœ¬åœ°å®‰è£…ï¼ˆlocalï¼‰ã€å…¨å±€å®‰è£…ï¼ˆglobalï¼‰ä¸¤ç§ï¼Œä»æ•²çš„å‘½ä»¤è¡Œæ¥çœ‹ï¼Œå·®åˆ«åªæ˜¯æœ‰æ²¡æœ‰-gè€Œå·²ï¼Œæ¯”å¦‚</p>

<p>npm install express          # æœ¬åœ°å®‰è£…
npm install express -g   # å…¨å±€å®‰è£…
å¦‚æœå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>

<p>npm err! Error: connect ECONNREFUSED 127.0.0.1:8087 
è§£å†³åŠæ³•ä¸ºï¼š</p>

<p>$ npm config set proxy null
æœ¬åœ°å®‰è£…</p>
<ol>
  <li>å°†å®‰è£…åŒ…æ”¾åœ¨ ./node_modules ä¸‹ï¼ˆè¿è¡Œ npm å‘½ä»¤æ—¶æ‰€åœ¨çš„ç›®å½•ï¼‰ï¼Œå¦‚æœæ²¡æœ‰ node_modules ç›®å½•ï¼Œä¼šåœ¨å½“å‰æ‰§è¡Œ npm å‘½ä»¤çš„ç›®å½•ä¸‹ç”Ÿæˆ node_modules ç›®å½•ã€‚</li>
  <li>å¯ä»¥é€šè¿‡ require() æ¥å¼•å…¥æœ¬åœ°å®‰è£…çš„åŒ…ã€‚
å…¨å±€å®‰è£…</li>
  <li>å°†å®‰è£…åŒ…æ”¾åœ¨ /usr/local ä¸‹æˆ–è€…ä½  node çš„å®‰è£…ç›®å½•ã€‚</li>
  <li>å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œä½¿ç”¨ã€‚
å¦‚æœä½ å¸Œæœ›å…·å¤‡ä¸¤è€…åŠŸèƒ½ï¼Œåˆ™éœ€è¦åœ¨ä¸¤ä¸ªåœ°æ–¹å®‰è£…å®ƒæˆ–ä½¿ç”¨ npm linkã€‚</li>
</ol>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬ä½¿ç”¨å…¨å±€æ–¹å¼å®‰è£… express</p>

<p>$ npm install express -g
å®‰è£…è¿‡ç¨‹è¾“å‡ºå¦‚ä¸‹å†…å®¹ï¼Œç¬¬ä¸€è¡Œè¾“å‡ºäº†æ¨¡å—çš„ç‰ˆæœ¬å·åŠå®‰è£…ä½ç½®ã€‚</p>

<p>express@4.13.3 node_modules/express
â”œâ”€â”€ escape-html@1.0.2
â”œâ”€â”€ range-parser@1.0.2
â”œâ”€â”€ merge-descriptors@1.0.0
â”œâ”€â”€ array-flatten@1.1.1
â”œâ”€â”€ cookie@0.1.3
â”œâ”€â”€ utils-merge@1.0.0
â”œâ”€â”€ parseurl@1.3.0
â”œâ”€â”€ cookie-signature@1.0.6
â”œâ”€â”€ methods@1.1.1
â”œâ”€â”€ fresh@0.3.0
â”œâ”€â”€ vary@1.0.1
â”œâ”€â”€ path-to-regexp@0.1.7
â”œâ”€â”€ content-type@1.0.1
â”œâ”€â”€ etag@1.7.0
â”œâ”€â”€ serve-static@1.10.0
â”œâ”€â”€ content-disposition@0.5.0
â”œâ”€â”€ depd@1.0.1
â”œâ”€â”€ qs@4.0.0
â”œâ”€â”€ finalhandler@0.4.0 (unpipe@1.0.0)
â”œâ”€â”€ on-finished@2.3.0 (ee-first@1.1.1)
â”œâ”€â”€ proxy-addr@1.0.8 (forwarded@0.1.0, ipaddr.js@1.0.1)
â”œâ”€â”€ debug@2.2.0 (ms@0.7.1)
â”œâ”€â”€ type-is@1.6.8 (media-typer@0.3.0, mime-types@2.1.6)
â”œâ”€â”€ accepts@1.2.12 (negotiator@0.5.3, mime-types@2.1.6)
â””â”€â”€ send@0.13.0 (destroy@1.0.3, statuses@1.2.1, ms@0.7.1, mime@1.3.4, http-errors@1.3.1)
æŸ¥çœ‹å®‰è£…ä¿¡æ¯
ä½ å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥çœ‹æ‰€æœ‰å…¨å±€å®‰è£…çš„æ¨¡å—ï¼š</p>

<p>$ npm list -g</p>

<p>â”œâ”€â”¬ cnpm@4.3.2
â”‚ â”œâ”€â”€ auto-correct@1.0.0
â”‚ â”œâ”€â”€ bagpipe@0.3.5
â”‚ â”œâ”€â”€ colors@1.1.2
â”‚ â”œâ”€â”¬ commander@2.9.0
â”‚ â”‚ â””â”€â”€ graceful-readlink@1.0.1
â”‚ â”œâ”€â”¬ cross-spawn@0.2.9
â”‚ â”‚ â””â”€â”€ lru-cache@2.7.3
â€¦â€¦
å¦‚æœè¦æŸ¥çœ‹æŸä¸ªæ¨¡å—çš„ç‰ˆæœ¬å·ï¼Œå¯ä»¥ä½¿ç”¨å‘½ä»¤å¦‚ä¸‹ï¼š</p>

<p>$ npm list grunt</p>

<p>projectName@projectVersion /path/to/project/folder
â””â”€â”€ grunt@0.4.1
ä½¿ç”¨ package.json
package.json ä½äºæ¨¡å—çš„ç›®å½•ä¸‹ï¼Œç”¨äºå®šä¹‰åŒ…çš„å±æ€§ã€‚æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥çœ‹ä¸‹ express åŒ…çš„ package.json æ–‡ä»¶ï¼Œä½äº node_modules/express/package.json å†…å®¹ï¼š</p>

<p>{
  â€œnameâ€: â€œexpressâ€,
  â€œdescriptionâ€: â€œFast, unopinionated, minimalist web frameworkâ€,
  â€œversionâ€: â€œ4.13.3â€,
  â€œauthorâ€: {
    â€œnameâ€: â€œTJ Holowaychukâ€,
    â€œemailâ€: â€œtj@vision-media.caâ€
  },
  â€œcontributorsâ€: [
    {
      â€œnameâ€: â€œAaron Heckmannâ€,
      â€œemailâ€: â€œaaron.heckmann+github@gmail.comâ€
    },
    {
      â€œnameâ€: â€œCiaran Jessupâ€,
      â€œemailâ€: â€œciaranj@gmail.comâ€
    },
    {
      â€œnameâ€: â€œDouglas Christopher Wilsonâ€,
      â€œemailâ€: â€œdoug@somethingdoug.comâ€
    },
    {
      â€œnameâ€: â€œGuillermo Rauchâ€,
      â€œemailâ€: â€œrauchg@gmail.comâ€
    },
    {
      â€œnameâ€: â€œJonathan Ongâ€,
      â€œemailâ€: â€œme@jongleberry.comâ€
    },
    {
      â€œnameâ€: â€œRoman Shtylmanâ€,
      â€œemailâ€: â€œshtylman+expressjs@gmail.comâ€
    },
    {
      â€œnameâ€: â€œYoung Jae Simâ€,
      â€œemailâ€: â€œhanul@hanul.meâ€
    }
  ],
  â€œlicenseâ€: â€œMITâ€,
  â€œrepositoryâ€: {
    â€œtypeâ€: â€œgitâ€,
    â€œurlâ€: â€œgit+https://github.com/strongloop/express.gitâ€
  },
  â€œhomepageâ€: â€œhttp://expressjs.com/â€,
  â€œkeywordsâ€: [
    â€œexpressâ€,
    â€œframeworkâ€,
    â€œsinatraâ€,
    â€œwebâ€,
    â€œrestâ€,
    â€œrestfulâ€,
    â€œrouterâ€,
    â€œappâ€,
    â€œapiâ€
  ],
  â€œdependenciesâ€: {
    â€œacceptsâ€: â€œ~1.2.12â€,
    â€œarray-flattenâ€: â€œ1.1.1â€,
    â€œcontent-dispositionâ€: â€œ0.5.0â€,
    â€œcontent-typeâ€: â€œ~1.0.1â€,
    â€œcookieâ€: â€œ0.1.3â€,
    â€œcookie-signatureâ€: â€œ1.0.6â€,
    â€œdebugâ€: â€œ~2.2.0â€,
    â€œdepdâ€: â€œ~1.0.1â€,
    â€œescape-htmlâ€: â€œ1.0.2â€,
    â€œetagâ€: â€œ~1.7.0â€,
    â€œfinalhandlerâ€: â€œ0.4.0â€,
    â€œfreshâ€: â€œ0.3.0â€,
    â€œmerge-descriptorsâ€: â€œ1.0.0â€,
    â€œmethodsâ€: â€œ~1.1.1â€,
    â€œon-finishedâ€: â€œ~2.3.0â€,
    â€œparseurlâ€: â€œ~1.3.0â€,
    â€œpath-to-regexpâ€: â€œ0.1.7â€,
    â€œproxy-addrâ€: â€œ~1.0.8â€,
    â€œqsâ€: â€œ4.0.0â€,
    â€œrange-parserâ€: â€œ~1.0.2â€,
    â€œsendâ€: â€œ0.13.0â€,
    â€œserve-staticâ€: â€œ~1.10.0â€,
    â€œtype-isâ€: â€œ~1.6.6â€,
    â€œutils-mergeâ€: â€œ1.0.0â€,
    â€œvaryâ€: â€œ~1.0.1â€
  },
  â€œdevDependenciesâ€: {
    â€œafterâ€: â€œ0.8.1â€,
    â€œejsâ€: â€œ2.3.3â€,
    â€œistanbulâ€: â€œ0.3.17â€,
    â€œmarkedâ€: â€œ0.3.5â€,
    â€œmochaâ€: â€œ2.2.5â€,
    â€œshouldâ€: â€œ7.0.2â€,
    â€œsupertestâ€: â€œ1.0.1â€,
    â€œbody-parserâ€: â€œ~1.13.3â€,
    â€œconnect-redisâ€: â€œ~2.4.1â€,
    â€œcookie-parserâ€: â€œ~1.3.5â€,
    â€œcookie-sessionâ€: â€œ~1.2.0â€,
    â€œexpress-sessionâ€: â€œ~1.11.3â€,
    â€œjadeâ€: â€œ~1.11.0â€,
    â€œmethod-overrideâ€: â€œ~2.3.5â€,
    â€œmorganâ€: â€œ~1.6.1â€,
    â€œmultipartyâ€: â€œ~4.1.2â€,
    â€œvhostâ€: â€œ~3.0.1â€
  },
  â€œenginesâ€: {
    â€œnodeâ€: â€œ&gt;= 0.10.0â€
  },
  â€œfilesâ€: [
    â€œLICENSEâ€,
    â€œHistory.mdâ€,
    â€œReadme.mdâ€,
    â€œindex.jsâ€,
    â€œlib/â€
  ],
  â€œscriptsâ€: {
    â€œtestâ€: â€œmocha â€“require test/support/env â€“reporter spec â€“bail â€“check-leaks test/ test/acceptance/â€,
    â€œtest-ciâ€: â€œistanbul cover node_modules/mocha/bin/_mocha â€“report lcovonly â€“ â€“require test/support/env â€“reporter spec â€“check-leaks test/ test/acceptance/â€,
    â€œtest-covâ€: â€œistanbul cover node_modules/mocha/bin/_mocha â€“ â€“require test/support/env â€“reporter dot â€“check-leaks test/ test/acceptance/â€,
    â€œtest-tapâ€: â€œmocha â€“require test/support/env â€“reporter tap â€“check-leaks test/ test/acceptance/â€
  },
  â€œgitHeadâ€: â€œef7ad681b245fba023843ce94f6bcb8e275bbb8eâ€,
  â€œbugsâ€: {
    â€œurlâ€: â€œhttps://github.com/strongloop/express/issuesâ€
  },
  â€œ_idâ€: â€œexpress@4.13.3â€,
  â€œ_shasumâ€: â€œddb2f1fb4502bf33598d2b032b037960ca6c80a3â€,
  â€œ_fromâ€: â€œexpress@*â€,
  â€œ_npmVersionâ€: â€œ1.4.28â€,
  â€œ_npmUserâ€: {
    â€œnameâ€: â€œdougwilsonâ€,
    â€œemailâ€: â€œdoug@somethingdoug.comâ€
  },
  â€œmaintainersâ€: [
    {
      â€œnameâ€: â€œtjholowaychukâ€,
      â€œemailâ€: â€œtj@vision-media.caâ€
    },
    {
      â€œnameâ€: â€œjongleberryâ€,
      â€œemailâ€: â€œjonathanrichardong@gmail.comâ€
    },
    {
      â€œnameâ€: â€œdougwilsonâ€,
      â€œemailâ€: â€œdoug@somethingdoug.comâ€
    },
    {
      â€œnameâ€: â€œrfengâ€,
      â€œemailâ€: â€œenjoyjava@gmail.comâ€
    },
    {
      â€œnameâ€: â€œaredridelâ€,
      â€œemailâ€: â€œaredridel@dinhe.netâ€
    },
    {
      â€œnameâ€: â€œstrongloopâ€,
      â€œemailâ€: â€œcallback@strongloop.comâ€
    },
    {
      â€œnameâ€: â€œdefunctzombieâ€,
      â€œemailâ€: â€œshtylman@gmail.comâ€
    }
  ],
  â€œdistâ€: {
    â€œshasumâ€: â€œddb2f1fb4502bf33598d2b032b037960ca6c80a3â€,
    â€œtarballâ€: â€œhttp://registry.npmjs.org/express/-/express-4.13.3.tgzâ€
  },
  â€œdirectoriesâ€: {},
  â€œ_resolvedâ€: â€œhttps://registry.npmjs.org/express/-/express-4.13.3.tgzâ€,
  â€œreadmeâ€: â€œERROR: No README data found!â€
}
Package.json å±æ€§è¯´æ˜
name - åŒ…åã€‚</p>

<p>version - åŒ…çš„ç‰ˆæœ¬å·ã€‚</p>

<p>description - åŒ…çš„æè¿°ã€‚</p>

<p>homepage - åŒ…çš„å®˜ç½‘ url ã€‚</p>

<p>author - åŒ…çš„ä½œè€…å§“åã€‚</p>

<p>contributors - åŒ…çš„å…¶ä»–è´¡çŒ®è€…å§“åã€‚</p>

<p>dependencies - ä¾èµ–åŒ…åˆ—è¡¨ã€‚å¦‚æœä¾èµ–åŒ…æ²¡æœ‰å®‰è£…ï¼Œnpm ä¼šè‡ªåŠ¨å°†ä¾èµ–åŒ…å®‰è£…åœ¨ node_module ç›®å½•ä¸‹ã€‚</p>

<p>repository - åŒ…ä»£ç å­˜æ”¾çš„åœ°æ–¹çš„ç±»å‹ï¼Œå¯ä»¥æ˜¯ git æˆ– svnï¼Œgit å¯åœ¨ Github ä¸Šã€‚</p>

<p>main - main å­—æ®µæŒ‡å®šäº†ç¨‹åºçš„ä¸»å…¥å£æ–‡ä»¶ï¼Œrequire(â€˜moduleNameâ€™) å°±ä¼šåŠ è½½è¿™ä¸ªæ–‡ä»¶ã€‚è¿™ä¸ªå­—æ®µçš„é»˜è®¤å€¼æ˜¯æ¨¡å—æ ¹ç›®å½•ä¸‹é¢çš„ index.jsã€‚</p>

<p>keywords - å…³é”®å­—</p>

<p>å¸è½½æ¨¡å—
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å¸è½½ Node.js æ¨¡å—ã€‚</p>

<p>$ npm uninstall express
å¸è½½åï¼Œä½ å¯ä»¥åˆ° /node_modules/ ç›®å½•ä¸‹æŸ¥çœ‹åŒ…æ˜¯å¦è¿˜å­˜åœ¨ï¼Œæˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š</p>

<p>$ npm ls
æ›´æ–°æ¨¡å—
æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ›´æ–°æ¨¡å—ï¼š</p>

<p>$ npm update express
æœç´¢æ¨¡å—
ä½¿ç”¨ä»¥ä¸‹æ¥æœç´¢æ¨¡å—ï¼š</p>

<p>$ npm search express
åˆ›å»ºæ¨¡å—
åˆ›å»ºæ¨¡å—ï¼Œpackage.json æ–‡ä»¶æ˜¯å¿…ä¸å¯å°‘çš„ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ NPM ç”Ÿæˆ package.json æ–‡ä»¶ï¼Œç”Ÿæˆçš„æ–‡ä»¶åŒ…å«äº†åŸºæœ¬çš„ç»“æœã€‚</p>

<p>$ npm init
This utility will walk you through creating a package.json file.
It only covers the most common items, and tries to guess sensible defaults.</p>

<p>See <code class="language-plaintext highlighter-rouge">npm help json</code> for definitive documentation on these fields
and exactly what they do.</p>

<p>Use <code class="language-plaintext highlighter-rouge">npm install &lt;pkg&gt; --save</code> afterwards to install a package and
save it as a dependency in the package.json file.</p>

<p>Press ^C at any time to quit.
name: (node_modules) runoob                   # æ¨¡å—å
version: (1.0.0) 
description: Node.js æµ‹è¯•æ¨¡å—(www.runoob.com)  # æè¿°
entry point: (index.js) 
test command: make test
git repository: https://github.com/runoob/runoob.git  # Github åœ°å€
keywords: 
author: 
license: (ISC) 
About to write to â€¦â€¦/node_modules/package.json:      # ç”Ÿæˆåœ°å€</p>

<p>{
  â€œnameâ€: â€œrunoobâ€,
  â€œversionâ€: â€œ1.0.0â€,
  â€œdescriptionâ€: â€œNode.js æµ‹è¯•æ¨¡å—(www.runoob.com)â€,
  â€¦â€¦
}</p>

<p>Is this ok? (yes) yes
ä»¥ä¸Šçš„ä¿¡æ¯ï¼Œä½ éœ€è¦æ ¹æ®ä½ è‡ªå·±çš„æƒ…å†µè¾“å…¥ã€‚åœ¨æœ€åè¾“å…¥ â€œyesâ€ åä¼šç”Ÿæˆ package.json æ–‡ä»¶ã€‚</p>

<p>æ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤åœ¨ npm èµ„æºåº“ä¸­æ³¨å†Œç”¨æˆ·ï¼ˆä½¿ç”¨é‚®ç®±æ³¨å†Œï¼‰ï¼š</p>

<p>$ npm adduser
Username: mcmohd
Password:
Email: (this IS public) mcmohd@gmail.com
æ¥ä¸‹æ¥æˆ‘ä»¬å°±ç”¨ä»¥ä¸‹å‘½ä»¤æ¥å‘å¸ƒæ¨¡å—ï¼š</p>

<p>$ npm publish
å¦‚æœä½ ä»¥ä¸Šçš„æ­¥éª¤éƒ½æ“ä½œæ­£ç¡®ï¼Œä½ å°±å¯ä»¥è·Ÿå…¶ä»–æ¨¡å—ä¸€æ ·ä½¿ç”¨ npm æ¥å®‰è£…ã€‚</p>

<p>ç‰ˆæœ¬å·
ä½¿ç”¨NPMä¸‹è½½å’Œå‘å¸ƒä»£ç æ—¶éƒ½ä¼šæ¥è§¦åˆ°ç‰ˆæœ¬å·ã€‚NPMä½¿ç”¨è¯­ä¹‰ç‰ˆæœ¬å·æ¥ç®¡ç†ä»£ç ï¼Œè¿™é‡Œç®€å•ä»‹ç»ä¸€ä¸‹ã€‚</p>

<p>è¯­ä¹‰ç‰ˆæœ¬å·åˆ†ä¸ºX.Y.Zä¸‰ä½ï¼Œåˆ†åˆ«ä»£è¡¨ä¸»ç‰ˆæœ¬å·ã€æ¬¡ç‰ˆæœ¬å·å’Œè¡¥ä¸ç‰ˆæœ¬å·ã€‚å½“ä»£ç å˜æ›´æ—¶ï¼Œç‰ˆæœ¬å·æŒ‰ä»¥ä¸‹åŸåˆ™æ›´æ–°ã€‚</p>

<p>å¦‚æœåªæ˜¯ä¿®å¤bugï¼Œéœ€è¦æ›´æ–°Zä½ã€‚
å¦‚æœæ˜¯æ–°å¢äº†åŠŸèƒ½ï¼Œä½†æ˜¯å‘ä¸‹å…¼å®¹ï¼Œéœ€è¦æ›´æ–°Yä½ã€‚
å¦‚æœæœ‰å¤§å˜åŠ¨ï¼Œå‘ä¸‹ä¸å…¼å®¹ï¼Œéœ€è¦æ›´æ–°Xä½ã€‚
ç‰ˆæœ¬å·æœ‰äº†è¿™ä¸ªä¿è¯åï¼Œåœ¨ç”³æ˜ç¬¬ä¸‰æ–¹åŒ…ä¾èµ–æ—¶ï¼Œé™¤äº†å¯ä¾èµ–äºä¸€ä¸ªå›ºå®šç‰ˆæœ¬å·å¤–ï¼Œè¿˜å¯ä¾èµ–äºæŸä¸ªèŒƒå›´çš„ç‰ˆæœ¬å·ã€‚ä¾‹å¦‚â€argvâ€: â€œ0.0.xâ€è¡¨ç¤ºä¾èµ–äº0.0.xç³»åˆ—çš„æœ€æ–°ç‰ˆargvã€‚</p>

<p>NPMæ”¯æŒçš„æ‰€æœ‰ç‰ˆæœ¬å·èŒƒå›´æŒ‡å®šæ–¹å¼å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚</p>

<p>NPM å¸¸ç”¨å‘½ä»¤
é™¤äº†æœ¬ç« ä»‹ç»çš„éƒ¨åˆ†å¤–ï¼ŒNPMè¿˜æä¾›äº†å¾ˆå¤šåŠŸèƒ½ï¼Œpackage.jsoné‡Œä¹Ÿæœ‰å¾ˆå¤šå…¶å®ƒæœ‰ç”¨çš„å­—æ®µã€‚</p>

<p>é™¤äº†å¯ä»¥åœ¨npmjs.org/doc/æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å¤–ï¼Œè¿™é‡Œå†ä»‹ç»ä¸€äº›NPMå¸¸ç”¨å‘½ä»¤ã€‚</p>

<p>NPMæä¾›äº†å¾ˆå¤šå‘½ä»¤ï¼Œä¾‹å¦‚installå’Œpublishï¼Œä½¿ç”¨npm helpå¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ã€‚</p>

<p>NPMæä¾›äº†å¾ˆå¤šå‘½ä»¤ï¼Œä¾‹å¦‚installå’Œpublishï¼Œä½¿ç”¨npm helpå¯æŸ¥çœ‹æ‰€æœ‰å‘½ä»¤ã€‚</p>

<p>ä½¿ç”¨npm help <command />å¯æŸ¥çœ‹æŸæ¡å‘½ä»¤çš„è¯¦ç»†å¸®åŠ©ï¼Œä¾‹å¦‚npm help installã€‚</p>

<p>åœ¨package.jsonæ‰€åœ¨ç›®å½•ä¸‹ä½¿ç”¨npm install . -gå¯å…ˆåœ¨æœ¬åœ°å®‰è£…å½“å‰å‘½ä»¤è¡Œç¨‹åºï¼Œå¯ç”¨äºå‘å¸ƒå‰çš„æœ¬åœ°æµ‹è¯•ã€‚</p>

<p>ä½¿ç”¨npm update <package>å¯ä»¥æŠŠå½“å‰ç›®å½•ä¸‹node_moduleså­ç›®å½•é‡Œè¾¹çš„å¯¹åº”æ¨¡å—æ›´æ–°è‡³æœ€æ–°ç‰ˆæœ¬ã€‚</package></p>

<p>ä½¿ç”¨npm update <package> -gå¯ä»¥æŠŠå…¨å±€å®‰è£…çš„å¯¹åº”å‘½ä»¤è¡Œç¨‹åºæ›´æ–°è‡³æœ€æ–°ç‰ˆã€‚</package></p>

<p>ä½¿ç”¨npm cache clearå¯ä»¥æ¸…ç©ºNPMæœ¬åœ°ç¼“å­˜ï¼Œç”¨äºå¯¹ä»˜ä½¿ç”¨ç›¸åŒç‰ˆæœ¬å·å‘å¸ƒæ–°ç‰ˆæœ¬ä»£ç çš„äººã€‚</p>

<p>ä½¿ç”¨npm unpublish <package>@<version>å¯ä»¥æ’¤é”€å‘å¸ƒè‡ªå·±å‘å¸ƒè¿‡çš„æŸä¸ªç‰ˆæœ¬ä»£ç ã€‚</version></package></p>

<p>ä½¿ç”¨æ·˜å® NPM é•œåƒ
å¤§å®¶éƒ½çŸ¥é“å›½å†…ç›´æ¥ä½¿ç”¨ npm çš„å®˜æ–¹é•œåƒæ˜¯éå¸¸æ…¢çš„ï¼Œè¿™é‡Œæ¨èä½¿ç”¨æ·˜å® NPM é•œåƒã€‚</p>

<p>æ·˜å® NPM é•œåƒæ˜¯ä¸€ä¸ªå®Œæ•´ npmjs.org é•œåƒï¼Œä½ å¯ä»¥ç”¨æ­¤ä»£æ›¿å®˜æ–¹ç‰ˆæœ¬(åªè¯»)ï¼ŒåŒæ­¥é¢‘ç‡ç›®å‰ä¸º 10åˆ†é’Ÿ ä¸€æ¬¡ä»¥ä¿è¯å°½é‡ä¸å®˜æ–¹æœåŠ¡åŒæ­¥ã€‚</p>

<p>ä½ å¯ä»¥ä½¿ç”¨æ·˜å®å®šåˆ¶çš„ cnpm (gzip å‹ç¼©æ”¯æŒ) å‘½ä»¤è¡Œå·¥å…·ä»£æ›¿é»˜è®¤çš„ npm:</p>

<p>$ npm install -g cnpm â€“registry=https://registry.npm.taobao.org
è¿™æ ·å°±å¯ä»¥ä½¿ç”¨ cnpm å‘½ä»¤æ¥å®‰è£…æ¨¡å—äº†ï¼š</p>

<p>$ cnpm install [name]
æ›´å¤šä¿¡æ¯å¯ä»¥æŸ¥é˜…ï¼šhttp://npm.taobao.org/ã€‚</p>

<p>Node.js REPL(äº¤äº’å¼è§£é‡Šå™¨)
Node.js REPL(Read Eval Print Loop:äº¤äº’å¼è§£é‡Šå™¨) è¡¨ç¤ºä¸€ä¸ªç”µè„‘çš„ç¯å¢ƒï¼Œç±»ä¼¼ Window ç³»ç»Ÿçš„ç»ˆç«¯æˆ– Unix/Linux shellï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç»ˆç«¯ä¸­è¾“å…¥å‘½ä»¤ï¼Œå¹¶æ¥æ”¶ç³»ç»Ÿçš„å“åº”ã€‚</p>

<p>Node è‡ªå¸¦äº†äº¤äº’å¼è§£é‡Šå™¨ï¼Œå¯ä»¥æ‰§è¡Œä»¥ä¸‹ä»»åŠ¡ï¼š</p>

<p>è¯»å– - è¯»å–ç”¨æˆ·è¾“å…¥ï¼Œè§£æè¾“å…¥äº†Javascript æ•°æ®ç»“æ„å¹¶å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</p>

<p>æ‰§è¡Œ - æ‰§è¡Œè¾“å…¥çš„æ•°æ®ç»“æ„</p>

<p>æ‰“å° - è¾“å‡ºç»“æœ</p>

<p>å¾ªç¯ - å¾ªç¯æ“ä½œä»¥ä¸Šæ­¥éª¤ç›´åˆ°ç”¨æˆ·ä¸¤æ¬¡æŒ‰ä¸‹ ctrl-c æŒ‰é’®é€€å‡ºã€‚</p>

<p>Node çš„äº¤äº’å¼è§£é‡Šå™¨å¯ä»¥å¾ˆå¥½çš„è°ƒè¯• Javascript ä»£ç ã€‚</p>

<p>å¼€å§‹å­¦ä¹  REPL</p>

<p>æˆ‘ä»¬å¯ä»¥è¾“å…¥ä»¥ä¸‹å‘½ä»¤æ¥å¯åŠ¨ Node çš„ç»ˆç«¯ï¼š</p>

<p>$ node</p>
<blockquote>

  <p>è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥åœ¨ &gt; åè¾“å…¥ç®€å•çš„è¡¨è¾¾å¼ï¼Œå¹¶æŒ‰ä¸‹å›è½¦é”®æ¥è®¡ç®—ç»“æœã€‚</p>
</blockquote>

<p>Node.js å›è°ƒå‡½æ•°
Node.js å¼‚æ­¥ç¼–ç¨‹çš„ç›´æ¥ä½“ç°å°±æ˜¯å›è°ƒã€‚</p>

<p>å¼‚æ­¥ç¼–ç¨‹ä¾æ‰˜äºå›è°ƒæ¥å®ç°ï¼Œä½†ä¸èƒ½è¯´ä½¿ç”¨äº†å›è°ƒåç¨‹åºå°±å¼‚æ­¥åŒ–äº†ã€‚</p>

<p>å›è°ƒå‡½æ•°åœ¨å®Œæˆä»»åŠ¡åå°±ä¼šè¢«è°ƒç”¨ï¼ŒNode ä½¿ç”¨äº†å¤§é‡çš„å›è°ƒå‡½æ•°ï¼ŒNode æ‰€æœ‰ API éƒ½æ”¯æŒå›è°ƒå‡½æ•°ã€‚</p>

<p>ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€è¾¹è¯»å–æ–‡ä»¶ï¼Œä¸€è¾¹æ‰§è¡Œå…¶ä»–å‘½ä»¤ï¼Œåœ¨æ–‡ä»¶è¯»å–å®Œæˆåï¼Œæˆ‘ä»¬å°†æ–‡ä»¶å†…å®¹ä½œä¸ºå›è°ƒå‡½æ•°çš„å‚æ•°è¿”å›ã€‚è¿™æ ·åœ¨æ‰§è¡Œä»£ç æ—¶å°±æ²¡æœ‰é˜»å¡æˆ–ç­‰å¾…æ–‡ä»¶ I/O æ“ä½œã€‚è¿™å°±å¤§å¤§æé«˜äº† Node.js çš„æ€§èƒ½ï¼Œå¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘è¯·æ±‚ã€‚</p>

<p>å›è°ƒå‡½æ•°ä¸€èˆ¬ä½œä¸ºå‡½æ•°çš„æœ€åä¸€ä¸ªå‚æ•°å‡ºç°ï¼š</p>

<p>function foo1(name, age, callback) { }
function foo2(value, callback1, callback2) { }
é˜»å¡ä»£ç å®ä¾‹
åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ input.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>

<p>èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com
åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š</p>

<p>var fs = require(â€œfsâ€);</p>

<p>var data = fs.readFileSync(â€˜input.txtâ€™);</p>

<p>console.log(data.toString());
console.log(â€œç¨‹åºæ‰§è¡Œç»“æŸ!â€);
ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<p>$ node main.js
èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com</p>

<p>ç¨‹åºæ‰§è¡Œç»“æŸ!
éé˜»å¡ä»£ç å®ä¾‹
åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ input.txt ï¼Œå†…å®¹å¦‚ä¸‹ï¼š</p>

<p>èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com
åˆ›å»º main.js æ–‡ä»¶, ä»£ç å¦‚ä¸‹ï¼š</p>

<p>var fs = require(â€œfsâ€);</p>

<p>fs.readFile(â€˜input.txtâ€™, function (err, data) {
    if (err) return console.error(err);
    console.log(data.toString());
});</p>

<p>console.log(â€œç¨‹åºæ‰§è¡Œç»“æŸ!â€);
ä»¥ä¸Šä»£ç æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<p>$ node main.js
ç¨‹åºæ‰§è¡Œç»“æŸ!
èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com
ä»¥ä¸Šä¸¤ä¸ªå®ä¾‹æˆ‘ä»¬äº†è§£äº†é˜»å¡ä¸éé˜»å¡è°ƒç”¨çš„ä¸åŒã€‚ç¬¬ä¸€ä¸ªå®ä¾‹åœ¨æ–‡ä»¶è¯»å–å®Œåæ‰æ‰§è¡Œç¨‹åºã€‚ ç¬¬äºŒä¸ªå®ä¾‹æˆ‘ä»¬ä¸éœ€è¦ç­‰å¾…æ–‡ä»¶è¯»å–å®Œï¼Œè¿™æ ·å°±å¯ä»¥åœ¨è¯»å–æ–‡ä»¶æ—¶åŒæ—¶æ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç ï¼Œå¤§å¤§æé«˜äº†ç¨‹åºçš„æ€§èƒ½ã€‚</p>

<p>å› æ­¤ï¼Œé˜»å¡æ˜¯æŒ‰é¡ºåºæ‰§è¡Œçš„ï¼Œè€Œéé˜»å¡æ˜¯ä¸éœ€è¦æŒ‰é¡ºåºçš„ï¼Œæ‰€ä»¥å¦‚æœéœ€è¦å¤„ç†å›è°ƒå‡½æ•°çš„å‚æ•°ï¼Œæˆ‘ä»¬å°±éœ€è¦å†™åœ¨å›è°ƒå‡½æ•°å†…</p>

<p>Node.js äº‹ä»¶å¾ªç¯
Node.js æ˜¯å•è¿›ç¨‹å•çº¿ç¨‹åº”ç”¨ç¨‹åºï¼Œä½†æ˜¯å› ä¸º V8 å¼•æ“æä¾›çš„å¼‚æ­¥æ‰§è¡Œå›è°ƒæ¥å£ï¼Œé€šè¿‡è¿™äº›æ¥å£å¯ä»¥å¤„ç†å¤§é‡çš„å¹¶å‘ï¼Œæ‰€ä»¥æ€§èƒ½éå¸¸é«˜ã€‚</p>

<p>Node.js å‡ ä¹æ¯ä¸€ä¸ª API éƒ½æ˜¯æ”¯æŒå›è°ƒå‡½æ•°çš„ã€‚</p>

<p>Node.js åŸºæœ¬ä¸Šæ‰€æœ‰çš„äº‹ä»¶æœºåˆ¶éƒ½æ˜¯ç”¨è®¾è®¡æ¨¡å¼ä¸­è§‚å¯Ÿè€…æ¨¡å¼å®ç°ã€‚</p>

<p>Node.js å•çº¿ç¨‹ç±»ä¼¼è¿›å…¥ä¸€ä¸ªwhile(true)çš„äº‹ä»¶å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰äº‹ä»¶è§‚å¯Ÿè€…é€€å‡ºï¼Œæ¯ä¸ªå¼‚æ­¥äº‹ä»¶éƒ½ç”Ÿæˆä¸€ä¸ªäº‹ä»¶è§‚å¯Ÿè€…ï¼Œå¦‚æœæœ‰äº‹ä»¶å‘ç”Ÿå°±è°ƒç”¨è¯¥å›è°ƒå‡½æ•°.</p>

<p>äº‹ä»¶é©±åŠ¨ç¨‹åº
Node.js ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ï¼Œå½“web serveræ¥æ”¶åˆ°è¯·æ±‚ï¼Œå°±æŠŠå®ƒå…³é—­ç„¶åè¿›è¡Œå¤„ç†ï¼Œç„¶åå»æœåŠ¡ä¸‹ä¸€ä¸ªwebè¯·æ±‚ã€‚</p>

<p>å½“è¿™ä¸ªè¯·æ±‚å®Œæˆï¼Œå®ƒè¢«æ”¾å›å¤„ç†é˜Ÿåˆ—ï¼Œå½“åˆ°è¾¾é˜Ÿåˆ—å¼€å¤´ï¼Œè¿™ä¸ªç»“æœè¢«è¿”å›ç»™ç”¨æˆ·ã€‚</p>

<p>è¿™ä¸ªæ¨¡å‹éå¸¸é«˜æ•ˆå¯æ‰©å±•æ€§éå¸¸å¼ºï¼Œå› ä¸º webserver ä¸€ç›´æ¥å—è¯·æ±‚è€Œä¸ç­‰å¾…ä»»ä½•è¯»å†™æ“ä½œã€‚ï¼ˆè¿™ä¹Ÿç§°ä¹‹ä¸ºéé˜»å¡å¼IOæˆ–è€…äº‹ä»¶é©±åŠ¨IOï¼‰</p>

<p>åœ¨äº‹ä»¶é©±åŠ¨æ¨¡å‹ä¸­ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä¸»å¾ªç¯æ¥ç›‘å¬äº‹ä»¶ï¼Œå½“æ£€æµ‹åˆ°äº‹ä»¶æ—¶è§¦å‘å›è°ƒå‡½æ•°ã€‚</p>

<p>æ•´ä¸ªäº‹ä»¶é©±åŠ¨çš„æµç¨‹å°±æ˜¯è¿™ä¹ˆå®ç°çš„ï¼Œéå¸¸ç®€æ´ã€‚æœ‰ç‚¹ç±»ä¼¼äºè§‚å¯Ÿè€…æ¨¡å¼ï¼Œäº‹ä»¶ç›¸å½“äºä¸€ä¸ªä¸»é¢˜(Subject)ï¼Œè€Œæ‰€æœ‰æ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶ä¸Šçš„å¤„ç†å‡½æ•°ç›¸å½“äºè§‚å¯Ÿè€…(Observer)ã€‚</p>

<p>Node.js æœ‰å¤šä¸ªå†…ç½®çš„äº‹ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥ events æ¨¡å—ï¼Œå¹¶é€šè¿‡å®ä¾‹åŒ– EventEmitter ç±»æ¥ç»‘å®šå’Œç›‘å¬äº‹ä»¶ï¼Œå¦‚ä¸‹å®ä¾‹ï¼š</p>

<p>// å¼•å…¥ events æ¨¡å—
var events = require(â€˜eventsâ€™);
// åˆ›å»º eventEmitter å¯¹è±¡
var eventEmitter = new events.EventEmitter();
ä»¥ä¸‹ç¨‹åºç»‘å®šäº‹ä»¶å¤„ç†ç¨‹åºï¼š</p>

<p>// ç»‘å®šäº‹ä»¶åŠäº‹ä»¶çš„å¤„ç†ç¨‹åº
eventEmitter.on(â€˜eventNameâ€™, eventHandler);
æˆ‘ä»¬å¯ä»¥é€šè¿‡ç¨‹åºè§¦å‘äº‹ä»¶ï¼š</p>

<p>// è§¦å‘äº‹ä»¶
eventEmitter.emit(â€˜eventNameâ€™);
å®ä¾‹
åˆ›å»º main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p>å®ä¾‹
// å¼•å…¥ events æ¨¡å—
var events = require(â€˜eventsâ€™);
// åˆ›å»º eventEmitter å¯¹è±¡
var eventEmitter = new events.EventEmitter();</p>

<p>// åˆ›å»ºäº‹ä»¶å¤„ç†ç¨‹åº
var connectHandler = function connected() {
   console.log(â€˜è¿æ¥æˆåŠŸã€‚â€™);</p>

<p>// è§¦å‘ data_received äº‹ä»¶ 
   eventEmitter.emit(â€˜data_receivedâ€™);
}</p>

<p>// ç»‘å®š connection äº‹ä»¶å¤„ç†ç¨‹åº
eventEmitter.on(â€˜connectionâ€™, connectHandler);</p>

<p>// ä½¿ç”¨åŒ¿åå‡½æ•°ç»‘å®š data_received äº‹ä»¶
eventEmitter.on(â€˜data_receivedâ€™, function(){
   console.log(â€˜æ•°æ®æ¥æ”¶æˆåŠŸã€‚â€™);
});</p>

<p>// è§¦å‘ connection äº‹ä»¶ 
eventEmitter.emit(â€˜connectionâ€™);</p>

<p>console.log(â€œç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚â€);
æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ‰§è¡Œä»¥ä¸Šä»£ç ï¼š</p>

<p>$ node main.js
è¿æ¥æˆåŠŸã€‚
æ•°æ®æ¥æ”¶æˆåŠŸã€‚
ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚
Node åº”ç”¨ç¨‹åºæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ
åœ¨ Node åº”ç”¨ç¨‹åºä¸­ï¼Œæ‰§è¡Œå¼‚æ­¥æ“ä½œçš„å‡½æ•°å°†å›è°ƒå‡½æ•°ä½œä¸ºæœ€åä¸€ä¸ªå‚æ•°ï¼Œ å›è°ƒå‡½æ•°æ¥æ”¶é”™è¯¯å¯¹è±¡ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚</p>

<p>æ¥ä¸‹æ¥è®©æˆ‘ä»¬æ¥é‡æ–°çœ‹ä¸‹å‰é¢çš„å®ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ª input.txt ,æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p>

<p>èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com
åˆ›å»º main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<p>var fs = require(â€œfsâ€);</p>

<p>fs.readFile(â€˜input.txtâ€™, function (err, data) {
   if (err){
      console.log(err.stack);
      return;
   }
   console.log(data.toString());
});
console.log(â€œç¨‹åºæ‰§è¡Œå®Œæ¯•â€);
ä»¥ä¸Šç¨‹åºä¸­ fs.readFile() æ˜¯å¼‚æ­¥å‡½æ•°ç”¨äºè¯»å–æ–‡ä»¶ã€‚ å¦‚æœåœ¨è¯»å–æ–‡ä»¶è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯ï¼Œé”™è¯¯ err å¯¹è±¡å°±ä¼šè¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p>

<p>å¦‚æœæ²¡å‘ç”Ÿé”™è¯¯ï¼ŒreadFile è·³è¿‡ err å¯¹è±¡çš„è¾“å‡ºï¼Œæ–‡ä»¶å†…å®¹å°±é€šè¿‡å›è°ƒå‡½æ•°è¾“å‡ºã€‚</p>

<p>æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<p>ç¨‹åºæ‰§è¡Œå®Œæ¯•
èœé¸Ÿæ•™ç¨‹å®˜ç½‘åœ°å€ï¼šwww.runoob.com
æ¥ä¸‹æ¥æˆ‘ä»¬åˆ é™¤ input.txt æ–‡ä»¶ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p>ç¨‹åºæ‰§è¡Œå®Œæ¯•
Error: ENOENT, open â€˜input.txtâ€™
å› ä¸ºæ–‡ä»¶ input.txt ä¸å­˜åœ¨ï¼Œæ‰€ä»¥è¾“å‡ºäº†é”™è¯¯ä¿¡æ¯ã€‚</p>

<p>Node.js EventEmitter
Node.js æ‰€æœ‰çš„å¼‚æ­¥ I/O æ“ä½œåœ¨å®Œæˆæ—¶éƒ½ä¼šå‘é€ä¸€ä¸ªäº‹ä»¶åˆ°äº‹ä»¶é˜Ÿåˆ—ã€‚</p>

<p>Node.js é‡Œé¢çš„è®¸å¤šå¯¹è±¡éƒ½ä¼šåˆ†å‘äº‹ä»¶ï¼šä¸€ä¸ª net.Server å¯¹è±¡ä¼šåœ¨æ¯æ¬¡æœ‰æ–°è¿æ¥æ—¶è§¦å‘ä¸€ä¸ªäº‹ä»¶ï¼Œ ä¸€ä¸ª fs.readStream å¯¹è±¡ä¼šåœ¨æ–‡ä»¶è¢«æ‰“å¼€çš„æ—¶å€™è§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚ æ‰€æœ‰è¿™äº›äº§ç”Ÿäº‹ä»¶çš„å¯¹è±¡éƒ½æ˜¯ events.EventEmitter çš„å®ä¾‹ã€‚</p>

<p>EventEmitter ç±»
events æ¨¡å—åªæä¾›äº†ä¸€ä¸ªå¯¹è±¡ï¼š events.EventEmitterã€‚EventEmitter çš„æ ¸å¿ƒå°±æ˜¯äº‹ä»¶è§¦å‘ä¸äº‹ä»¶ç›‘å¬å™¨åŠŸèƒ½çš„å°è£…ã€‚</p>

<p>ä½ å¯ä»¥é€šè¿‡require(â€œeventsâ€);æ¥è®¿é—®è¯¥æ¨¡å—ã€‚</p>

<p>// å¼•å…¥ events æ¨¡å—
var events = require(â€˜eventsâ€™);
// åˆ›å»º eventEmitter å¯¹è±¡
var eventEmitter = new events.EventEmitter();
EventEmitter å¯¹è±¡å¦‚æœåœ¨å®ä¾‹åŒ–æ—¶å‘ç”Ÿé”™è¯¯ï¼Œä¼šè§¦å‘ error äº‹ä»¶ã€‚å½“æ·»åŠ æ–°çš„ç›‘å¬å™¨æ—¶ï¼ŒnewListener äº‹ä»¶ä¼šè§¦å‘ï¼Œå½“ç›‘å¬å™¨è¢«ç§»é™¤æ—¶ï¼ŒremoveListener äº‹ä»¶è¢«è§¦å‘ã€‚</p>

<p>ä¸‹é¢æˆ‘ä»¬ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­è¯´æ˜ EventEmitter çš„ç”¨æ³•ï¼š</p>

<p>//event.js æ–‡ä»¶
var EventEmitter = require(â€˜eventsâ€™).EventEmitter; 
var event = new EventEmitter(); 
event.on(â€˜some_eventâ€™, function() { 
    console.log(â€˜some_event äº‹ä»¶è§¦å‘â€™); 
}); 
setTimeout(function() { 
    event.emit(â€˜some_eventâ€™); 
}, 1000); 
æ‰§è¡Œç»“æœå¦‚ä¸‹ï¼š</p>

<p>è¿è¡Œè¿™æ®µä»£ç ï¼Œ1 ç§’åæ§åˆ¶å°è¾“å‡ºäº† â€˜some_event äº‹ä»¶è§¦å‘â€™ã€‚å…¶åŸç†æ˜¯ event å¯¹è±¡æ³¨å†Œäº†äº‹ä»¶ some_event çš„ä¸€ä¸ªç›‘å¬å™¨ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡ setTimeout åœ¨ 1000 æ¯«ç§’ä»¥åå‘ event å¯¹è±¡å‘é€äº‹ä»¶ some_eventï¼Œæ­¤æ—¶ä¼šè°ƒç”¨some_event çš„ç›‘å¬å™¨ã€‚</p>

<p>$ node event.js 
some_event äº‹ä»¶è§¦å‘
EventEmitter çš„æ¯ä¸ªäº‹ä»¶ç”±ä¸€ä¸ªäº‹ä»¶åå’Œè‹¥å¹²ä¸ªå‚æ•°ç»„æˆï¼Œäº‹ä»¶åæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šå¸¸è¡¨è¾¾ä¸€å®šçš„è¯­ä¹‰ã€‚å¯¹äºæ¯ä¸ªäº‹ä»¶ï¼ŒEventEmitter æ”¯æŒ è‹¥å¹²ä¸ªäº‹ä»¶ç›‘å¬å™¨ã€‚</p>

<p>å½“äº‹ä»¶è§¦å‘æ—¶ï¼Œæ³¨å†Œåˆ°è¿™ä¸ªäº‹ä»¶çš„äº‹ä»¶ç›‘å¬å™¨è¢«ä¾æ¬¡è°ƒç”¨ï¼Œäº‹ä»¶å‚æ•°ä½œä¸ºå›è°ƒå‡½æ•°å‚æ•°ä¼ é€’ã€‚</p>

<p>è®©æˆ‘ä»¬ä»¥ä¸‹é¢çš„ä¾‹å­è§£é‡Šè¿™ä¸ªè¿‡ç¨‹ï¼š</p>

<p>//event.js æ–‡ä»¶
var events = require(â€˜eventsâ€™); 
var emitter = new events.EventEmitter(); 
emitter.on(â€˜someEventâ€™, function(arg1, arg2) { 
    console.log(â€˜listener1â€™, arg1, arg2); 
}); 
emitter.on(â€˜someEventâ€™, function(arg1, arg2) { 
    console.log(â€˜listener2â€™, arg1, arg2); 
}); 
emitter.emit(â€˜someEventâ€™, â€˜arg1 å‚æ•°â€™, â€˜arg2 å‚æ•°â€™); 
æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œè¿è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p>

<p>$ node event.js 
listener1 arg1 å‚æ•° arg2 å‚æ•°
listener2 arg1 å‚æ•° arg2 å‚æ•°
ä»¥ä¸Šä¾‹å­ä¸­ï¼Œemitter ä¸ºäº‹ä»¶ someEvent æ³¨å†Œäº†ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨ï¼Œç„¶åè§¦å‘äº† someEvent äº‹ä»¶ã€‚</p>

<p>è¿è¡Œç»“æœä¸­å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªäº‹ä»¶ç›‘å¬å™¨å›è°ƒå‡½æ•°è¢«å…ˆåè°ƒç”¨ã€‚ è¿™å°±æ˜¯EventEmitteræœ€ç®€å•çš„ç”¨æ³•ã€‚</p>

<p>EventEmitter æä¾›äº†å¤šä¸ªå±æ€§ï¼Œå¦‚ on å’Œ emitã€‚on å‡½æ•°ç”¨äºç»‘å®šäº‹ä»¶å‡½æ•°ï¼Œemit å±æ€§ç”¨äºè§¦å‘ä¸€ä¸ªäº‹ä»¶ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å…·ä½“çœ‹ä¸‹ EventEmitter çš„å±æ€§ä»‹ç»ã€‚</p>

<p>æ–¹æ³•
åºå·	æ–¹æ³• &amp; æè¿°
1	addListener(event, listener)
ä¸ºæŒ‡å®šäº‹ä»¶æ·»åŠ ä¸€ä¸ªç›‘å¬å™¨åˆ°ç›‘å¬å™¨æ•°ç»„çš„å°¾éƒ¨ã€‚
2	on(event, listener)
ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªç›‘å¬å™¨ï¼Œæ¥å—ä¸€ä¸ªå­—ç¬¦ä¸² event å’Œä¸€ä¸ªå›è°ƒå‡½æ•°ã€‚
server.on(â€˜connectionâ€™, function (stream) {
  console.log(â€˜someone connected!â€™);
});
3	once(event, listener)
ä¸ºæŒ‡å®šäº‹ä»¶æ³¨å†Œä¸€ä¸ªå•æ¬¡ç›‘å¬å™¨ï¼Œå³ ç›‘å¬å™¨æœ€å¤šåªä¼šè§¦å‘ä¸€æ¬¡ï¼Œè§¦å‘åç«‹åˆ»è§£é™¤è¯¥ç›‘å¬å™¨ã€‚
server.once(â€˜connectionâ€™, function (stream) {
  console.log(â€˜Ah, we have our first user!â€™);
});
4	removeListener(event, listener)
ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æŸä¸ªç›‘å¬å™¨ï¼Œç›‘å¬å™¨å¿…é¡»æ˜¯è¯¥äº‹ä»¶å·²ç»æ³¨å†Œè¿‡çš„ç›‘å¬å™¨ã€‚</p>

<p>å®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯äº‹ä»¶åç§°ï¼Œç¬¬äºŒä¸ªæ˜¯å›è°ƒå‡½æ•°åç§°ã€‚</p>

<p>var callback = function(stream) {
  console.log(â€˜someone connected!â€™);
};
server.on(â€˜connectionâ€™, callback);
// â€¦
server.removeListener(â€˜connectionâ€™, callback);
5	removeAllListeners([event])
ç§»é™¤æ‰€æœ‰äº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ï¼Œ å¦‚æœæŒ‡å®šäº‹ä»¶ï¼Œåˆ™ç§»é™¤æŒ‡å®šäº‹ä»¶çš„æ‰€æœ‰ç›‘å¬å™¨ã€‚
6	setMaxListeners(n)
é»˜è®¤æƒ…å†µä¸‹ï¼Œ EventEmitters å¦‚æœä½ æ·»åŠ çš„ç›‘å¬å™¨è¶…è¿‡ 10 ä¸ªå°±ä¼šè¾“å‡ºè­¦å‘Šä¿¡æ¯ã€‚ setMaxListeners å‡½æ•°ç”¨äºæé«˜ç›‘å¬å™¨çš„é»˜è®¤é™åˆ¶çš„æ•°é‡ã€‚
7	listeners(event)
è¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°ç»„ã€‚
8	emit(event, [arg1], [arg2], [â€¦])
æŒ‰ç›‘å¬å™¨çš„é¡ºåºæ‰§è¡Œæ‰§è¡Œæ¯ä¸ªç›‘å¬å™¨ï¼Œå¦‚æœäº‹ä»¶æœ‰æ³¨å†Œç›‘å¬è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚
ç±»æ–¹æ³•
åºå·	æ–¹æ³• &amp; æè¿°
1	listenerCount(emitter, event)
è¿”å›æŒ‡å®šäº‹ä»¶çš„ç›‘å¬å™¨æ•°é‡ã€‚
events.EventEmitter.listenerCount(emitter, eventName) //å·²åºŸå¼ƒï¼Œä¸æ¨è
events.emitter.listenerCount(eventName) //æ¨è
äº‹ä»¶
åºå·	äº‹ä»¶ &amp; æè¿°
1	newListener
event - å­—ç¬¦ä¸²ï¼Œäº‹ä»¶åç§°</p>

<p>listener - å¤„ç†äº‹ä»¶å‡½æ•°</p>

<p>è¯¥äº‹ä»¶åœ¨æ·»åŠ æ–°ç›‘å¬å™¨æ—¶è¢«è§¦å‘ã€‚</p>

<p>2	removeListener
event - å­—ç¬¦ä¸²ï¼Œäº‹ä»¶åç§°</p>

<p>listener - å¤„ç†äº‹ä»¶å‡½æ•°</p>

<p>ä»æŒ‡å®šç›‘å¬å™¨æ•°ç»„ä¸­åˆ é™¤ä¸€ä¸ªç›‘å¬å™¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤æ“ä½œå°†ä¼šæ”¹å˜å¤„äºè¢«åˆ ç›‘å¬å™¨ä¹‹åçš„é‚£äº›ç›‘å¬å™¨çš„ç´¢å¼•ã€‚</p>

<p>å®ä¾‹
ä»¥ä¸‹å®ä¾‹é€šè¿‡ connectionï¼ˆè¿æ¥ï¼‰äº‹ä»¶æ¼”ç¤ºäº† EventEmitter ç±»çš„åº”ç”¨ã€‚</p>

<p>åˆ›å»º main.js æ–‡ä»¶ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>

<p>var events = require(â€˜eventsâ€™);
var eventEmitter = new events.EventEmitter();</p>

<p>// ç›‘å¬å™¨ #1
var listener1 = function listener1() {
   console.log(â€˜ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚â€™);
}</p>

<p>// ç›‘å¬å™¨ #2
var listener2 = function listener2() {
  console.log(â€˜ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚â€™);
}</p>

<p>// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener1 
eventEmitter.addListener(â€˜connectionâ€™, listener1);</p>

<p>// ç»‘å®š connection äº‹ä»¶ï¼Œå¤„ç†å‡½æ•°ä¸º listener2
eventEmitter.on(â€˜connectionâ€™, listener2);</p>

<p>var eventListeners = eventEmitter.listenerCount(â€˜connectionâ€™);
console.log(eventListeners + â€œ ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚â€);</p>

<p>// å¤„ç† connection äº‹ä»¶ 
eventEmitter.emit(â€˜connectionâ€™);</p>

<p>// ç§»é™¤ç›‘ç»‘å®šçš„ listener1 å‡½æ•°
eventEmitter.removeListener(â€˜connectionâ€™, listener1);
console.log(â€œlistener1 ä¸å†å—ç›‘å¬ã€‚â€);</p>

<p>// è§¦å‘è¿æ¥äº‹ä»¶
eventEmitter.emit(â€˜connectionâ€™);</p>

<p>eventListeners = eventEmitter.listenerCount(â€˜connectionâ€™);
console.log(eventListeners + â€œ ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚â€);</p>

<p>console.log(â€œç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚â€);
ä»¥ä¸Šä»£ç ï¼Œæ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š</p>

<p>$ node main.js
2 ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚
ç›‘å¬å™¨ listener1 æ‰§è¡Œã€‚
ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚
listener1 ä¸å†å—ç›‘å¬ã€‚
ç›‘å¬å™¨ listener2 æ‰§è¡Œã€‚
1 ä¸ªç›‘å¬å™¨ç›‘å¬è¿æ¥äº‹ä»¶ã€‚
ç¨‹åºæ‰§è¡Œå®Œæ¯•ã€‚
error äº‹ä»¶
EventEmitter å®šä¹‰äº†ä¸€ä¸ªç‰¹æ®Šçš„äº‹ä»¶ errorï¼Œå®ƒåŒ…å«äº†é”™è¯¯çš„è¯­ä¹‰ï¼Œæˆ‘ä»¬åœ¨é‡åˆ° å¼‚å¸¸çš„æ—¶å€™é€šå¸¸ä¼šè§¦å‘ error äº‹ä»¶ã€‚</p>

<p>å½“ error è¢«è§¦å‘æ—¶ï¼ŒEventEmitter è§„å®šå¦‚æœæ²¡æœ‰å“ åº”çš„ç›‘å¬å™¨ï¼ŒNode.js ä¼šæŠŠå®ƒå½“ä½œå¼‚å¸¸ï¼Œé€€å‡ºç¨‹åºå¹¶è¾“å‡ºé”™è¯¯ä¿¡æ¯ã€‚</p>

<p>æˆ‘ä»¬ä¸€èˆ¬è¦ä¸ºä¼šè§¦å‘ error äº‹ä»¶çš„å¯¹è±¡è®¾ç½®ç›‘å¬å™¨ï¼Œé¿å…é‡åˆ°é”™è¯¯åæ•´ä¸ªç¨‹åºå´©æºƒã€‚ä¾‹å¦‚ï¼š</p>

<p>var events = require(â€˜eventsâ€™); 
var emitter = new events.EventEmitter(); 
emitter.emit(â€˜errorâ€™); 
è¿è¡Œæ—¶ä¼šæ˜¾ç¤ºä»¥ä¸‹é”™è¯¯ï¼š</p>

<p>node.js:201 
throw e; // process.nextTick error, or â€˜errorâ€™ event on first tick</p>
<p>Error: Uncaught, unspecified â€˜errorâ€™ event. 
at EventEmitter.emit (events.js:50:15) 
at Object.<anonymous> (/home/byvoid/error.js:5:9) 
at Module._compile (module.js:441:26) 
at Object..js (module.js:459:10) 
at Module.load (module.js:348:31) 
at Function._load (module.js:308:12) 
at Array.0 (module.js:479:10) 
at EventEmitter._tickCallback (node.js:192:40) 
ç»§æ‰¿ EventEmitter
å¤§å¤šæ•°æ—¶å€™æˆ‘ä»¬ä¸ä¼šç›´æ¥ä½¿ç”¨ EventEmitterï¼Œè€Œæ˜¯åœ¨å¯¹è±¡ä¸­ç»§æ‰¿å®ƒã€‚åŒ…æ‹¬ fsã€netã€ http åœ¨å†…çš„ï¼Œåªè¦æ˜¯æ”¯æŒäº‹ä»¶å“åº”çš„æ ¸å¿ƒæ¨¡å—éƒ½æ˜¯ EventEmitter çš„å­ç±»ã€‚</anonymous></p>

<p>ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢ï¼ŸåŸå› æœ‰ä¸¤ç‚¹ï¼š</p>

<p>é¦–å…ˆï¼Œå…·æœ‰æŸä¸ªå®ä½“åŠŸèƒ½çš„å¯¹è±¡å®ç°äº‹ä»¶ç¬¦åˆè¯­ä¹‰ï¼Œ äº‹ä»¶çš„ç›‘å¬å’Œå‘ç”Ÿåº”è¯¥æ˜¯ä¸€ä¸ªå¯¹è±¡çš„æ–¹æ³•ã€‚</p>

<p>å…¶æ¬¡ JavaScript çš„å¯¹è±¡æœºåˆ¶æ˜¯åŸºäºåŸå‹çš„ï¼Œæ”¯æŒ éƒ¨åˆ†å¤šé‡ç»§æ‰¿ï¼Œç»§æ‰¿ EventEmitter ä¸ä¼šæ‰“ä¹±å¯¹è±¡åŸæœ‰çš„ç»§æ‰¿å…³ç³»ã€‚</p>

<p>Node.js Buffer(ç¼“å†²åŒº)
JavaScript è¯­è¨€è‡ªèº«åªæœ‰å­—ç¬¦ä¸²æ•°æ®ç±»å‹ï¼Œæ²¡æœ‰äºŒè¿›åˆ¶æ•°æ®ç±»å‹ã€‚</p>

<p>ä½†åœ¨å¤„ç†åƒTCPæµæˆ–æ–‡ä»¶æµæ—¶ï¼Œå¿…é¡»ä½¿ç”¨åˆ°äºŒè¿›åˆ¶æ•°æ®ã€‚å› æ­¤åœ¨ Node.jsä¸­ï¼Œå®šä¹‰äº†ä¸€ä¸ª Buffer ç±»ï¼Œè¯¥ç±»ç”¨æ¥åˆ›å»ºä¸€ä¸ªä¸“é—¨å­˜æ”¾äºŒè¿›åˆ¶æ•°æ®çš„ç¼“å­˜åŒºã€‚</p>

<p>åœ¨ Node.js ä¸­ï¼ŒBuffer ç±»æ˜¯éš Node å†…æ ¸ä¸€èµ·å‘å¸ƒçš„æ ¸å¿ƒåº“ã€‚Buffer åº“ä¸º Node.js å¸¦æ¥äº†ä¸€ç§å­˜å‚¨åŸå§‹æ•°æ®çš„æ–¹æ³•ï¼Œå¯ä»¥è®© Node.js å¤„ç†äºŒè¿›åˆ¶æ•°æ®ï¼Œæ¯å½“éœ€è¦åœ¨ Node.js ä¸­å¤„ç†I/Oæ“ä½œä¸­ç§»åŠ¨çš„æ•°æ®æ—¶ï¼Œå°±æœ‰å¯èƒ½ä½¿ç”¨ Buffer åº“ã€‚åŸå§‹æ•°æ®å­˜å‚¨åœ¨ Buffer ç±»çš„å®ä¾‹ä¸­ã€‚ä¸€ä¸ª Buffer ç±»ä¼¼äºä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œä½†å®ƒå¯¹åº”äº V8 å †å†…å­˜ä¹‹å¤–çš„ä¸€å—åŸå§‹å†…å­˜ã€‚</p>

<p>åœ¨v6.0ä¹‹å‰åˆ›å»ºBufferå¯¹è±¡ç›´æ¥ä½¿ç”¨new Buffer()æ„é€ å‡½æ•°æ¥åˆ›å»ºå¯¹è±¡å®ä¾‹ï¼Œä½†æ˜¯Bufferå¯¹å†…å­˜çš„æƒé™æ“ä½œç›¸æ¯”å¾ˆå¤§ï¼Œå¯ä»¥ç›´æ¥æ•è·ä¸€äº›æ•æ„Ÿä¿¡æ¯ï¼Œæ‰€ä»¥åœ¨v6.0ä»¥åï¼Œå®˜æ–¹æ–‡æ¡£é‡Œé¢å»ºè®®ä½¿ç”¨ Buffer.from() æ¥å£å»åˆ›å»ºBufferå¯¹è±¡ã€‚</p>

<p>Buffer ä¸å­—ç¬¦ç¼–ç 
Buffer å®ä¾‹ä¸€èˆ¬ç”¨äºè¡¨ç¤ºç¼–ç å­—ç¬¦çš„åºåˆ—ï¼Œæ¯”å¦‚ UTF-8 ã€ UCS2 ã€ Base64 ã€æˆ–åå…­è¿›åˆ¶ç¼–ç çš„æ•°æ®ã€‚ é€šè¿‡ä½¿ç”¨æ˜¾å¼çš„å­—ç¬¦ç¼–ç ï¼Œå°±å¯ä»¥åœ¨ Buffer å®ä¾‹ä¸æ™®é€šçš„ JavaScript å­—ç¬¦ä¸²ä¹‹é—´è¿›è¡Œç›¸äº’è½¬æ¢ã€‚</p>

<p>const buf = Buffer.from(â€˜runoobâ€™, â€˜asciiâ€™);</p>

<p>// è¾“å‡º 72756e6f6f62
console.log(buf.toString(â€˜hexâ€™));</p>

<p>// è¾“å‡º cnVub29i
console.log(buf.toString(â€˜base64â€™));
Node.js ç›®å‰æ”¯æŒçš„å­—ç¬¦ç¼–ç åŒ…æ‹¬ï¼š</p>

<p>ascii - ä»…æ”¯æŒ 7 ä½ ASCII æ•°æ®ã€‚å¦‚æœè®¾ç½®å»æ‰é«˜ä½çš„è¯ï¼Œè¿™ç§ç¼–ç æ˜¯éå¸¸å¿«çš„ã€‚</p>

<p>utf8 - å¤šå­—èŠ‚ç¼–ç çš„ Unicode å­—ç¬¦ã€‚è®¸å¤šç½‘é¡µå’Œå…¶ä»–æ–‡æ¡£æ ¼å¼éƒ½ä½¿ç”¨ UTF-8 ã€‚</p>

<p>utf16le - 2 æˆ– 4 ä¸ªå­—èŠ‚ï¼Œå°å­—èŠ‚åºç¼–ç çš„ Unicode å­—ç¬¦ã€‚æ”¯æŒä»£ç†å¯¹ï¼ˆU+10000 è‡³ U+10FFFFï¼‰ã€‚</p>

<p>ucs2 - utf16le çš„åˆ«åã€‚</p>

<p>base64 - Base64 ç¼–ç ã€‚</p>

<p>latin1 - ä¸€ç§æŠŠ Buffer ç¼–ç æˆä¸€å­—èŠ‚ç¼–ç çš„å­—ç¬¦ä¸²çš„æ–¹å¼ã€‚</p>

<p>binary - latin1 çš„åˆ«åã€‚</p>

<p>hex - å°†æ¯ä¸ªå­—èŠ‚ç¼–ç ä¸ºä¸¤ä¸ªåå…­è¿›åˆ¶å­—ç¬¦ã€‚</p>

<p>åˆ›å»º Buffer ç±»
Buffer æä¾›äº†ä»¥ä¸‹ API æ¥åˆ›å»º Buffer ç±»ï¼š</p>

<p>Buffer.alloc(size[, fill[, encoding]])ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œå¦‚æœæ²¡æœ‰è®¾ç½® fillï¼Œåˆ™é»˜è®¤å¡«æ»¡ 0
Buffer.allocUnsafe(size)ï¼š è¿”å›ä¸€ä¸ªæŒ‡å®šå¤§å°çš„ Buffer å®ä¾‹ï¼Œä½†æ˜¯å®ƒä¸ä¼šè¢«åˆå§‹åŒ–ï¼Œæ‰€ä»¥å®ƒå¯èƒ½åŒ…å«æ•æ„Ÿçš„æ•°æ®
Buffer.allocUnsafeSlow(size)
Buffer.from(array)ï¼š è¿”å›ä¸€ä¸ªè¢« array çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹ï¼ˆä¼ å…¥çš„ array çš„å…ƒç´ åªèƒ½æ˜¯æ•°å­—ï¼Œä¸ç„¶å°±ä¼šè‡ªåŠ¨è¢« 0 è¦†ç›–ï¼‰
Buffer.from(arrayBuffer[, byteOffset[, length]])ï¼š è¿”å›ä¸€ä¸ªæ–°å»ºçš„ä¸ç»™å®šçš„ ArrayBuffer å…±äº«åŒä¸€å†…å­˜çš„ Bufferã€‚
Buffer.from(buffer)ï¼š å¤åˆ¶ä¼ å…¥çš„ Buffer å®ä¾‹çš„æ•°æ®ï¼Œå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ Buffer å®ä¾‹
Buffer.from(string[, encoding])ï¼š è¿”å›ä¸€ä¸ªè¢« string çš„å€¼åˆå§‹åŒ–çš„æ–°çš„ Buffer å®ä¾‹</p>

<p>Node.js Stream(æµ)
Stream æ˜¯ä¸€ä¸ªæŠ½è±¡æ¥å£ï¼ŒNode ä¸­æœ‰å¾ˆå¤šå¯¹è±¡å®ç°äº†è¿™ä¸ªæ¥å£ã€‚ä¾‹å¦‚ï¼Œå¯¹http æœåŠ¡å™¨å‘èµ·è¯·æ±‚çš„request å¯¹è±¡å°±æ˜¯ä¸€ä¸ª Streamï¼Œè¿˜æœ‰stdoutï¼ˆæ ‡å‡†è¾“å‡ºï¼‰ã€‚</p>

<p>Node.jsï¼ŒStream æœ‰å››ç§æµç±»å‹ï¼š</p>

<p>Readable - å¯è¯»æ“ä½œã€‚</p>

<p>Writable - å¯å†™æ“ä½œã€‚</p>

<p>Duplex - å¯è¯»å¯å†™æ“ä½œ.</p>

<p>Transform - æ“ä½œè¢«å†™å…¥æ•°æ®ï¼Œç„¶åè¯»å‡ºç»“æœã€‚</p>

<p>æ‰€æœ‰çš„ Stream å¯¹è±¡éƒ½æ˜¯ EventEmitter çš„å®ä¾‹ã€‚å¸¸ç”¨çš„äº‹ä»¶æœ‰ï¼š</p>

<p>data - å½“æœ‰æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p>

<p>end - æ²¡æœ‰æ›´å¤šçš„æ•°æ®å¯è¯»æ—¶è§¦å‘ã€‚</p>

<p>error - åœ¨æ¥æ”¶å’Œå†™å…¥è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯æ—¶è§¦å‘ã€‚</p>

<p>finish - æ‰€æœ‰æ•°æ®å·²è¢«å†™å…¥åˆ°åº•å±‚ç³»ç»Ÿæ—¶è§¦å‘ã€‚</p>

:ET