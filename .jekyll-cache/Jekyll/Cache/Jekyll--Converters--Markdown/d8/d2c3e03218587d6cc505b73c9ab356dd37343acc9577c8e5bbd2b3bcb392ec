I"­$<p>https://www.elastic.co/cn/downloads/elasticsearch
$ cd bin 
$ ./elasticsearch
https://zhuanlan.zhihu.com/p/74408145
<!-- more -->
Master-Slaveæ¨¡å¼ï¼ŒMasterè¿›è¡Œé›†ç¾¤å’Œå…ƒæ•°æ®ç®¡ç†ï¼ŒData Nodeä½œä¸ºSlaveèŠ‚ç‚¹ï¼Œè´Ÿè´£å®é™…æ•°æ®çš„ç´¢å¼•å’Œæœç´¢æ“ä½œã€‚</p>

<p>https://baijiahao.baidu.com/s?id=1707530675869255847&amp;wfr=spider&amp;for=pc</p>

<p>https://blog.csdn.net/qq_21383435/article/details/117065422</p>

<p>% curl http://127.0.0.1:9200/_all
curl: (52) Empty reply from server</p>

<p>[2022-04-17T08:36:16,736][WARN ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [xiazemindeMBP] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:62886}</p>

<p>% cat config/elasticsearch.yml</p>

<p>https://wenku.baidu.com/view/f8b9fd3f2179168884868762caaedd3383c4b5d6.html</p>

<p>curl -H â€œContent-Type:application/jsonâ€ -XPOST -u elastic â€˜http://127.0.0.1:9200/_xpack/security/user/elastic/_passwordâ€™ -d â€˜{ â€œpasswordâ€ : â€œ123456â€ }â€™</p>

<p>curl -XGET â€“user user:passwd â€˜http://XXXX:9200/XX/XXXâ€™</p>

<p>https://blog.csdn.net/mengo1234/article/details/104989382</p>

<p>% ./bin/elasticsearch-setup-passwords interactive</p>

<p>Failed to authenticate user â€˜elasticâ€™ against https://192.168.31.98:9200/_security/_authenticate?pretty
Possible causes include:</p>
<ul>
  <li>The password for the â€˜elasticâ€™ user has already been changed on this cluster</li>
  <li>Your elasticsearch node is running against a different keystore
This tool used the keystore at /Users/xiazemin/Downloads/è½¯ä»¶/elasticsearch-8.1.2/config/elasticsearch.keystore</li>
</ul>

<p>You can use the <code class="language-plaintext highlighter-rouge">elasticsearch-reset-password</code> CLI tool to reset the password of the â€˜elasticâ€™ user</p>

<p>ERROR: Failed to verify bootstrap password</p>

<p>./bin/elasticsearch-reset-password -u elastic
Password for the [elastic] user successfully reset.
New value: OngoP+zAoLtfOU-MDPr=</p>

<p>curl -XGET â€“user elastic:OngoP+zAoLtfOU-MDPr= â€˜http://127.0.0.1:9200/_allâ€™</p>

<p>[2022-04-17T08:52:45,529][WARN ][o.e.x.s.t.n.SecurityNetty4HttpServerTransport] [xiazemindeMBP] received plaintext http traffic on an https channel, closing connection Netty4HttpChannel{localAddress=/127.0.0.1:9200, remoteAddress=/127.0.0.1:64182}</p>

<p>ä¿®æ”¹elasticsearch.ymlé…ç½®æ–‡ä»¶</p>

<p>å°†xpack.security.enabledè®¾ç½®ä¸ºfalse</p>

<p>xpack.security.enabled: false</p>

<p>https://blog.csdn.net/qq_17229141/article/details/123106584</p>

<p>% curl -XGET â€“user elastic:OngoP+zAoLtfOU-MDPr= â€˜http://127.0.0.1:9200â€™
{
  â€œnameâ€ : â€œxiazemindeMBPâ€,
  â€œcluster_nameâ€ : â€œelasticsearchâ€,
  â€œcluster_uuidâ€ : â€œMIsFIwcpShSyPd20uwsrCwâ€,
  â€œversionâ€ : {
    â€œnumberâ€ : â€œ8.1.2â€,
    â€œbuild_flavorâ€ : â€œdefaultâ€,
    â€œbuild_typeâ€ : â€œtarâ€,
    â€œbuild_hashâ€ : â€œ31df9689e80bad366ac20176aa7f2371ea5eb4c1â€,
    â€œbuild_dateâ€ : â€œ2022-03-29T21:18:59.991429448Zâ€,
    â€œbuild_snapshotâ€ : false,
    â€œlucene_versionâ€ : â€œ9.0.0â€,
    â€œminimum_wire_compatibility_versionâ€ : â€œ7.17.0â€,
    â€œminimum_index_compatibility_versionâ€ : â€œ7.0.0â€
  },
  â€œtaglineâ€ : â€œYou Know, for Searchâ€
}</p>

<p>https://github.com/medcl/elasticsearch-analysis-ik/releases</p>

<p>Exception in thread â€œmainâ€ java.nio.file.NotDirectoryException:</p>

<p>/Users/xiazemin/Downloads/è½¯ä»¶/elasticsearch-8.1.2/plugins/elasticsearch-analysis-ik-8.1.2.jar</p>

<p>% rm .DS_Store</p>

<p>https://blog.csdn.net/weixin_49307485/article/details/120656211</p>

<p>cd your-es-root/plugins/ &amp;&amp; mkdir ik</p>

<p>unzip plugin to folder your-es-root/plugins/ik</p>

<p>https://github.com/medcl/elasticsearch-analysis-ik</p>

<p>% curl -XGET â€“user elastic:OngoP+zAoLtfOU-MDPr= â€˜http://127.0.0.1:9200/_cat/pluginsâ€™
xiazemindeMBP analysis-ik 8.1.2</p>

<p>curl -XPUT â€“user elastic:OngoP+zAoLtfOU-MDPr= â€“header â€˜Content-Type: application/jsonâ€™ â€“header â€˜Accept: application/jsonâ€™ -d â€˜{â€œmappingsâ€:{â€œpropertiesâ€:{â€œcategoryâ€:{â€œtypeâ€:â€textâ€},â€titleâ€:{â€œtypeâ€:â€textâ€},â€contentâ€:{â€œanalyzerâ€:â€ik_max_wordâ€,â€search_analyzerâ€:â€ik_max_wordâ€,â€typeâ€:â€textâ€}}}}â€™ â€˜http://127.0.0.1:9200/my_blogâ€™</p>

<p>{â€œerrorâ€:{â€œroot_causeâ€:[{â€œtypeâ€:â€invalid_index_name_exceptionâ€,â€reasonâ€:â€Invalid index name [myBlog], must be lowercaseâ€,â€index_uuidâ€:â€<em>na</em>â€,â€indexâ€:â€myBlogâ€}],â€typeâ€:â€invalid_index_name_exceptionâ€,â€reasonâ€:â€Invalid index name [myBlog], must be lowercaseâ€,â€index_uuidâ€:â€<em>na</em>â€,â€indexâ€:â€myBlogâ€},â€statusâ€:400}</p>

<p>{â€œerrorâ€:{â€œroot_causeâ€:[{â€œtypeâ€:â€access_control_exceptionâ€,â€reasonâ€:â€access denied ("java.io.FilePermission" "/Users/xiazemin/Downloads/%E8%BD%AF%E4%BB%B6/elasticsearch-8.1.2/plugins/ik/config/IKAnalyzer.cfg.xml" "read")â€}],â€typeâ€:â€access_control_exceptionâ€,â€reasonâ€:â€access denied ("java.io.FilePermission" "/Users/xiazemin/Downloads/%E8%BD%AF%E4%BB%B6/elasticsearch-8.1.2/plugins/ik/config/IKAnalyzer.cfg.xml" "read")â€},â€statusâ€:500}</p>

<p>% chmod 777 ./ik</p>

<p>chmod 777 ./ik/config/IKAnalyzer.cfg.xml</p>

<p>è§£å†³æ–¹æ¡ˆï¼š
1ã€åˆ†æä¸ºé…ç½®æ–‡ä»¶IKAnalyzer.cfg.xmlåªæœ‰å¯è¯»æƒé™ ç»™äºˆæ–‡ä»¶ç›¸å¯¹åº”çš„æƒé™
2ã€es å¦‚æœè£…äº†æ’ä»¶ï¼Œè·¯å¾„æ–‡ä»¶å¤¹ä¸èƒ½æœ‰ç©ºæ ¼æˆ–è€…æ±‰å­—</p>

<p>https://blog.csdn.net/qq_42681313/article/details/106277140</p>

<p>{â€œacknowledgedâ€:true,â€shards_acknowledgedâ€:true,â€indexâ€:â€my_blogâ€}</p>

<p>% go mod init es
go: creating new go.mod: module es</p>

<p>% go get -u github.com/olivere/elastic/v7</p>

<p>https://blog.csdn.net/hanzkering/article/details/84844367</p>

<p>1ï¼‰ä»¥ä¸‹æƒ…å†µ</p>

<p>a.å¦‚æœå°†request.docAsUpsert(true) å’Œrequest.scriptedUpsert(true)æ³¨é‡Šæ‰æˆ–éƒ½è®¾ç½®ä¸ºfalseï¼Œ</p>

<p>b.å¦‚æœå°†request.docAsUpsert(true) è®¾ç½®ä¸ºfaluse,è€Œrequest.scriptedUpsert(true)ä¸ºtrue</p>

<p>ä¸”æ–‡æ¡£ä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºå‡ºæ¥çš„æ–‡æ¡£å†…å®¹ä¸ºï¼š</p>

<p>{â€œcreatedâ€:â€2017-01-01â€}ï¼Œ</p>

<p>å³åªæœ‰request.upsert(jsonString, XContentType.JSON)ä¸­çš„jsonStringå†…å®¹è¢«åˆ›å»ºï¼Œè€Œrequest.doc(jsonMap)ä¸­çš„jsonMapå†…å®¹æ²¡è¢«åˆ›å»º</p>

<p>2ï¼‰æ­¤ä¾‹ä¸­å¦‚æœæ–‡æ¡£ä¸å­˜åœ¨ï¼Œä¸”è¿™æ ·è®¾ç½®ï¼šrequest.scriptedUpsert(true);ã€request.docAsUpsert(false);ï¼Œåˆ™ä¼šåˆ›å»ºä¸€ä¸ªç©ºå†…å®¹çš„æ–‡æ¡£ï¼Œå› ä¸ºè„šæœ¬ä¸­æ²¡æœ‰å†…å®¹ï¼Œè€Œç¦æ­¢é€šè¿‡docç§‹å†¬è£…åˆ›å»ºæ–°æ–‡æ¡£</p>

<p>3ï¼‰å¦‚æœä¸ä½¿ç”¨request.upsertæ–¹æ³•ï¼Œä¸”request.scriptedUpsert(false);å’Œrequest.docAsUpsert(false);éƒ½è®¾ç½®ä¸ºfalseï¼Œ</p>

<p>åˆ™æ–‡æ¡£ä¸å­˜åœ¨æ—¶æç¤ºæ²¡æœ‰æ‰¾åˆ°æ–‡æ¡£ï¼Œè€Œä¸ä¼šåˆ›å»ºæ–°çš„æ–‡æ¡£</p>

<p>4ï¼‰å¦‚æœrequest.docAsUpsert(true)å’Œrequest.scriptedUpsert(true)éƒ½è®¾ç½®ä¸ºtrue,ä¸”</p>

<p>request.doc(jsonMap)è¢«æ³¨é‡Šæ‰æ—¶ï¼Œä¼šæŠ¥é”™å¦‚ä¸‹ï¼š
org.elasticsearch.action.ActionRequestValidationException: 
Validation Failed: 1: script or doc is missing;2: doc must be specified if doc_as_upsert is enabled;
å³å¦‚æœå¼€å¯åŠ¨äº†doc_as_upsertæ–¹æ³•ï¼Œåˆ™å¿…é¡»ä½¿ç”¨docæ–¹æ³•ä¼ å…¥éœ€è¦æ›´æ–°çš„å†…å®¹</p>

<p>5ï¼‰æ³¨ï¼šå•æœºä¸è¦ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•ï¼Œå¦åˆ™ä¼šæŠ¥è¶…æ—¶å¼‚å¸¸</p>

<p>// request.waitForActiveShards(2);</p>

<p>// request.waitForActiveShards(ActiveShardCount.ALL);</p>

<p>https://blog.csdn.net/qq_2300688967/article/details/83826118</p>

<p>{â€œerrorâ€:{â€œroot_causeâ€:[{â€œtypeâ€:â€action_request_validation_exceptionâ€,â€reasonâ€:â€Validation Failed: 1: script or doc is missing;â€}],â€typeâ€:â€action_request_validation_exceptionâ€,â€reasonâ€:â€Validation Failed: 1: script or doc is missing;â€},â€statusâ€:400}
elastic: Error 400 (Bad Request): Validation Failed: 1: script or doc is missing; [type=action_request_validation_exception]</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	//Upsert(data).
	Doc(data).
	// true æ— åˆ™æ’å…¥, æœ‰åˆ™æ›´æ–°, è®¾ç½®ä¸ºfalseæ—¶è®°å½•ä¸å­˜åœ¨å°†æŠ¥é”™
	DocAsUpsert(true).
</code></pre></div></div>

<p>è¿™é‡Œä¸èƒ½ç”¨ Upsert</p>

<p>è½¬æ¢Markdownè¯­æ³•ï¼šrussross/blackfriday
æŸ¥æ‰¾Documentçš„å†…å®¹ï¼šPuerkitoBio/goquery
è¯­æ³•é«˜äº®ï¼šsourcegraph/syntaxhighlight
æ’å…¥æ¨¡å—ï¼šhtml/template
æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼šos/exec
æ–‡ä»¶æ“ä½œï¼špath/filepath
åˆ›å»ºWebæœåŠ¡å™¨ï¼šSimpleHTTPServer
è§£æ.ymlé…ç½®æ–‡ä»¶ï¼šgopkg.in/yaml.v2</p>

<p>https://renwoxing.blog.csdn.net/article/details/108592511?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_aa&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1.pc_relevant_aa&amp;utm_relevant_index=2</p>

<p>go get github.com/PuerkitoBio/goquery #æŸ¥æ‰¾Documentçš„å†…å®¹ï¼Œè¿™ä¸ªåº“å°±å®ç°äº†ç±»ä¼¼ jQuery çš„åŠŸèƒ½ï¼Œè®©ä½ èƒ½æ–¹ä¾¿çš„ä½¿ç”¨ Go è¯­è¨€æ“ä½œ HTML æ–‡æ¡£
go get github.com/sourcegraph/syntaxhighlight #è¯­æ³•é«˜äº®syntaxhighlightåŒ…æä¾›ä»£ç çš„è¯­æ³•é«˜äº®æ˜¾ç¤ºã€‚ å®ƒç›®å‰ä½¿ç”¨ç‹¬ç«‹äºè¯­è¨€çš„è¯æ³•åˆ†æå™¨ï¼Œ å¹¶åœ¨JavaScriptï¼ŒJavaï¼ŒRubyï¼ŒPythonï¼ŒGoå’ŒCä¸Šè¡¨ç°å‡ºè‰²ã€‚
#ä¸»è¦çš„AsHTML(src []byte) ([]byte, error)å‡½æ•°ï¼Œè¾“å‡ºå°±æ˜¯HTML ä¸google-code-prettifyç›¸åŒçš„CSSç±»ï¼Œå› æ­¤ä»»ä½•æ ·å¼è¡¨ä¹Ÿåº”è¯¥é€‚ç”¨äºæ­¤åŒ…ã€‚</p>

:ET