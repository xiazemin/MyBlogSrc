I"ß<p>package main</p>

<p>import (
	â€œfmtâ€
	â€œio/ioutilâ€
	â€œlogâ€
	â€œnet/httpâ€
	â€œnet/http/httptestâ€ // ä½¿ç”¨çš„åŒ…
)</p>

<p>func main() {
        // mock å®ç°
	ts := httptest.NewServer(http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {
	    // è¿™é‡Œæ„é€  mock çš„å…·ä½“å¤„ç†ç»†èŠ‚
            fmt.Fprintln(w, â€œHello, clientâ€)
	}))
	defer ts.Close()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    // è¯·æ±‚ç¬¬ä¸‰æ–¹æœåŠ¡çš„é€»è¾‘
res, err := http.Get(ts.URL)
if err != nil {
	log.Fatal(err)
}
greeting, err := ioutil.ReadAll(res.Body)
res.Body.Close()
if err != nil {
	log.Fatal(err)
}

fmt.Printf("%s", greeting) }
</code></pre></div></div>

<p>https://zhuanlan.zhihu.com/p/320135253
<!-- more -->
https://github.com/jarcoal/httpmock</p>

<p>httpmock.Activate()
  defer httpmock.DeactivateAndReset()</p>

<p>// Exact URL match
  httpmock.RegisterResponder(â€œGETâ€, â€œhttps://api.mybiz.com/articlesâ€,
    httpmock.NewStringResponder(200, <code class="language-plaintext highlighter-rouge">[{"id": 1, "name": "My Great Article"}]</code>))</p>

<p>https://www.cnblogs.com/Detector/p/9769840.html</p>

<p>https://github.com/goware/httpmock</p>
:ET