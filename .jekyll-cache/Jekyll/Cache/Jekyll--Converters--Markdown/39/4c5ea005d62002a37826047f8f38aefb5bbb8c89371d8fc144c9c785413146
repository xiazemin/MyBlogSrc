I"=<!-- more -->
<p>PHP7.1ä¸‹ vldæ‰©å±•çš„å®‰è£…ä½¿ç”¨
PHP7.1ä¸‹ vldæ‰©å±•çš„å®‰è£…ä½¿ç”¨
åŸåˆ› 2017å¹´03æœˆ29æ—¥ 08:03:05 595
1ï¼‰git clone https://github.com/derickr/vld.git</p>

<p>2ï¼‰cd vld</p>

<p>3ï¼‰phpize</p>

<p>4ï¼‰./configure</p>

<p>5ï¼‰make &amp;&amp; make install</p>

<p>6ï¼‰æ·»åŠ ext-vld.inié…ç½®æ–‡ä»¶</p>

<p>7ï¼‰é‡å¯fpm</p>

<table>
  <tbody>
    <tr>
      <td>8ï¼‰php -m</td>
      <td>grep vld æŸ¥çœ‹æ‰©å±•</td>
    </tr>
  </tbody>
</table>

<p>9ï¼‰php -dvld.active test.php æµ‹è¯•vldæ‰©å±•</p>

<p>PHP7.1ä¸‹ vldæ‰©å±•çš„å®‰è£…ä½¿ç”¨
åŸåˆ› 2017å¹´03æœˆ29æ—¥ 08:03:05 595
1ï¼‰git clone https://github.com/derickr/vld.git</p>

<p>2ï¼‰cd vld</p>

<p>3ï¼‰phpize</p>

<p>4ï¼‰./configure</p>

<p>5ï¼‰make &amp;&amp; make install</p>

<p>6ï¼‰æ·»åŠ ext-vld.inié…ç½®æ–‡ä»¶</p>

<p>7ï¼‰é‡å¯fpm</p>

<table>
  <tbody>
    <tr>
      <td>8ï¼‰php -m</td>
      <td>grep vld æŸ¥çœ‹æ‰©å±•</td>
    </tr>
  </tbody>
</table>

<p>9ï¼‰php -dvld.active test.php æµ‹è¯•vldæ‰©å±•</p>

<p>å…³äºVLDæ‰©å±•æ˜¾ç¤ºä¿¡æ¯çš„ä¸€ç‚¹ç‚¹è§£é‡Š</p>

<p>å…¶ä¸­ï¼š</p>

<p>branch analysis from position åœ¨åˆ†ææ•°ç»„æ—¶ä½¿ç”¨</p>

<p>return foundæ˜¯å¦è¿”è¿˜</p>

<p>filename åˆ†æçš„æ–‡ä»¶å</p>

<p>function nameå‡½æ•°å</p>

<p>number of opsç”Ÿæˆçš„æ“ä½œæ•°</p>

<p>compiled varsç¼–è¯‘æœŸé—´çš„å˜é‡ï¼ŒPHP5åæ·»åŠ ï¼Œæ˜¯ä¸€ä¸ªç¼“å­˜ä¼˜åŒ–ï¼Œåœ¨PHPæºç ä¸­ä»¥IS_CVæ ‡è®°</p>

<p>op listç”Ÿæˆçš„ä¸­é—´ä»£ç çš„å˜é‡åˆ—è¡¨</p>

<p>-dvld.activeè¾“å‡ºçš„æ˜¯VLDçš„é»˜è®¤è®¾ç½®ï¼Œä½¿ç”¨-dvld.verbosityå¯ä»¥æŸ¥çœ‹æ›´åŠ è¯¦ç»†çš„å†…å®¹</p>

<p>åŒ…å«å„ä¸ªä¸­é—´ä»£ç çš„æ“ä½œæ•°ç­‰</p>

<p>è‹¥åªæƒ³çœ‹åˆ°è¾“å‡ºçš„ä¸­é—´ä»£ç ï¼Œå¹¶ä¸æƒ³å®é™…æ‰§è¡Œè¿™æ®µä»£ç ï¼Œå¯ä»¥ä½¿ç”¨-dvld.execute = 0æ¥ç¦ç”¨ä»£ç çš„æ‰§è¡Œ</p>

<p>php -dvld.active=1 -dvld.execute=0 test.php</p>

<p>å®ƒè¿˜å¯ä»¥æ”¯æŒè¾“å‡º.dotæ–‡ä»¶</p>

<p>php -dvld.active=1 -dvld.save_dir=â€™D:\tmpâ€™ -dvld.save_paths=1 -dvld.dump_paths=1 t.php ä¼šå°†ç”Ÿæˆçš„ä¸­é—´ä»£ç çš„ä¿¡æ¯è¾“å‡ºå†D:/tmp/path.dotä¸­</p>

<p>-dvld.formatæ˜¯å¦ä»¥è‡ªå®šä¹‰çš„æ ¼å¼è¾“å‡ºï¼Œé»˜è®¤ä¸ºå¦ï¼Œæ˜¯æŒ‡ä»¥-dvld.col_sepæŒ‡å®šçš„å‚æ•°é—´éš”</p>

<p>-dvld.col_sepåœ¨-dvld.formatå‚æ•°å¯ç”¨æ—¶æ‰ä¼šæœ‰æ•ˆï¼Œé»˜è®¤ä¸º \t</p>

<p>-dvld.verbosityæ˜¯å¦æ˜¾ç¤ºæ›´åŠ è¯¦ç»†çš„ä¿¡æ¯ï¼Œé»˜è®¤ä¸º1ï¼Œå…¶å€¼å¯ä»¥æ˜¯0ï¼Œ1ï¼Œ2ï¼Œ3 æˆ–è€…å°äº0åªæ˜¯æ¯”1å°çš„æ•ˆæœä¼šå–0ä¸€æ ·ï¼Œè´Ÿæ•°çš„æ•ˆæœå’Œ3çš„æ•ˆæœä¸€æ ·</p>

<p>-dvld.save_diræŒ‡å®šæ–‡ä»¶çš„è¾“å‡ºè·¯å¾„ï¼Œé»˜è®¤/tmp</p>

<p>-dvld.save_pathæŒ‡å®šæ–‡ä»¶è¾“å‡ºçš„è·¯å¾„ï¼Œé»˜è®¤0è¡¨ç¤ºä¸è¾“å‡ºæ–‡ä»¶</p>

<p>-dvld.dump_pathsæ§åˆ¶è¾“å‡ºçš„å†…å®¹ï¼Œ0æˆ–1 é»˜è®¤1ï¼Œå³è¾“å‡ºå†…å®¹</p>

<p>2ã€linuxä¸‹å’‹å®‰è£…graphviz
http://www.cnblogs.com/sld666666/archive/2010/06/25/1765510.html
2.1ï¼‰CentOS ä¸‹å®‰è£… graphviz</p>

<p>$ sudo yum install graphviz</p>

<p>Install 39 Package(s)</p>

<p>æ€»ä¸‹è½½é‡ï¼š13 M
Installed size: 35 M
ç¡®å®šå—ï¼Ÿ[y/N]ï¼šy</p>

<p>å·²å®‰è£…:
graphviz.i686 0:2.26.0-10.el6</p>

<p>å®Œæ¯•ï¼</p>

<p>3ã€åœ¨Linuxä¸‹å¦‚ä½•ä½¿ç”¨</p>

<p>ã€€ã€€å‡è®¾æˆ‘ä»¬æŠŠä¸Šé¢çš„ä»£ç å†™åˆ°äº†ä¸€ä¸ªå«åšaa.gvçš„æ–‡æœ¬æ–‡ä»¶é‡Œé¢ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å°±å¯ä»¥äº†ï¼š</p>

<p>ã€€ã€€$ dot -Tpng -ohehe.png aa.gv</p>

<p>ã€€ã€€è¿™æ ·å°±ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªå«åšhehe.pngçš„å›¾ç‰‡æ–‡ä»¶
ã€€ã€€</p>

<p>mac</p>

<p>wget http://pecl.php.net/get/vld-0.14.0.tgz
tar zxvf vld-0.14.0.tgz
cd vld-0.14.0
phpize
locate php-config
./configure â€“with-php-config=/usr/local/Cellar/php70/7.0.25_17/bin/php-config
 make &amp;&amp; make install
 php -r â€˜phpinfo();â€™ |grep vld
 ls /usr/local/Cellar/php70/7.0.25_17/lib/php/extensions/no-debug-non-zts-20151012/vld.so
 vi  /usr/local/etc/php/7.0/php.ini
 php -r â€˜phpinfo();â€™ |grep vld
 php -dvld.active=1 -dvld.execute=0 test.php
 php -dvld.active=1 -dvld.save_paths=1 test.php
 ls /tmp
 brew install graphviz
 dot -Tpng /tmp/paths.dot -o paths.png
<img src="https://xiazemin.github.io/MyBlog/img/paths.png" /></p>
:ET