I"‘<p>https://github.com/gopherjs/gopherjs</p>

<p>A compiler from Go to JavaScript for running Go code in a browser
<!-- more -->
è®©ä½ çš„golangä»£ç åœ¨æµè§ˆå™¨ä¸­æ‰§è¡Œ(Golangè½¬JavaScript)</p>

<p>gopherjsåº”ç”¨
æœ€ç®€å•ä¾‹å­(accessing native javascript apis in go code)
å†™ä¸€ä¸ªgolangæ–‡ä»¶ï¼Œå§‘ä¸”å‘½åä¸ºmain.go:</p>

<p>package main</p>

<p>import â€œgithub.com/gopherjs/gopherjs/jsâ€</p>

<p>func main() {
    js.Global.Get(â€œdocumentâ€).Call(â€œwriteâ€, â€œHello world!â€)
}
è¿è¡Œå‘½ä»¤è¡Œï¼š</p>

<p>gopherjs build main.go -o demo.js</p>

<p>æ­¤æ—¶ï¼Œç”Ÿæˆäº†ä¸¤ä¸ªæ–‡ä»¶demo.jså’Œdemo.js.mapã€‚</p>

<p>æ–°å»ºä¸€ä¸ªhtmlæ–‡ä»¶ï¼Œå§‘ä¸”å‘½åä¸ºtest.htmlï¼Œé”®å…¥ï¼š</p>

<p>&lt;!doctype html&gt;</p>
<html>
<head>
  <title>Beginning of Gopherjs</title>
</head>
<body>

<script src="demo.js"></script>
</body>
</html>
<p>æ‰“å¼€test.htmlï¼ŒæŸ¥çœ‹ç»“æœã€‚</p>

<p>æ“ä½œDOM(honnef.co/go/js/dom)
githubåœ°å€ï¼š
https://github.com/dominikh/go-js-dom</p>

<p>è·å–ï¼š
go get honnef.co/go/js/dom</p>

<p>æµè§ˆå™¨æ’­æ”¾mp3éŸ³é¢‘</p>

<p>main.go</p>

<p>package main</p>

<p>import â€œhonnef.co/go/js/domâ€</p>

<p>func main() {
    d := dom.GetWindow().Document()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo := d.GetElementByID("foo").(*dom.HTMLButtonElement)
foo.AddEventListener("click", false, func(event dom.Event) {
    a := d.GetElementByID("audio").(*dom.HTMLAudioElement)
    a.Play()
}) } ` ç¼–è¯‘ï¼š gopherjs build main.go -o demo.js
</code></pre></div></div>

<p>test.html</p>

<p>&lt;!doctype html&gt;</p>
<html>
<head>
  <title>GopherJS DOM example - Play Sound on Click Event</title>
</head>
<body>

<button id="foo" type="button">Click Me to Play Sound</button>
<audio id="audio">
  <source src="test.mp3" type="audio/mpeg" />
Your browser does not support this audio format.
</audio>

<script src="demo.js"></script>
</body>
</html>
<p>Create and Append Element
main.go</p>

<p>package main</p>

<p>import â€œhonnef.co/go/js/domâ€</p>

<p>func main() {
    d := dom.GetWindow().Document()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>foo := d.GetElementByID("foo").(*dom.HTMLDivElement)
foo.AddEventListener("click", false, func(event dom.Event) {
    div := d.CreateElement("div").(*dom.HTMLDivElement)
    div.Style().SetProperty("color", "red", "")
    div.SetTextContent("I am new div")
    foo.AppendChild(div)
}) } ç¼–è¯‘ï¼š gopherjs build append.go -o demo.js
</code></pre></div></div>

<p>test.html</p>

<p>&lt;!doctype html&gt;</p>
<html>
<head>
  <title>GopherJS DOM example - Create and Append Element</title>
</head>
<body>

<div id="foo">Click me to create and add new element</div>

<script src="demo.js"></script>
</body>
</html>
<p>æ›´å¤šä¾‹å­
https://siongui.github.io/2016/01/10/gopherjs-dom-example-getElementById-innerHTML/</p>

<p>https://studygolang.com/articles/17838</p>
:ET