I"ã<p>multipart/form-data é¡¾åæ€ä¹‰å¯ä»¥ä¸Šä¼ å¤šä¸ªform-data å¹¶ä¸”ç”¨åˆ†éš”ç¬¦è¿›è¡Œåˆ†å‰²ï¼Œå¤šç”¨äºæ–‡ä»¶ä¸Šä¼ 
multipart/form-data è¯·æ±‚æ ·ä¾‹</p>

<p>POST /handle HTTP/1.1</p>

<p>Host: localhost:8080</p>

<p>Connection: keep-alive</p>

<p>Content-Length: 182537</p>

<p>Cache-Control: max-age=0</p>

<p>Content-Type: multipart/form-data; boundary=â€”-WebKitFormBoundaryWdDAe6hxfa4nl2Ig</p>

<p>Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,<em>/</em>;q=0.8</p>

<p>Accept-Encoding: gzip, deflate, br</p>

<p>Accept-Language: zh-CN,zh;q=0.9</p>

<p>â€”â€”WebKitFormBoundaryWdDAe6hxfa4nl2Ig</p>

<p>Content-Disposition: form-data; name=â€submit-nameâ€</p>

<p>jack</p>

<p>â€”â€”WebKitFormBoundaryWdDAe6hxfa4nl2Ig</p>

<p>Content-Disposition: form-data; name=â€file1â€; filename=â€out.pngâ€</p>

<p>Content-Type: image/png</p>

<p>binary-data</p>

<p>â€”â€”WebKitFormBoundaryWdDAe6hxfa4nl2Ig</p>

<p>Content-Disposition: form-data; name=â€file2â€; filename=â€2.pngâ€</p>

<p>Content-Type: image/png</p>

<p>binary-data-2</p>

<p>â€”â€”WebKitFormBoundaryWdDAe6hxfa4nl2Igâ€“</p>

<p>func (c *PostGetController) sendPostFormFile(url string, filename string)(error) {
    body_buf := bytes.NewBufferString(â€œâ€)             <br />
    body_writer := multipart.NewWriter(body_buf)      <br />
    // boundaryé»˜è®¤ä¼šæä¾›ä¸€ç»„éšæœºæ•°ï¼Œä¹Ÿå¯ä»¥è‡ªå·±è®¾ç½®ã€‚
    body_writer.SetBoundary(â€œPp7Ye2EeWaFDdAYâ€); <br />
    //boundary :=  body_writer.Boundary()</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 1. è¦ä¸Šä¼ çš„æ•°æ®
body_writer.WriteField("key1", "value-string1")
body_writer.WriteField("key2", fmt.Sprintf("%d", 45))
// 2. å†…å­˜ä¸­çš„æ–‡ä»¶1ï¼ŒFormFile1
 _, err := body_writer.CreateFormFile("filekey1", "filename.txt")
if err != nil {
    fmt.Printf("åˆ›å»ºFormFile1æ–‡ä»¶ä¿¡æ¯å¼‚å¸¸ï¼", err)
    return err
}
f1_content := "å†…å­˜ä¸­æ–‡ä»¶1çš„å†…å®¹";
body_buf.Write([]byte(f1_content))
// 3. è¯»å–æ–‡ä»¶
 _, errr := body_writer.CreateFormFile("filekey2", filename)
if errr != nil {
    fmt.Printf("åˆ›å»ºFormFile2æ–‡ä»¶ä¿¡æ¯å¼‚å¸¸ï¼", err)
    return errr
}
fb2, err := ioutil.ReadFile(filename)
if err != nil {
    fmt.Println("æ‰“å¼€æ–‡ä»¶å¼‚å¸¸!", err)
    return err
}
body_buf.Write(fb2)
// ç»“æŸæ•´ä¸ªæ¶ˆæ¯body
body_writer.Close();

// 
req_reader := io.MultiReader(body_buf)
req, err := http.NewRequest("POST", url, req_reader)
if err != nil {
   fmt.Printf("ç«™ç‚¹ç›¸æœºä¸Šä¼ å›¾ç‰‡ï¼Œåˆ›å»ºä¸Šæ¬¡è¯·æ±‚å¼‚å¸¸ï¼å¼‚å¸¸ä¿¡æ¯:", err)
   return err
}
// æ·»åŠ Postå¤´
req.Header.Set("Connection", "close")
req.Header.Set("Pragma", "no-cache")
req.Header.Set("Content-Type", body_writer.FormDataContentType())
req.ContentLength = int64(body_buf.Len())
fmt.Printf("å‘é€æ¶ˆæ¯é•¿åº¦:", req.ContentLength)
// å‘é€æ¶ˆæ¯
client := &amp;http.Client{}
resp, err := client.Do(req)
defer resp.Body.Close()
body, err := ioutil.ReadAll(resp.Body)
if err != nil {
   fmt.Printf("è¯»å–å›åº”æ¶ˆæ¯å¼‚å¸¸:", err)
}
fmt.Printf("å‘é€å›åº”æ•°æ®:",string(body))
return nil }
</code></pre></div></div>

<p>æ¥æ”¶ä¸Šä¼ çš„æ–‡ä»¶
unc (this *PostGetController) DoRecePostFormFiel() {
    // è¯»å–å‚æ•°ä¿¡æ¯
    value1 := this.GetString(â€œkey1â€)
    value2, _ := this.GetInt64(â€œkey2â€)
    _, fh1, ferr := this.GetFile(â€œfilekey1â€)
    _, fh2, ferr := this.GetFile(â€œfilekey2â€)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// 
fmt.Printf("key1: ", value1)
fmt.Printf("key2: ", value2)

// ä¿å­˜æ–‡ä»¶1åˆ°ç›®å½•
fmt.Printf("filekey1-Filename: ", fh1.Filename)
ferr = this.SaveToFile("filekey1", fmt.Sprintf("./%s", fh1.Filename))
if ferr != nil {
    fmt.Printf("ä¿å­˜æ–‡ä»¶1å¤±è´¥:", ferr.Error())
}

// ä¿å­˜æ–‡ä»¶2åˆ°ç›®å½•,æ–‡ä»¶åç§°å‰é¢åŠ file2åªæ˜¯ä¿®æ”¹ä¿å­˜æ–‡ä»¶çš„åç§°ã€‚
fmt.Printf("filekey2-Filename: ", fh2.Filename)
ferr = this.SaveToFile("filekey2", fmt.Sprintf("./file2_%s", fh2.Filename))
if ferr != nil {
    fmt.Printf("ä¿å­˜æ–‡ä»¶2å¤±è´¥:", ferr.Error())
}  }
</code></pre></div></div>

<!-- more -->
<p>ä½¿ç”¨curl ä¸Šä¼ æ–‡ä»¶ï¼Œmultipart/form-data</p>

<ol>
  <li>
    <p>ä¸ä½¿ç”¨-Fï¼Œcurlå†…ç½®multipart/form-dataåŠŸèƒ½ï¼›</p>
  </li>
  <li>
    <p>æ–‡ä»¶å†…å®¹ä¸çœŸå®æ•°æ®æ— å…³ï¼Œç”¨abcä»£æ›¿æ•°æ®ï¼Œä¾ç„¶å¯ä»¥ä¸Šä¼ æˆåŠŸï¼›</p>
  </li>
  <li>
    <p>name ä¸ºæœåŠ¡ç«¯è·å–æ–‡ä»¶çš„å­—æ®µï¼›</p>
  </li>
  <li>
    <p>æ¢è¡Œå’Œâ€”çš„æ•°é‡éœ€è¦ä¸€è‡´ã€‚</p>
  </li>
</ol>

<p>curl -H â€œContent-Type: multipart/form-data; boundary=â€”â€”â€”-0x15f0e7eb752â€ â€“data â€œ
â€”â€”â€”â€”0x15f0e7eb752
Content-Disposition: form-data; name=â€fileâ€; filename=â€selfi.jpgâ€
Content-Type: image/png</p>

<p>abc
â€”â€”â€”â€”0x15f0e7eb752â€“
â€œ http://127.0.0.1:1323/upload</p>
:ET