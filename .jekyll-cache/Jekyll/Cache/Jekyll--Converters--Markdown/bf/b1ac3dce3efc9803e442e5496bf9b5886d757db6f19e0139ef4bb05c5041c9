I"¸<p>exec æ‰§è¡Œå‚¨å­˜åœ¨å­—ç¬¦ä¸²æˆ–æ–‡ä»¶ä¸­çš„ Python è¯­å¥ã€‚</p>

<p>è¯­æ³•ï¼šexec(object[, globals[, locals]])</p>

<p>å‚æ•°ï¼š</p>

<p>objectï¼šè¡¨ç¤ºéœ€è¦è¢«æŒ‡å®šçš„Pythonä»£ç </p>

<p>globalsï¼šè¡¨ç¤ºå…¨å±€å‘½åç©ºé—´ï¼ˆå­˜æ”¾å…¨å±€å˜é‡ï¼‰ï¼Œå¦‚æœè¢«æä¾›ï¼Œåˆ™å¿…é¡»æ˜¯ä¸€ä¸ªå­—å…¸å¯¹è±¡ã€‚</p>

<p>localsï¼šè¡¨ç¤ºå½“å‰å±€éƒ¨å‘½åç©ºé—´ï¼ˆå­˜æ”¾å±€éƒ¨å˜é‡ï¼‰ï¼Œå¦‚æœè¢«æä¾›ï¼Œå¯ä»¥æ˜¯ä»»ä½•æ˜ å°„å¯¹è±¡ã€‚å¦‚æœè¯¥å‚æ•°è¢«å¿½ç•¥ï¼Œé‚£ä¹ˆå®ƒå°†ä¼šå–ä¸globalsç›¸åŒçš„å€¼ã€‚</p>

<p>è¿”å›å€¼ï¼šNone</p>

<p>å•è¡Œè¯­å¥
å¤åˆ¶
exec(â€˜print(â€œHello world!â€)â€™)
å¤šè¡Œè¯­å¥
æ³¨ï¼š1.ç”¨ä¸‰å¼•å·æ‹¬èµ·æ¥ï¼›2.æ³¨æ„è¯­å¥çš„æ¢è¡Œç©ºæ ¼</p>

<p>å¤åˆ¶
exec(â€œâ€â€
for i in range(3):
  print(i)
â€œâ€â€)
ä¸‰ä¸ªå‚æ•°
æ³¨æ„å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡çš„å˜åŒ–</p>

<p>å¤åˆ¶
g = {
  â€˜xâ€™: 1,
  â€˜yâ€™: 2
}
l = {}</p>

<p>exec(â€˜â€™â€™
global x,z
x=100
z=200</p>

<p>m=300
â€˜â€™â€™, g, l)</p>

<p>print(g)  # {â€˜xâ€™: 100, â€˜yâ€™: 2,â€™zâ€™:200,â€¦â€¦}
print(l)  # {â€˜mâ€™: 300}
<!-- more -->
execè¯­å¥ç”¨æ¥æ‰§è¡Œå­˜å‚¨åœ¨ä»£ç å¯¹è±¡ã€å­—ç¬¦ä¸²ã€æ–‡ä»¶ä¸­çš„Pythonè¯­å¥ï¼Œevalè¯­å¥ç”¨æ¥è®¡ç®—å­˜å‚¨åœ¨ä»£ç å¯¹è±¡æˆ–å­—ç¬¦ä¸²ä¸­çš„æœ‰æ•ˆçš„Pythonè¡¨è¾¾å¼ï¼Œè€Œcompileè¯­å¥åˆ™æä¾›äº†å­—èŠ‚ç¼–ç çš„é¢„ç¼–è¯‘ã€‚</p>

<p>å½“ç„¶ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨execå’Œevalä¸€å®šè¦æ³¨æ„å®‰å…¨æ€§é—®é¢˜ï¼Œå°¤å…¶æ˜¯ç½‘ç»œç¯å¢ƒä¸­ï¼Œå¯èƒ½ç»™äºˆä»–äººæ‰§è¡Œéæ³•è¯­å¥çš„æœºä¼šã€‚</p>

<p>1.exec
æ ¼å¼ï¼šexec obj</p>

<p>objå¯¹è±¡å¯ä»¥æ˜¯å­—ç¬¦ä¸²ï¼ˆå¦‚å•ä¸€è¯­å¥ã€è¯­å¥å—ï¼‰ï¼Œæ–‡ä»¶å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å·²ç»ç”±compileé¢„ç¼–è¯‘è¿‡çš„ä»£ç å¯¹è±¡ã€‚</p>

<p>ä¸‹é¢æ˜¯ç›¸åº”çš„ä¾‹å­ï¼š</p>

<p>Pythonå¯æ‰§è¡Œå¯¹è±¡ä¹‹execä½¿ç”¨ä¸¾ä¾‹Python</p>
<h1 id="å•è¡Œè¯­å¥å­—ç¬¦ä¸²">å•è¡Œè¯­å¥å­—ç¬¦ä¸²</h1>
<blockquote>
  <blockquote>
    <blockquote>
      <p>exec â€œprint â€˜pythoner.comâ€™â€
pythoner.com</p>
    </blockquote>
  </blockquote>
</blockquote>

<h1 id="å¤šè¡Œè¯­å¥å­—ç¬¦ä¸²">å¤šè¡Œè¯­å¥å­—ç¬¦ä¸²</h1>
<blockquote>
  <blockquote>
    <blockquote>
      <p>exec â€œ"â€for i in range(5):
â€¦   print â€œiter time: %dâ€ % i
â€¦ â€œâ€â€
iter time: 0
iter time: 1
iter time: 2
iter time: 3
iter time: 4</p>
    </blockquote>
  </blockquote>
</blockquote>

<h1 id="å•è¡Œè¯­å¥å­—ç¬¦ä¸²-1">å•è¡Œè¯­å¥å­—ç¬¦ä¸²</h1>
<blockquote>
  <blockquote>
    <blockquote>
      <p>exec â€œprint â€˜pythoner.comâ€™â€
pythoner.com</p>
    </blockquote>
  </blockquote>
</blockquote>

<h1 id="å¤šè¡Œè¯­å¥å­—ç¬¦ä¸²-1">å¤šè¡Œè¯­å¥å­—ç¬¦ä¸²</h1>
<blockquote>
  <blockquote>
    <blockquote>
      <p>exec â€œ"â€for i in range(5):
â€¦   print â€œiter time: %dâ€ % i
â€¦ â€œâ€â€
iter time: 0
iter time: 1
iter time: 2
iter time: 3
iter time: 4
ä»£ç å¯¹è±¡çš„ä¾‹å­æ”¾åœ¨ç¬¬3éƒ¨åˆ†ä¸€èµ·è®²è§£ã€‚</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>2.eval
æ ¼å¼ï¼ševal( obj[, globals=globals(), locals=locals()] )</p>

<p>objå¯ä»¥æ˜¯å­—ç¬¦ä¸²å¯¹è±¡æˆ–è€…å·²ç»ç”±compileç¼–è¯‘è¿‡çš„ä»£ç å¯¹è±¡ã€‚globalså’Œlocalsæ˜¯å¯é€‰çš„ï¼Œåˆ†åˆ«ä»£è¡¨äº†å…¨å±€å’Œå±€éƒ¨åç§°ç©ºé—´ä¸­çš„å¯¹è±¡ï¼Œå…¶ä¸­globalså¿…é¡»æ˜¯å­—å…¸ï¼Œè€Œlocalsæ˜¯ä»»æ„çš„æ˜ å°„å¯¹è±¡ã€‚</p>

<p>ä¸‹é¢ä»ç„¶ä¸¾ä¾‹è¯´æ˜ï¼š</p>

<p>Pythonå¯æ‰§è¡Œå¯¹è±¡ä¹‹evalPython</p>
<blockquote>
  <blockquote>
    <blockquote>
      <p>x = 7
eval( â€˜3 * xâ€™ )
21
1
2
3
x = 7
eval( â€˜3 * xâ€™ )
21
3.compile
æ ¼å¼ï¼šcompile( str, file, type )</p>
    </blockquote>
  </blockquote>
</blockquote>

<p>compileè¯­å¥æ˜¯ä»typeç±»å‹ï¼ˆåŒ…æ‹¬â€™evalâ€™: é…åˆevalä½¿ç”¨ï¼Œâ€™singleâ€™: é…åˆå•ä¸€è¯­å¥çš„execä½¿ç”¨ï¼Œâ€™execâ€™: é…åˆå¤šè¯­å¥çš„execä½¿ç”¨ï¼‰ä¸­å°†stré‡Œé¢çš„è¯­å¥åˆ›å»ºæˆä»£ç å¯¹è±¡ã€‚fileæ˜¯ä»£ç å­˜æ”¾çš„åœ°æ–¹ï¼Œé€šå¸¸ä¸ºâ€ã€‚</p>

<p>compileè¯­å¥çš„ç›®çš„æ˜¯æä¾›ä¸€æ¬¡æ€§çš„å­—èŠ‚ç ç¼–è¯‘ï¼Œå°±ä¸ç”¨åœ¨ä»¥åçš„æ¯æ¬¡è°ƒç”¨ä¸­é‡æ–°è¿›è¡Œç¼–è¯‘äº†ã€‚</p>

<p>è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„compileå’Œæ­£åˆ™è¡¨è¾¾å¼ä¸­ä½¿ç”¨çš„compileå¹¶ä¸ç›¸åŒï¼Œå°½ç®¡ç”¨é€”ä¸€æ ·ã€‚</p>

<p>ä¸‹é¢æ˜¯ç›¸åº”çš„ä¸¾ä¾‹è¯´æ˜ï¼š</p>

<p>Pythonå¯æ‰§è¡Œå¯¹è±¡ä¹‹compilePython</p>
<blockquote>
  <blockquote>
    <blockquote>
      <p>eval_code = compile( â€˜1+2â€™, â€˜â€™, â€˜evalâ€™)
eval_code
&lt;code object <module> at 0142ABF0, file "", line 1&gt;
eval(eval_code)</module></p>
    </blockquote>
  </blockquote>
</blockquote>

<blockquote>
  <blockquote>
    <blockquote>
      <p>single_code = compile( â€˜print â€œpythoner.comâ€â€™, â€˜â€™, â€˜singleâ€™ )
single_code
&lt;code object <module> at 01C68848, file "", line 1&gt;
exec(single_code)
pythoner.com</module></p>
    </blockquote>
  </blockquote>
</blockquote>

<blockquote>
  <blockquote>
    <blockquote>
      <p>exec_code = compile( â€œ"â€for i in range(5):
â€¦   print â€œiter time: %dâ€ % iâ€â€â€, â€˜â€™, â€˜execâ€™ )
exec_code
&lt;code object <module> at 01C68968, file "", line 1&gt;
exec(exec_code)
iter time: 0
iter time: 1
iter time: 2
iter time: 3
iter time: 4</module></p>
    </blockquote>
  </blockquote>
</blockquote>

<blockquote>
  <blockquote>
    <blockquote>
      <p>eval_code = compile( â€˜1+2â€™, â€˜â€™, â€˜evalâ€™)
eval_code
&lt;code object <module> at 0142ABF0, file "", line 1&gt;
eval(eval_code)
3</module></p>
    </blockquote>
  </blockquote>
</blockquote>

<blockquote>
  <blockquote>
    <blockquote>
      <p>single_code = compile( â€˜print â€œpythoner.comâ€â€™, â€˜â€™, â€˜singleâ€™ )
single_code
&lt;code object <module> at 01C68848, file "", line 1&gt;
exec(single_code)
pythoner.com</module></p>
    </blockquote>
  </blockquote>
</blockquote>

<blockquote>
  <blockquote>
    <blockquote>
      <p>exec_code = compile( â€œ"â€for i in range(5):
â€¦   print â€œiter time: %dâ€ % iâ€â€â€, â€˜â€™, â€˜execâ€™ )
exec_code
&lt;code object <module> at 01C68968, file "", line 1&gt;
exec(exec_code)
iter time: 0
iter time: 1
iter time: 2
iter time: 3
iter time: 4</module></p>
    </blockquote>
  </blockquote>
</blockquote>

<p>http://www.360doc.com/content/19/0615/08/58190678_842550014.shtml</p>

<p>https://www.runoob.com/python/python-func-exec.html</p>

<p>https://blog.csdn.net/ipi715718/article/details/81534195</p>
:ET