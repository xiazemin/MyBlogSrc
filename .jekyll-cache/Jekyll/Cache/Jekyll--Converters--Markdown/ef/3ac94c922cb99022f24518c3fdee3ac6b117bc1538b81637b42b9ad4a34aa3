I"Ù<p>exitå‘½ä»¤ç”¨äºé€€å‡ºå½“å‰shellï¼Œåœ¨shellè„šæœ¬ä¸­å¯ä»¥ç»ˆæ­¢å½“å‰è„šæœ¬æ‰§è¡Œã€‚</p>

<p>å¸¸ç”¨å‚æ•°
æ ¼å¼ï¼šexit n</p>

<p>é€€å‡ºã€‚è®¾ç½®é€€å‡ºç ä¸ºnã€‚ï¼ˆCause the shell to exit with a status of n.ï¼‰</p>

<p>æ ¼å¼ï¼šexit</p>

<p>é€€å‡ºã€‚é€€å‡ºç ä¸å˜ï¼Œå³ä¸ºæœ€åä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºç ã€‚ï¼ˆIf n is omitted, the exit status is that of the  last  command executed. ï¼‰</p>

<p>æ ¼å¼ï¼š$?</p>

<p>ä¸Šä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºç ã€‚</p>

<p>æ ¼å¼ï¼štrap â€œcommandsâ€ EXIT</p>

<p>é€€å‡ºæ—¶æ‰§è¡ŒcommandsæŒ‡å®šçš„å‘½ä»¤ã€‚ï¼ˆ A trap on EXIT is executed before the shell terminates.ï¼‰</p>

<p>é€€å‡ºç ï¼ˆexit statusï¼Œæˆ–exit codeï¼‰çš„çº¦å®šï¼š</p>

<p>0è¡¨ç¤ºæˆåŠŸï¼ˆZero - Successï¼‰</p>

<p>é0è¡¨ç¤ºå¤±è´¥ï¼ˆNon-Zero  - Failureï¼‰</p>

<p>2è¡¨ç¤ºç”¨æ³•ä¸å½“ï¼ˆIncorrect Usageï¼‰</p>

<p>127è¡¨ç¤ºå‘½ä»¤æ²¡æœ‰æ‰¾åˆ°ï¼ˆCommand Not Foundï¼‰</p>

<p>126è¡¨ç¤ºä¸æ˜¯å¯æ‰§è¡Œçš„ï¼ˆNot an executableï¼‰</p>

<blockquote>
  <p>=128 ä¿¡å·äº§ç”Ÿ</p>
</blockquote>

<p>man 3 exit å†™é“
The C standard specifies two constants, EXIT_SUCCESS and EXIT_FAILURE, that may be passed to exit() to indicate
successful or unsuccessful termination, respectively.</p>

<p>ä»¥ä¸‹æ‘˜è‡ª/usr/include/stdlib.h</p>

<p>Cä»£ç   æ”¶è—ä»£ç 
#define EXIT_FAILURE    1       /* Failing exit status.  <em>/<br />
#define EXIT_SUCCESS    0       /</em> Successful exit status.  */</p>

<p>BSDè¯•å›¾å¯¹é€€å‡ºç æ ‡å‡†åŒ–ã€‚</p>

<p>man 3 exit å†™é“
BSD has attempted to standardize exit codes; see the file <sysexits.h>.</sysexits.h></p>

<p>ä»¥ä¸‹æ‘˜è‡ª/usr/include/sysexits.h</p>

<p>Cä»£ç   æ”¶è—ä»£ç 
#define EX_OK           0       /* successful termination */</p>

<p>#define EX__BASE        64      /* base value for error messages */</p>

<p>#define EX_USAGE        64      /* command line usage error <em>/<br />
#define EX_DATAERR      65      /</em> data format error <em>/<br />
#define EX_NOINPUT      66      /</em> cannot open input <em>/<br />
#define EX_NOUSER       67      /</em> addressee unknown <em>/<br />
#define EX_NOHOST       68      /</em> host name unknown <em>/<br />
#define EX_UNAVAILABLE  69      /</em> service unavailable <em>/<br />
#define EX_SOFTWARE     70      /</em> internal software error <em>/<br />
#define EX_OSERR        71      /</em> system error (e.g., canâ€™t fork) <em>/<br />
#define EX_OSFILE       72      /</em> critical OS file missing <em>/<br />
#define EX_CANTCREAT    73      /</em> canâ€™t create (user) output file <em>/<br />
#define EX_IOERR        74      /</em> input/output error <em>/<br />
#define EX_TEMPFAIL     75      /</em> temp failure; user is invited to retry <em>/<br />
#define EX_PROTOCOL     76      /</em> remote error in protocol <em>/<br />
#define EX_NOPERM       77      /</em> permission denied <em>/<br />
#define EX_CONFIG       78      /</em> configuration error */</p>

<p>#define EX__MAX 78      /* maximum listed value */</p>

<!-- more -->
<p>é€€å‡ºç çš„å€¼	å«ä¹‰	ä¾‹å­	æ³¨é‡Š
1	é€šç”¨é”™è¯¯	let â€œvar1 = 1/0â€	å„ç§å„æ ·çš„é”™è¯¯éƒ½å¯èƒ½ä½¿ç”¨è¿™ä¸ªé€€å‡ºç , æ¯”å¦‚â€é™¤0é”™è¯¯â€
2	shellå†…å»ºå‘½ä»¤ä½¿ç”¨é”™è¯¯(Bashæ–‡æ¡£ä¸Šæœ‰è¯´æ˜)	 	å¾ˆå°‘çœ‹åˆ°, é€šå¸¸æƒ…å†µä¸‹é€€å‡ºç éƒ½ä¸º1
126	å‘½ä»¤è°ƒç”¨ä¸èƒ½æ‰§è¡Œ	 	ç¨‹åºæˆ–å‘½ä»¤çš„æƒé™æ˜¯ä¸å¯æ‰§è¡Œçš„
127	â€œcommand not foundâ€	 	ä¼°è®¡æ˜¯$PATHä¸å¯¹, æˆ–è€…æ˜¯æ‹¼å†™é”™è¯¯
128	exit çš„å‚æ•°é”™è¯¯	exit 3.14159	exitåªèƒ½ä»¥æ•´æ•°ä½œä¸ºå‚æ•°, èŒƒå›´æ˜¯0 - 255(è§è„šæ³¨)
128+n	ä¿¡å·â€nâ€çš„è‡´å‘½é”™è¯¯	kill -9 è„šæœ¬çš„$PPID	$? è¿”å›137(128 + 9)
130	ç”¨Control-Cæ¥ç»“æŸè„šæœ¬	 	Control-Cæ˜¯ä¿¡å·2çš„è‡´å‘½é”™è¯¯, (130 = 128 + 2, è§ä¸Šè¾¹)
255*	è¶…å‡ºèŒƒå›´çš„é€€å‡ºçŠ¶æ€	exit -1	exitå‘½ä»¤åªèƒ½å¤Ÿæ¥å—èŒƒå›´æ˜¯0 - 255çš„æ•´æ•°ä½œä¸ºå‚æ•°
é€šè¿‡ä¸Šé¢çš„è¡¨, æˆ‘ä»¬äº†è§£åˆ°, é€€å‡ºç 1 - 2, 126 - 165, å’Œ255 [1] éƒ½å…·æœ‰ç‰¹æ®Šçš„å«ä¹‰, å› æ­¤åº”è¯¥é¿å…ä½¿ç”¨ç”¨æˆ·æŒ‡å®šçš„é€€å‡ºå‚æ•°. å¦‚æœè„šæœ¬ä½¿ç”¨exit 127ä½œä¸ºé€€å‡ºè¯­å¥, é‚£ä¹ˆå¯èƒ½å°±ä¼šåœ¨æ•…éšœè¯Šæ–­çš„æ—¶å€™äº§ç”Ÿæ··æ·†(å¦‚ä½•åˆ¤æ–­è¿™æ˜¯ç”±â€command not foundâ€å¼•èµ·çš„, è¿˜æ˜¯ç”±ç”¨æˆ·å®šä¹‰å¼•èµ·çš„?). ç„¶è€Œ, è®¸å¤šè„šæœ¬ä½¿ç”¨exit 1ä½œä¸ºé€šç”¨çš„è¿”å›é”™è¯¯å€¼. å› ä¸ºé€€å‡ºç 1èƒ½å¤Ÿè¡¨ç¤ºçš„é”™è¯¯å¤ªå¤šäº†, ä¸è¿‡è¿™ä¹ˆåš, å¯¹äºè°ƒè¯•æ¥è¯´, ä¹Ÿèµ·ä¸åˆ°ä»»ä½•å¸®åŠ©çš„ä½œç”¨.</p>

<p>å…¶å®æ—©å°±æœ‰äººå¯¹é€€å‡ºçŠ¶æ€å€¼è¿›è¡Œäº†ç³»ç»Ÿçš„åˆ†ç±»(è¯·å‚è€ƒ/usr/include/sysexits.h), ä¸è¿‡è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸ºC/C++ç¨‹åºå‘˜å‡†å¤‡çš„. å…¶å®shellè„šæœ¬ä¹Ÿéœ€è¦è¿™æ ·ä¸€ä¸ªç±»ä¼¼çš„æ ‡å‡†. æ‰€ä»¥æœ¬æ–‡ä½œè€…å‘¼åé™åˆ¶ä½¿ç”¨ç”¨æˆ·å®šä¹‰çš„é€€å‡ºç , å°¤å…¶æ˜¯èŒƒå›´64 - 113(è¿˜æœ‰0, è¡¨ç¤ºæˆåŠŸ), è¿™ä¹ˆåš, å°±å¯ä»¥å’ŒC/C++æ ‡å‡†ä¿æŒä¸€è‡´. è¿™æ ·æˆ‘ä»¬å°±æœ‰äº†50ä¸ªå¯ç”¨çš„é€€å‡ºç , è€Œä¸”éå¸¸ä¾¿äºæ•…éšœè¯Šæ–­.
åªæœ‰åœ¨Bashæˆ–shæç¤ºç¬¦ä¸‹, å½“shellè„šæœ¬é€€å‡ºå, åœ¨å‘½ä»¤è¡Œä¸Šä½¿ç”¨$?æ‰ä¼šå¾—åˆ°ä¸ä¸Šè¡¨ç›¸ä¸€è‡´çš„ç»“æœ. åœ¨æŸäº›æƒ…å†µä¸‹, è¿è¡ŒC-shellæˆ–è€…tcshå¯èƒ½ä¼šç»™å‡ºä¸åŒçš„å€¼.
è¶…å‡ºèŒƒå›´çš„é€€å‡ºå€¼å¯èƒ½ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„é€€å‡ºç . å¦‚æœé€€å‡ºå€¼æ¯”255å¤§, é‚£ä¹ˆé€€å‡ºç å°†ä¼šå–256çš„æ¨¡. ä¸¾ä¸ªä¾‹å­, exit 3809çš„é€€å‡ºç å°†æ˜¯225(3809 % 256 = 225).</p>
:ET