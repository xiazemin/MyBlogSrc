I"­<p>è°ƒç”¨Activateæ–¹æ³•å¯åŠ¨httpmockç¯å¢ƒ
é€šè¿‡httpmock.RegisterResponderæ–¹æ³•è¿›è¡Œmockè§„åˆ™æ³¨å†Œã€‚
è¿™æ—¶å€™å†é€šè¿‡http clientå‘èµ·çš„è¯·æ±‚å°±éƒ½ä¼šè¢«httpmockæ‹¦æˆªï¼Œå¦‚æœåŒ¹é…åˆ°åˆšåˆšæ³¨å†Œçš„è§„åˆ™å°±ä¼šæŒ‰ç…§æ³¨å†Œçš„å†…å®¹è¿”å›å¯¹åº”responseã€‚ â€” è¿™é‡Œæ„Ÿè§‰httpmockæœ‰ä¸€ç‚¹ä¸å¤ªå¥½ç”¨ï¼Œé‚£å°±æ˜¯å¦‚æœè¯·æ±‚æ²¡æœ‰å‘½ä¸­è§„åˆ™å°±ä¼šé”™è¯¯è¿”å›ï¼Œè€Œä¸æ˜¯èµ°çœŸå®è¯·æ±‚ã€‚éœ€è¦æŠŠæ•´ä¸ªè¿‡ç¨‹æ¶‰åŠåˆ°çš„æ‰€æœ‰è¯·æ±‚éƒ½æ³¨å†Œä¸Šå»ã€‚
åœ¨deferé‡Œé¢è°ƒç”¨DeactivateAndResetç»“æŸmock
<!-- more -->
httpmockåŸç†è§£æ
Activateå‡½æ•°ä¸­é€šè¿‡http.DefaultTransport = DefaultTransportä¿®æ”¹äº†æ‰€æœ‰é€šè¿‡http/netåŒ…å‘é€çš„è¯·æ±‚çš„transport
DefaultTransporté€šè¿‡è°ƒç”¨NewMockTransportæ–¹æ³•å®ä¾‹åŒ–äº†ä¸€ä¸ªMockTransportæ¥ä»£æ›¿DefaultTransportã€‚è¿™ä¸ªMockTransportå®ç°äº†httpåŒ…ä¸­çš„RoundTripperæ¥å£ã€‚transportæºç 
å†æ¥çœ‹ä¸€ä¸‹MockTransportçš„ç»“æ„ä½“å’ŒRegisterResponderæ³¨å†Œå‡½æ•°ï¼š</p>
:ET