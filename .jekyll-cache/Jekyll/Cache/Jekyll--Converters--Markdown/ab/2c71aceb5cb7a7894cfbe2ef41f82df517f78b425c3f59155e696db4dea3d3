I"“<p>IntelliJ IDEA,å¯æƒœæ²¡æœ‰remote debug
åŸºæœ¬æƒ³æ³•å°±æ˜¯ï¼šåœ¨é›†æˆå¼€å‘ç¯å¢ƒä¸‹å†™ä»£ç æ¯”è¾ƒè½»æ¾ï¼Œèƒ½å¤Ÿè‡ªåŠ¨å®Œè¡¥å®šä½ä»€ä¹ˆçš„ï¼Œæ„ˆå‘æ£€æŸ¥é€šè¿‡äº†ä»¥åï¼Œå†åœ¨ç‰¹æƒå®¹å™¨é‡Œç¼–è¯‘æµ‹è¯•è¿è¡Œï¼Œç”šè‡³ï¼Œé€šè¿‡IDEAè¿œç¨‹è°ƒè¯•ï¼Œå°±æ˜¯gdbserveré‚£ä¸€å¥—ã€‚</p>

<p>æƒ³å¾—ç®€å•ï¼Œå®é™…åšäº†ä¸€ä¸‹ï¼Œå‡ºäº†gdb remoteä»¥å¤–éƒ½è¿˜è¡Œï¼Œä½†æ˜¯ä¹Ÿæœ‰äº›ä¸çˆ½çš„åœ°æ–¹ã€‚
Remote gdbå‘¢ï¼Ÿ æ²¡æƒ³åˆ°çš„æ˜¯ï¼Œ IntelliJ IDEAè™½ç„¶èƒ½è½»æ¾çš„è°ƒè¯•æœ¬åœ°çš„Goä»£ç ï¼Œä½†ä¸èƒ½åƒJavaé‚£æ ·è¿œç¨‹è°ƒè¯•åˆ°åˆ«çš„æœºå™¨é‡Œçš„ã€‚</p>

<p>æš‚æ—¶ä¹Ÿæ²¡æ‰¾åˆ°è¿œç¨‹gdbæ’ä»¶ã€‚è¿˜æ˜¯æ‰‹åŠ¨gdbå‘½ä»¤è¡Œæç®—äº†ã€‚
<!-- more -->
golandæ˜¯åŸºäºintellij IDEAæ¨å‡ºçš„å¼€å‘goçš„IDEï¼Œæ‰€ä»¥å¾ˆå¤šä¹‹å‰Intellijçš„ä½¿ç”¨ä¹ æƒ¯å¯ä»¥ä¿ç•™ä¸‹æ¥ï¼Œå®å±developerçš„ç¦éŸ³ï¼Œä»Šå¤©é‡åˆ°ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œå°±æ˜¯æˆ‘è¦è°ƒè¯•è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„goä»£ç ï¼Œè¿œç¨‹ç³»ç»Ÿæ˜¯ubuntuæˆ–è€…centosï¼Œæ€»ä¹‹æ˜¯æ²¡æœ‰å›¾å½¢ç•Œé¢çš„ï¼Œæˆ‘æƒ³åœ¨æœ¬åœ°è°ƒè¯•è¯¥æ€ä¹ˆåŠå‘¢ï¼Œç­”æ¡ˆæ˜¯ä½¿ç”¨Delve è¿™ä¸ªä¸“é—¨çš„è°ƒè¯•å·¥å…·ã€‚</p>

<p>step1 è¿œç¨‹ä¸»æœº
å®‰è£…delveï¼Œé¡¹ç›®åœ°å€ï¼šhttps://github.com/derekparker/delve
æŒ‰ç…§å®˜æ–¹çš„æç¤ºå®‰è£…å³å¯ï¼ˆæ³¨æ„å› ä¸ºGFWç­‰ä½ æ‡‚å¾—çš„åŸå› ï¼Œç½‘ç»œä¸‹è½½å¯èƒ½è¾ƒæ…¢æˆ–ä¸å¯ç”¨ï¼Œè¯·è‡ªè¡Œä½¿ç”¨æŸé«˜ç§‘æŠ€è½¯ä»¶ï¼Œå¦‚ss+proxychainsç­‰å·¥å…·ï¼‰ã€‚</p>

<p>ä¸‹è½½å¹¶å®‰è£…å®Œæˆåè¾“å…¥dlvå°±ä¼šçœ‹åˆ°å¸®åŠ©ä¿¡æ¯ï¼š</p>

<p>step2 æœ¬åœ°
æœ¬åœ°è¿›å…¥IDEï¼Œåœ¨è¦è°ƒè¯•çš„åœ°æ–¹æ‰“ä¸Šæ–­ç‚¹ï¼Œç„¶å
runâ€“debugâ€“eidit configurationsâ€“&gt;æ·»åŠ remoteä¸»æœºä¿¡æ¯ã€‚
<img src="https://xiazemin.github.io/MyBlog/img/goremote.webp" /></p>

<p>step3 è¿œç«¯
å¦‚æˆ‘è¦å¯¹ main.go è¿™ä¸ªé¡¹ç›®debugï¼Œå¯¹mainè¿›è¡Œç¼–è¯‘åï¼Œå¯ä»¥ç›´æ¥è¿è¡Œ
dlv â€“listen=:2345 â€“headless=true â€“api-version=2 exec ./main
ç„¶åæœ¬åœ°å°±æ”¶åˆ°äº†è°ƒè¯•ä¿¡æ¯</p>

<p>go get -u github.com/go-delve/delve/cmd/dlv -v -insecure</p>

<p>æˆ–</p>

<p>git clone https://github.com/go-delve/delve.git $GOPATH/src/github.com/go-delve/delve
cd $GOPATH/src/github.com/go-delve/delve
make install</p>

<p>ä¸Šé¢çš„éƒ½ä¸è¡Œäº†,æˆ‘ç”¨ä»¥ä¸‹å‘½ä»¤æˆåŠŸäº†</p>

<p>git clone https://github.com/go-delve/delve.git $GOPATH/src/github.com/go-delve/delve
cd $GOPATH
go install github.com/go-delve/delve/cmd/dlv</p>

<p>å¯ä»¥ç”¨ $GOPATH/bin/dlv æ‰§è¡Œ ä¹Ÿå¯ä»¥å…ˆå°†dlvæ”¾å…¥PATHä¸­</p>

<p>ln -s $GOPATH/bin/dlv /usr/local/bin/dlv</p>

<p>ä¹‹åå¯ä»¥ç›´æ¥ç”¨ dlv ä¾‹å¦‚ dlv version</p>

<p>æœåŠ¡ç«¯å¯åŠ¨goç¨‹åº
ç¤ºä¾‹å·¥ç¨‹
ç¤ºä¾‹æºä»£ç 
$GOPATH/src/mytest/main.go</p>

<p>package main</p>

<p>import (
	â€œfmtâ€
	â€œtimeâ€
)</p>

<p>const myDate = â€œ2019-05-30 15:13â€</p>

<p>var (
	Aa = 81
	Bb = 82
)</p>

<p>func main() {
	fmt.Println(â€œmyDate:â€, myDate)
	func1()
}
func func1() {
	a := 61
	b := 62
	i := 0
	for true {
		fmt.Println(â€œfmt:â€, i, a, b, Aa, Bb)
		i++
		a += 2
		Aa += 3
		time.Sleep(time.Second)
	}
}</p>

<p>ç¼–è¯‘goç¨‹åº
go install mytest</p>

<p>è¿è¡Œgoç¨‹åº
nohup bin/mytestÂ Â» out.log &amp;</p>

<p>æ˜¾ç¤º</p>

<p>[1] 7148
[root@localhost go]# nohup: ignoring input and redirecting stderr to stdout
1
2
æ•°å­— 7148 å°±æ˜¯ pid</p>

<p>æ­¤æ—¶å¯ä»¥ctrl+cé€€å‡º, ç»§ç»­åé¢çš„æ“ä½œ</p>

<p>ctrl+cåå¦‚æœå‡ºç°äº† [1]+ Exit ä»£ç ,è¯´æ˜goç¨‹åºç»ˆæ­¢äº†, å¯èƒ½æ˜¯goä»£ç é”™è¯¯</p>

<p>dlv attach goç¨‹åº
dlv attach 7148 â€“headless â€“listen=:2345 â€“api-version=2 â€“accept-multiclient</p>

<p>GoLandé…ç½®
Main menu-&gt;Run-&gt;Edit Configurationsâ€¦</p>

<p>-&gt; Go Remote
Hostæ”¹æˆæœåŠ¡å™¨ip</p>

<p>Port: 2345</p>

<p>ä¿å­˜ å Debug go remote</p>

<p>æ­¤æ—¶å¯ä»¥è®¾ç½®æ–­ç‚¹, åœ¨ Variables é¢æ¿å¯ä»¥æŸ¥çœ‹å˜é‡, å¯ä»¥ç‚¹å‡»<strong>+å¢åŠ Watch</strong></p>

<p>ç»ˆæ­¢dlvå’Œgoç¨‹åº
dlvä¸ç»ˆæ­¢, åˆ™ goç¨‹åºä¹Ÿæ— æ³•ç»ˆæ­¢
è€Œdlvåªèƒ½é€šè¿‡ç»ˆæ­¢è¿›ç¨‹çš„æ–¹å¼ç»ˆæ­¢æ‰</p>

<p>kill -9 <code class="language-plaintext highlighter-rouge">ps -ef | grep "dlv|mytest" -E | awk '{print $2}'</code>
1
TODO
GoLand Consoleæ— æ³•æ˜¾ç¤ºfmt.printlnçš„ä¿¡æ¯, åªèƒ½ç»§ç»­åœ¨shellä¸­æŸ¥çœ‹bin/mytestè¾“å‡º</p>
:ET