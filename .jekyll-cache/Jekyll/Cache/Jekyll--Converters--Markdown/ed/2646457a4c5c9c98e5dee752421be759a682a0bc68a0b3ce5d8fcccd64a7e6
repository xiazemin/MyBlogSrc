I"—<p>äºŒè€…éƒ½åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œä½†æ˜¯å®ƒä»¬çš„è¡Œä¸ºä¸åŒï¼Œé€‚ç”¨äºä¸åŒçš„ç±»å‹ã€‚</p>

<p>new(T) ä¸ºæ¯ä¸ªæ–°çš„ç±»å‹Tåˆ†é…ä¸€ç‰‡å†…å­˜ï¼Œåˆå§‹åŒ–ä¸º 0 å¹¶ä¸”è¿”å›ç±»å‹ä¸º*Tçš„å†…å­˜åœ°å€ï¼šè¿™ç§æ–¹æ³• è¿”å›ä¸€ä¸ªæŒ‡å‘ç±»å‹ä¸º Tï¼Œå€¼ä¸º 0 çš„åœ°å€çš„æŒ‡é’ˆï¼Œå®ƒé€‚ç”¨äºå€¼ç±»å‹å¦‚æ•°ç»„å’Œç»“æ„ä½“ï¼›å®ƒç›¸å½“äº &amp;T{}ã€‚
make(T) è¿”å›ä¸€ä¸ªç±»å‹ä¸º T çš„åˆå§‹å€¼ï¼Œå®ƒåªé€‚ç”¨äº3ç§å†…å»ºçš„å¼•ç”¨ç±»å‹ï¼šåˆ‡ç‰‡ã€map å’Œ channel
æ¢è¨€ä¹‹ï¼Œnew å‡½æ•°åˆ†é…å†…å­˜ï¼Œmake å‡½æ•°åˆå§‹åŒ–ï¼›
<!-- more -->
newè¿”å›ä¸€ä¸ªå˜é‡çš„æŒ‡é’ˆï¼Œä½†æ˜¯è¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ç©ºï¼Œä½ ä¸å¯ä»¥ç›´æ¥å¯¹è¯¥æŒ‡é’ˆè¿›è¡Œæ“ä½œï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œé™¤éä½ å°†è¯¥æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªè¯¥ç±»å‹å˜é‡çš„åœ°å€ã€‚
makeè¿”å›ä¸€ä¸ªè¯¥ç±»å‹çš„å˜é‡ï¼Œä»¥åˆ‡ç‰‡å˜é‡ä¸ºä¾‹ï¼Œä¸Šé¢æåˆ°ï¼Œmakeé€‚ç”¨äºåˆ›å»ºåˆ‡ç‰‡ã€mapå’Œchannel,ä½†newä¹Ÿå¯ä»¥åˆ›å»º</p>

<p>package main</p>

<p>import â€œfmtâ€</p>

<p>func main() {
	//ä½¿ç”¨makeåˆ›å»ºåˆ‡ç‰‡ï¼Œè¿”å›çš„æ˜¯å˜é‡æœ¬èº«
	s1 := make([]int,5,10)
	fmt.Printf(â€œuse make create slise type %T value %v \nâ€,s1,s1)
	s1[0] = 123
	s1[4] = 321
	fmt.Printf(â€œmake s1 type %T value %v \nâ€,s1,s1)</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//# ä½¿ç”¨new åˆ›å»ºåˆ‡ç‰‡,è¿”å›çš„æ˜¯åˆ‡ç‰‡å˜é‡çš„æŒ‡é’ˆ
s2 := new([]int)
fmt.Printf("use new create slise type %T value %v \n",s2,s2)
fmt.Printf("new s2 type %T value %v \n",*s2,*s2)
// æƒ³è¦èµ‹å€¼çš„è¯éœ€è¦ä½¿ç”¨*è§£å¼•ç”¨
// è¿™é‡Œè™½ç„¶ä¸æŠ¥è¯­æ³•é”™è¯¯ï¼Œä½†æ˜¯å¦‚æœå°è¯•ç›´æ¥ä½¿ç”¨(*s2)[0] = 123çš„è¯ä¼šæœ‰è¿è¡Œæ—¶é”™è¯¯ï¼Œ
// panic: runtime error: index out of range
s2 = &amp;s1 //éœ€è¦å°†å˜é‡æŒ‡é’ˆæŒ‡å‘ä¸€ä¸ªè¯¥ç±»å‹å˜é‡çš„åœ°å€
(*s2)[0] = 123
(*s2)[4] = 3211
fmt.Printf("new s2 type %T value %v \n",s2,s2)
//s2çš„ä¿®æ”¹ä¹Ÿä¼šå½±å“s1
fmt.Printf("s1 type %T value %v \n",s1,s1)


m1 := make(map[string]string)
m1["name"] = "yangyanxing"
m1["age"] = "30"
fmt.Printf("m1 use make create type:%T value %v \n",m1,m1)

m2 := new(map[string]string)
fmt.Printf("m2 use new create type:%T value %v \n",m2,m2)
//ç›´æ¥èµ‹å€¼ä¼šæŠ¥ panic: assignment to entry in nil map
m2 = &amp;m1
(*m2)["name"] = "fan"
//å¯¹m2çš„ä¿®æ”¹ä¹Ÿä¼šå½±å“åˆ°m1
fmt.Printf("after m2 change m1 value is %v",m1)
</code></pre></div></div>

<p>}</p>

<p>mapçš„åˆå§‹åŒ–
mapæœ‰ä»¥ä¸‹ä¸¤ç§åˆå§‹åŒ–æ–¹æ³•</p>

<p>ä½¿ç”¨makeå‡½æ•°
ç›´æ¥ä½¿ç”¨mapåˆå§‹åŒ–</p>

<p>package main</p>

<p>import â€œfmtâ€</p>

<p>func main() {
	//ä½¿ç”¨makeåˆå§‹åŒ–map
	mp2 := make(map[string]string)
	mp2[â€œnameâ€]  = â€œyangyanxingâ€
	mp2[â€œageâ€] = â€œ18â€
	fmt.Println(â€œm2 address â€œ,&amp;mp2)
	// out:m2 address  &amp;map[name:yangyanxing age:18]</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mp3 := map[string]int{} //è¿™é‡Œè¦æœ‰{},èŠ±æ‹¬å·é‡Œå¦‚æœæ²¡æœ‰å†…å®¹åˆ™è¯´æ˜åˆå§‹åŒ–äº†ä¸€ä¸ªç©ºå­—å…¸
mp3["yang"] = 18
mp3["fan"] = 20
fmt.Println(mp3)
//out:map[yang:18 fan:20]

mp4 := map[string]int{
	"yang":20,
	"fan":21, //å³ä½¿æ˜¯æœ€åä¸€ä¸ªä¹Ÿè¦æœ‰é€—å·
}
fmt.Println(mp4)
//out:map[yang:20 fan:21]

mp5 := map[string]int{"yang":30} //å†™åœ¨åŒä¸€è¡Œåˆ™ä¸ç”¨åŠ é€—å·
fmt.Println(mp5)
//out: map[yang:30]

mp6 := make(map[string]int,1) //è¿˜å¯ä»¥ç»™mapåŠ ä¸€ä¸ªå®¹é‡
mp6["yang"] = 30
fmt.Println("mp6 lens is ",len(mp6),"address:",&amp;mp6)
//out:mp6 lens is  1 address: &amp;map[yang:30]
mp6["fan"] = 31
fmt.Println("mp6 lens is ",len(mp6),"address:",&amp;mp6)
//out:mp6 lens is  2 address: &amp;map[yang:30 fan:31]

//ä¹Ÿå¯ä»¥ä½¿ç”¨new,ä½†æ˜¯ä¸å¯ä»¥ç›´æ¥å¯¹å…¶è¿›è¡Œèµ‹å€¼,å› ä¸ºæ­¤æ—¶å®ƒè¿”å›çš„æ˜¯ä¸€ä¸ªç©ºæŒ‡é’ˆ
//éœ€è¦æŒ‡å‘ä¸€ä¸ªè¯¥ç±»å‹çš„å˜é‡åœ°å€ä»¥åæ‰å¯ä»¥è¿›è¡Œæ“ä½œ
mp7 := new(map[string]int)
fmt.Println(mp7)
//out:&amp;map[]

//(*mp7)["yang"] = 100 //ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯
mp7 = &amp;mp6
//mp7["fan"] = 1000 //ä¹Ÿä¸å¯ä»¥ç›´æ¥ä½¿ç”¨mp7,éœ€è¦ä½¿ç”¨* å…ˆè§£å¼•ç”¨
(*mp7)["yang"] = 100 //è¿™æ—¶å°±ä¸ä¼šæŠ¥è¿è¡Œæ—¶é”™è¯¯

fmt.Println(mp7)
//out:&amp;map[yang:100 fan:31]
</code></pre></div></div>

<p>}</p>

<p>åŒæ ·å¯ä»¥é€šè¿‡makeå’Œåˆ‡ç‰‡æœ¬èº«è¿›è¡Œåˆå§‹åŒ–
æ•°ç»„ä¸èƒ½ä½¿ç”¨makeåˆå§‹åŒ–,ä½†æ˜¯å¯ä»¥ä½¿ç”¨newåˆå§‹åŒ–
package main</p>

<p>import â€œfmtâ€</p>

<p>type person struct {
	name string
	age int
}</p>

<p>func main() {</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fmt.Println("æ•°ç»„çš„åˆå§‹åŒ–")

//å£°æ˜å¹¶åˆå§‹åŒ–ä¸€ä¸ªç©ºæ•°ç»„,é‡Œé¢çš„å…ƒç´ å€¼ä¸ºç±»å‹çš„é›¶å€¼
arr1 := [2]int{}
fmt.Println(arr1) //out: [0 0]

//åˆå§‹åŒ–æ—¶å°†å…ƒç´ å€¼å†™ä¸Š
arr2 := [2]int{1,3}
fmt.Println(arr2) //out: [1 3]
//åªå†™ä¸€ä¸ª,ä¸å†™çš„æ˜¯é›¶å€¼
arr3 := [2]int{1}
fmt.Println(arr3) //out: [1 0]

//arr4 := make([2]int) //æ•°ç»„ä¸èƒ½ä½¿ç”¨make
var arr5 [2]int
arr5[0] = 100
fmt.Println(arr5)//[100 0]

//ä¸æŒ‡å®šæ•°ç»„å¤§å°,ä½¿ç”¨... ä¸‰ç‚¹å·è®©å…¶è‡ªåŠ¨å±•å¼€è®¡ç®—
arr6 := [...]int{2,4,6,8}
fmt.Println(arr6,len(arr6))//out: [2 4 6 8] 4

//ä½¿ç”¨newåˆ›å»ºä¸€ä¸ªæ•°ç»„,å¾—åˆ°çš„æ˜¯ä¸€ä¸ªæŒ‡é’ˆ
arr7 := new([3]int)
fmt.Println(arr7)//out: &amp;[0 0 0]
//å¯ä»¥ç›´æ¥å¯¹æŒ‡é’ˆè¿›è¡Œæ“ä½œ
arr7[0] = 3
//å’Œä½¿ç”¨*è§£å¼•ç”¨ä½œç”¨ä¸€æ ·
(*arr7)[1] = 4
fmt.Println(arr7) //out: &amp;[3 4 0]
</code></pre></div></div>

<p>}</p>

<p>ç»“æ„ä½“ä¸èƒ½ä½¿ç”¨make,éœ€è¦ä½¿ç”¨newå’Œç»“æ„ä½“æœ¬èº«
package main</p>

<p>import â€œfmtâ€</p>

<p>type person struct {
	name string
	age int
}</p>

<p>func main() {</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fmt.Println("ç»“æ„ä½“çš„åˆå§‹åŒ–")
//ä½¿ç”¨new,è¿”å›ç»“æ„ä½“æŒ‡é’ˆ
stru1 := new(person)
fmt.Println(stru1)//out &amp;{ 0} ,é»˜è®¤æ˜¯å­—æ®µçš„é›¶å€¼
//å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸ªæŒ‡é’ˆæ¥æ“ä½œå˜é‡
//å’Œä½¿ç”¨*è§£å¼•ç”¨æ•ˆæœä¸€æ ·
stru1.name = "yangyanxing"
(*stru1).age = 18
fmt.Println(stru1,*stru1) //&amp;{yangyanxing 18} {yangyanxing 18}

//åªæŒ‡å®šä¸€ä¸ªå­—æ®µ,æ²¡æœ‰æŒ‡å®šçš„é»˜è®¤é›¶å€¼
stru2 := person{name:"fan"}
fmt.Println(stru2) //{fan 0}
//å…¨éƒ¨æŒ‡å®š,å­—æ®µçš„é¡ºåºå¯ä»¥ä¸æŒ‰ç…§å®šä¹‰æ—¶çš„é¡ºåº
stru3 := person{age:18,name:"yang"}
fmt.Println(stru3) //{yang 18}
//æŒ‰ç…§ç»“æ„ä½“é¡ºåºåˆå§‹åŒ–,è¿™æ—¶å…ƒç´ çš„å€¼å¿…é¡»éƒ½å†™å…¨äº†
stru4 := person{"fan",17}
fmt.Println(stru4) //{fan 17}
</code></pre></div></div>

<p>}</p>

:ET