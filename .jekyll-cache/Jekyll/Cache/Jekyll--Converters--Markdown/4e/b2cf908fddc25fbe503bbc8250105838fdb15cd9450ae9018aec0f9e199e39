I"®<p>æˆ‘ä»¬å¸Œæœ›åœ¨æ‰§è¡Œ kubectl create -f kafka-source.yaml ä¹‹åï¼Œåœ¨ kubernetes é‡Œä¼šå¯åŠ¨ä¸€ä¸ª podï¼Œè¿™ä¸ª pod ä¼šåšä¸‹é¢çš„äº‹æƒ…ï¼š</p>

<p>å®ƒä¼šä»åœ°å€æ˜¯ my-cluster-kafka-bootstrap.kafka:9092ï¼Œtopic æ˜¯ knative- demo-topic çš„ kafka æœºç¾¤é‡Œè¯»å–æ¶ˆ
å°†è¯»åˆ°çš„æ¶ˆæ¯ï¼Œå‘é€åˆ° kubernetes çš„ä¸€ä¸ª Service å»æ‰§è¡Œ
Kuberentes é‡Œå¹¶æ²¡æœ‰ KafkaSource è¿™ä¸ªèµ„æºå¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥ç›´æ¥æ‰§è¡Œ kubectl create -f kafka-source.yaml çš„æ—¶å€™ï¼Œä¼šå‡ºé”™ã€‚ä½†æ˜¯ kubernetes æä¾›çš„ CRD æœºåˆ¶å¯ä»¥è®©æˆ‘ä»¬è½»æ¾çš„æŠŠä¸Šè¿°åŠŸèƒ½æ·»åŠ åˆ° kubernetes é‡Œã€‚</p>

<p>CRD æœºåˆ¶ä»¥ä¸Šè¿° Kafkasource ä¸ºä¾‹ï¼Œå¦‚ä¸‹ï¼š</p>

<p>éœ€è¦æŠŠ KafkaSource è¿™ä¸ªèµ„æºæ³¨å†Œåˆ° kubernetes ä¸­ï¼Œè¿™æ · kubernetes æ‰ä¼šçŸ¥é“è¿™ä¸ªèµ„æº
æ³¨å†Œä¹‹åï¼Œè¿˜éœ€è¦å¼€å‘ä¸€ä¸ª controller ç»„ä»¶ï¼Œæ¥ç›‘å¬ç”¨æˆ·æ˜¯å¦åˆ›å»ºäº† KafkaSourceï¼Œä¹Ÿå°±æ˜¯éƒ¨ç½²ã€æ›´æ–°æˆ–è€…åˆ é™¤å¦‚ä¸Šçš„ yaml æ–‡ä»¶ã€‚
Controller ç›‘å¬åˆ°æœ‰ç”¨æˆ·åˆ›å»ºäº† KafkaSourceï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ª pod æ¥åšç›¸åº”çš„å·¥ä½œ
å½’çº³ä¸€ä¸‹å°±æ˜¯ï¼š</p>

<p>ç”¨æˆ·å‘ Kubernetes API æœåŠ¡æ³¨å†Œä¸€ä¸ªå¸¦ç‰¹å®š schema çš„èµ„æºï¼Œå¹¶å®šä¹‰ç›¸å…³ API</p>

<p>å°†æ‰©å±•èµ„æºçš„æ•°æ®å­˜å‚¨åˆ° Kubernetes çš„ etcd é›†ç¾¤
å€ŸåŠ© Kubernetes æä¾›çš„ controller æ¨¡å¼å¼€å‘æ¡†æ¶ï¼Œå®ç°æ–°çš„ controllerï¼Œå¹¶å€ŸåŠ© APIServer ç›‘å¬ etcd é›†ç¾¤å…³äºè¯¥èµ„æºçš„çŠ¶æ€å¹¶å®šä¹‰çŠ¶æ€å˜åŒ–çš„å¤„ç†é€»è¾‘
<!-- more -->
https://zhuanlan.zhihu.com/p/114659529</p>
:ET