I"™<p>https://github.com/golang/go/issues/16076
https://studygolang.com/articles/18392</p>

<p>func setProgramLimits() {
	// Swarm runnable threads could be large when the number of nodes is large
	// or under request bursts. Most threads are occupied by network connections.
	// Increase max thread count from 10k default to 50k to accommodate it.
	const maxThreadCount int = 50 * 1000
	debug.SetMaxThreads(maxThreadCount)
}
https://golang.hotexamples.com/zh/examples/runtime.debug/-/SetMaxThreads/golang-setmaxthreads-function-examples.html
<!-- more -->
SetMaxStackè®¾ç½®è¯¥ä»¥è¢«å•ä¸ªgoç¨‹è°ƒç”¨æ ˆå¯ä½¿ç”¨çš„å†…å­˜æœ€å¤§å€¼ã€‚å¦‚æœä»»ä½•goç¨‹åœ¨å¢åŠ å…¶è°ƒç”¨æ ˆæ—¶è¶…å‡ºäº†è¯¥é™åˆ¶ï¼Œç¨‹åºå°±ä¼šå´©æºƒã€‚SetMaxStackè¿”å›ä¹‹å‰çš„è®¾ç½®ã€‚é»˜è®¤è®¾ç½®åœ¨32ä½ç³»ç»Ÿæ˜¯250MBï¼Œåœ¨64ä½ç³»ç»Ÿæ˜¯1GBã€‚
SetMaxThreadsè®¾ç½®goç¨‹åºå¯ä»¥ä½¿ç”¨çš„æœ€å¤§æ“ä½œç³»ç»Ÿçº¿ç¨‹æ•°ã€‚å¦‚æœç¨‹åºè¯•å›¾ä½¿ç”¨è¶…è¿‡è¯¥é™åˆ¶çš„çº¿ç¨‹æ•°ï¼Œå°±ä¼šå¯¼è‡´ç¨‹åºå´©æºƒã€‚SetMaxThreadsè¿”å›ä¹‹å‰çš„è®¾ç½®ï¼Œåˆå§‹è®¾ç½®ä¸º10000ä¸ªçº¿ç¨‹ã€‚</p>

<p>fmt.Println(â€œruntime.NumCPU:â€, runtime.NumCPU())
fmt.Println(â€œruntime.NumCgoCall:â€, runtime.NumCgoCall())
fmt.Println(â€œruntime.NumGoroutine:â€, runtime.NumGoroutine())
fmt.Println(â€œruntime.GOMAXPROCS:â€, runtime.GOMAXPROCS(0)) //GOMAXPROCSè®¾ç½®å¯åŒæ—¶æ‰§è¡Œçš„æœ€å¤§CPUæ•°</p>

<p>https://www.jianshu.com/p/9337693037d8</p>

<p>https://juejin.im/entry/6844903597780516872</p>
:ET