I"<p>CAS原子操作。
需要有一种阻塞和唤醒机制。
尽量减少阻塞和唤醒切换成本。
锁尽量公平，后来者要排队。即使被后来者插队了，也要照顾先来者，不能有“饥饿”现象。
先看3，4点。再看2，1点。最后是源码。
<!-- more -->
尽量减少阻塞和唤醒切换成本
减少切换成本的方法就是不切换，简单而直接。</p>
:ET