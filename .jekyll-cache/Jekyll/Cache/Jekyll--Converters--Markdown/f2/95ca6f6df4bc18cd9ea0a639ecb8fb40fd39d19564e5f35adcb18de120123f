I"<p>https://github.com/symfony/symfony</p>

<p>Composer
Composer is a tool for dependency management in PHP. It allows you to declare the dependent libraries your project needs and it will install them in your project for you.</p>

<p>Components used by this project
Console
Filesystem
Finder
PHPUnit Bridge
Process</p>

<p>https://symfony.com/projects/composer
<!-- more -->
symfony/console æ˜¯ä»€ä¹ˆ#
é¦–å…ˆè¦æ˜ç™½ symfony/console æ˜¯ä»€ä¹ˆï¼Ÿ
å®ƒæ˜¯ symfony é‡Œé¢çš„ä¸€ä¸ªæ§åˆ¶å°å‘½ä»¤ç»„ä»¶ï¼Œæ›´ä¼˜ç§€çš„äº‹ symfony çš„ç»„ä»¶å„è‡ªéƒ½ä¿æŒç‹¬ç«‹ï¼Œä¸éœ€è¦å…¶ä»–ä¾èµ–ã€‚è¿™å°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åœ¨ä»»æ„æˆ‘ä»¬æƒ³è¦çš„åœ°æ–¹å»ä½¿ç”¨ã€‚</p>

<p>å¦‚ä½•ç¼–å†™ console è„šæœ¬
composer å®‰è£… symfony/console ç»„ä»¶ã€‚
æŒ‰ç…§è§„èŒƒç¼–å†™ console åº”ç”¨ç¨‹åºï¼ˆç­‰äº artisan ï¼‰ã€‚
æŒ‰ç…§è§„èŒƒç¼–å†™ commands ï¼ˆå‘½ä»¤ï¼‰ã€‚
å¤§åŠŸå‘Šæˆã€‚
å®‰è£…
composer require symfony/console</p>

<p>ç¼–å†™ console ç¨‹åº
console_command æ–‡ä»¶</p>

<p>#!/usr/bin/env php
&lt;?php</p>

<p>require <strong>DIR</strong>.â€™/vendor/autoload.phpâ€™;</p>

<p>use Symfony\Component\Console\Application;
use Cmd\ModelCommand;</p>

<p>$application = new Application();</p>

<p>// æ³¨å†Œæˆ‘ä»¬ç¼–å†™çš„å‘½ä»¤ (commands)
$application-&gt;add(new ModelCommand());</p>

<p>$application-&gt;run();
ç¼–å†™ command ç¨‹åº
è¿™é‡Œéœ€è¦æ³¨æ„è‡ªåŠ¨åŠ è½½é—®é¢˜ï¼</p>

<p>â€œautoloadâ€: {
       â€œpsr-4â€:{
           â€œCmd\â€: â€œCmdâ€
       }
ä¸Šé¢ä¸€æ®µåŠ å…¥åˆ° composer.json ä¸­ã€‚ä¸‹é¢æ˜¯æˆ‘çš„æœ€ç»ˆæ–‡ä»¶å†…å®¹</p>

<p>{
    â€œrequireâ€: {
        â€œsymfony/consoleâ€: â€œ^4.2â€
    },
    â€œautoloadâ€: {
       â€œpsr-4â€:{
           â€œCmd\â€: â€œCmdâ€
       }
   }
}
ModelCommand.php</p>

<p>&lt;?php
namespace Cmd;</p>

<p>use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;
use Symfony\Component\Console\Input\InputArgument;</p>

<p>class ModelCommand extends Command
{
    protected function configure()
    {
        $this
            // å‘½ä»¤çš„åç§° ï¼ˆâ€php console_commandâ€ åé¢çš„éƒ¨åˆ†ï¼‰
            -&gt;setName(â€˜model:createâ€™)
            // è¿è¡Œ â€œphp console_command listâ€ æ—¶çš„ç®€çŸ­æè¿°
            -&gt;setDescription(â€˜Create new modelâ€™)
            // è¿è¡Œå‘½ä»¤æ—¶ä½¿ç”¨ â€œâ€“helpâ€ é€‰é¡¹æ—¶çš„å®Œæ•´å‘½ä»¤æè¿°
            -&gt;setHelp(â€˜This command allow you to create modelsâ€¦â€™)
            // é…ç½®ä¸€ä¸ªå‚æ•°
            -&gt;addArgument(â€˜nameâ€™, InputArgument::REQUIRED, â€˜what's model you want to create ?â€™)
            // é…ç½®ä¸€ä¸ªå¯é€‰å‚æ•°
            -&gt;addArgument(â€˜optional_argumentâ€™, InputArgument::OPTIONAL, â€˜this is a optional argumentâ€™);
    }</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>protected function execute(InputInterface $input, OutputInterface $output)
{
    // ä½ æƒ³è¦åšçš„ä»»ä½•æ“ä½œ
    $optional_argument = $input-&gt;getArgument('optional_argument');

    $output-&gt;writeln('creating...');
    $output-&gt;writeln('created ' . $input-&gt;getArgument('name') . ' model success !');

    if ($optional_argument)
        $output-&gt;writeln('optional argument is ' . $optional_argument);

    $output-&gt;writeln('the end.');
} }
</code></pre></div></div>

<p>https://learnku.com/articles/22667</p>

<p>Symfonyçš„Consoleç»„ä»¶çš„ç®€å•ä½¿ç”¨ã€‚
æœ¬æ–‡ç›®çš„æ˜¯å¤šSymfonyçš„Consoleç»„ä»¶è¿›è¡Œç®€å•çš„ä½¿ç”¨ã€‚
è¾¾åˆ°è¿™æ ·çš„æ•ˆæœï¼š</p>

<p>è¾“å…¥</p>

<p>php console test
è¾“å‡º</p>

<p>hello console.
å‡†å¤‡å·¥ä½œ
æˆ‘ä»¬è¿™é‡Œä½¿ç”¨composeræ¥è¿›è¡ŒConsoleç»„ä»¶çš„å®‰è£… composerå®‰è£…æ•™ç¨‹</p>

<p>è¿›å…¥é¡¹ç›®è·¯å¾„ï¼š</p>

<p>cd ~/web/project/
å®‰è£…Consoleç»„ä»¶ï¼š</p>

<p>composer require symfony/console @stable
åˆ›å»ºè‡ªå·±çš„ä»£ç ç›®å½•ï¼š</p>

<p>mkdir -p src/Mycmd # åˆ›å»ºè‡ªå·±çš„ä»£ç ç›®å½•
æ³¨å†Œå‘½åç©ºé—´ï¼š
ç¼–è¾‘ composer.json æ–‡ä»¶å¦‚ä¸‹ï¼Œç„¶ååœ¨å‘½ä»¤è¡Œè¾“å…¥composer dump-autoload ï¼š</p>

<p>{
   â€œrequireâ€: {
       â€œsymfony/consoleâ€: â€œ@stableâ€
   },
   â€œautoloadâ€: {
       â€œpsr-4â€:{
           â€œMycmd\â€: â€œsrc/Mycmdâ€
       }
   }
}
ç¼–å†™å‘½ä»¤æ–‡ä»¶
åˆ›å»ºè¦æ‰§è¡Œçš„å‘½ä»¤æ–‡ä»¶ï¼š
åœ¨ src/Mycmd è·¯å¾„ä¸‹åˆ›å»º TestCmd.php æ–‡ä»¶ï¼Œå¹¶å†™å…¥ï¼š</p>

<p>&lt;?php</p>

<p>namespace Mycmd;</p>

<p>use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;</p>

<p>/**</p>
<ul>
  <li>
    <p>*/
class TestCmd extends Command
{
public function __construct($msg)
{
    $this-&gt;msg = $msg;
    parent::__construct();
}</p>

    <p>protected function configure()
{
    $this-&gt;setName(â€˜testâ€™);
}</p>

    <p>protected function execute(InputInterface $input, OutputInterface $output)
{
    $output-&gt;writeln(â€œ<comment>".$this-&gt;msg."</comment>â€);
}
}
åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œåˆ›å»ºConsoleç»„ä»¶çš„å…¥å£æ–‡ä»¶ console å¹¶å†™å…¥ï¼š</p>
  </li>
</ul>

<p>#!/usr/bin/env php
&lt;?php</p>

<p>require <strong>DIR</strong>.â€™/vendor/autoload.phpâ€™;</p>

<p>use Mycmd\TestCmd;
use Symfony\Component\Console\Application;</p>

<p>$application = new Application();
$application-&gt;add(new TestCmd(â€œhello consoleâ€));
$application-&gt;run();
ä½¿ç”¨Consoleç»„ä»¶
åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š</p>

<p>php console test
è¿™æ—¶ä¼šçœ‹è§</p>

<p>hello console
ä»£ç åˆ†æ
é¦–å…ˆè¯´è¯´æˆ‘ä»¬è‡ªå·±çš„å‘½ä»¤æ–‡ä»¶ï¼š TestCmd.php
&lt;?php</p>

<p>namespace Mycmd;</p>

<p>use Symfony\Component\Console\Command\Command;
use Symfony\Component\Console\Input\InputInterface;
use Symfony\Component\Console\Output\OutputInterface;</p>

<p>/**</p>
<ul>
  <li>
    <p>*/
class TestCmd extends Command
{
public function __construct($msg)
{
    $this-&gt;msg = $msg;
    parent::__construct();
}</p>

    <p>protected function configure()
{
    $this-&gt;setName(â€˜testâ€™);
}</p>

    <p>protected function execute(InputInterface $input, OutputInterface $output)
{
    $output-&gt;writeln(â€œ<comment>".$this-&gt;msg."</comment>â€);
}
}
ä»£ç ä¸­åŒ…å«ä¸€ä¸ªç±» TestCmd å¹¶ç»§æ‰¿äº† Command åŸºç±»ã€‚</p>
  </li>
</ul>

<p>configure æ–¹æ³•ä¸­è®¾ç½®äº†å‘½ä»¤çš„åç§° testï¼Œå³ php console test å‘½ä»¤ä¸­çš„æœ€åä¸€ä¸ªå•è¯</p>

<p>execute æ–¹æ³•ä¸­å®šä¹‰äº†è¯¥å‘½ä»¤çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œå³è¾“å‡º $this-&gt;msg</p>

<p>å†çœ‹çœ‹å…¥å£æ–‡ä»¶ console
#!/usr/bin/env php
&lt;?php</p>

<p>require <strong>DIR</strong>.â€™/vendor/autoload.phpâ€™;</p>

<p>use Mycmd\TestCmd;
use Symfony\Component\Console\Application;</p>

<p>$application = new Application();
$application-&gt;add(new TestCmd(â€œhello consoleâ€));
$application-&gt;run();
è¿™é‡Œçš„ $application-&gt;add() æ–¹æ³•å°†æˆ‘ä»¬å®šä¹‰çš„ TestCmd æ·»åŠ åˆ°äº†å‘½ä»¤è¡Œä¸­ã€‚</p>

<p>Symfonyå®˜æ–¹æ–‡æ¡£ï¼š
http://symfony.com/doc/current/components/console/introduction.html</p>

<p>https://segmentfault.com/a/1190000005084734</p>
:ET