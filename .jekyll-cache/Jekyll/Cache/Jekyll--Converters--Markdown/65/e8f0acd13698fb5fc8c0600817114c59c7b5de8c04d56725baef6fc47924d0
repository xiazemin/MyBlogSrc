I"|<p>https://blog.csdn.net/u013474436/article/details/53309028?utm_source=blogxgwz1
https://stackoverflow.com/questions/35006614/what-does-symbol-not-found-expected-in-flat-namespace-actually-mean
https://stackoverflow.com/questions/18809986/undefined-reference-to-strnlen-s-strncpy-s-strncat-s
https://www.hongweipeng.com/index.php/archives/1014/
strlen_s æ˜¯å¾®è½¯çš„åº“ï¼Œmacä¸èƒ½ç”¨
<!-- more --></p>

<p>https://tonybai.com/2009/04/11/glibc-strlen-source-analysis/</p>

<p>åœ¨Zend/zend_string.hæä¾›äº†ä¸€äº›zend_stringå¤„ç†çš„ä¸€äº›æ–¹æ³•ã€‚
ZSTR_å¼€å¤´çš„å®æ–¹æ³•æ˜¯zend_stringç»“æ„ä¸“å±çš„æ–¹æ³•ã€‚ä¸»è¦æœ‰å¦‚ä¸‹å‡ ä¸ªï¼š
#define ZSTR_VAL(zstr)  (zstr)-&gt;val
#define ZSTR_LEN(zstr)  (zstr)-&gt;len
#define ZSTR_H(zstr)    (zstr)-&gt;h
#define ZSTR_HASH(zstr) zend_string_hash_val(zstr) 
ZSTR_VAL ZSTR_LEN ZSTR_Hå®æ–¹æ³•åˆ†åˆ«å¯¹åº”zend_stringç»“æ„çš„æˆå‘˜ã€‚ZSTR_HASHæ˜¯è·å–å­—ç¬¦ä¸²çš„hashå€¼ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå°±è°ƒç”¨hashå‡½æ•°ç”Ÿæˆä¸€ä¸ªã€‚</p>

<p>https://juejin.im/entry/583e8f36ac502e006c3605ee</p>

<p>https://blog.csdn.net/u012564936/article/details/15970891</p>

<p>https://www.jellythink.com/archives/152</p>

<p>ä¸Šä¸€ç¯‡æ–‡ç« æ€»ç»“äº†PHPä¸­çš„__autoloadæœºåˆ¶ã€‚è¿™ä¸€ç¯‡æ˜¯ä¸Šä¸€ç¯‡çš„å§Šå¦¹ç¯‡ã€‚å…³äº__autoloadç°åœ¨åŸºæœ¬éƒ½è¢«æŠ›å¼ƒäº†ï¼Œä½¿ç”¨çš„è¶Šæ¥è¶Šå°‘äº†ï¼Œä½†æ˜¯è¯­è¨€çš„å‘å±•éƒ½æ˜¯å‘ç€å¼€å‘å‹å¥½åŒ–çš„ã€‚ç”±äº__autoloadæœºåˆ¶çš„ç¼ºç‚¹éå¸¸æ˜æ˜¾ï¼Œä¸ºäº†è§£å†³è¿™äº›ç—›ç‚¹ï¼Œå°±æœ‰äº†è¿™ç¯‡éœ€è¦æ€»ç»“çš„SPL Autoloadã€‚</p>

<p>ä»€ä¹ˆæ˜¯SPL Autoload
SPLæ˜¯Standard PHP Library(æ ‡å‡†PHPåº“)çš„ç¼©å†™ã€‚å®ƒæ˜¯PHP5å¼•å…¥çš„ä¸€ä¸ªæ‰©å±•åº“ï¼Œå…¶ä¸»è¦åŠŸèƒ½åŒ…æ‹¬autoloadæœºåˆ¶çš„å®ç°åŠåŒ…æ‹¬å„ç§Iteratoræ¥å£æˆ–ç±»ã€‚SPL autoloadæœºåˆ¶çš„å®ç°æ˜¯é€šè¿‡å°†å‡½æ•°æŒ‡é’ˆautoload_funcæŒ‡å‘è‡ªå·±å®ç°çš„å…·æœ‰è‡ªåŠ¨è£…è½½åŠŸèƒ½çš„å‡½æ•°æ¥å®ç°çš„ã€‚</p>

<p>SPLæœ‰ä¸¤ä¸ªä¸åŒçš„å‡½æ•°spl_autoload, spl_autoload_callï¼Œé€šè¿‡å°†autoload_funcæŒ‡å‘è¿™ä¸¤ä¸ªä¸åŒçš„å‡½æ•°åœ°å€æ¥å®ç°ä¸åŒçš„è‡ªåŠ¨åŠ è½½æœºåˆ¶ã€‚</p>

<p>spl_autoloadå®ç°æœºåˆ¶
spl_autoloadæ˜¯SPLå®ç°çš„é»˜è®¤çš„è‡ªåŠ¨åŠ è½½å‡½æ•°ï¼Œå®ƒçš„åŠŸèƒ½æ¯”è¾ƒç®€å•ã€‚å®ƒçš„å‡½æ•°å£°æ˜å¦‚ä¸‹ï¼š</p>

<p>void spl_autoload ( string $class_name [, string $file_extensions ] )
ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ç±»åå­—ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–‡ä»¶æ‰©å±•åï¼›åœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å‡½æ•°å…ˆå°†ç±»åè½¬æ¢æˆå°å†™ï¼Œå†åœ¨å°å†™çš„ç±»åååŠ ä¸Š.incæˆ–.phpçš„æ‰©å±•åä½œä¸ºæ–‡ä»¶åï¼Œç„¶ååœ¨æ‰€æœ‰çš„åŒ…å«è·¯å¾„(include paths)ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯¥æ–‡ä»¶ã€‚</p>

<p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€ä¸ªA.class.phpã€B.class.phpå’ŒMain.cppï¼Œå…¶ä¸­A.class.phpä»£ç å¦‚ä¸‹ï¼š</p>

<p>&lt;?php
class A {
    function __construct () 
    { 
        var_dump(â€˜construct Aâ€™);
    } 
}
B.class.phpå†…å®¹å¦‚ä¸‹ï¼š</p>

<p>&lt;?php
class B {
    function __construct () 
    { 
        var_dump(â€˜construct Bâ€™);
    } 
}
Main.phpä»£ç å¦‚ä¸‹ï¼š</p>

<p>&lt;?php
set_include_path(get_include_path().PATH_SEPARATOR.â€™C:\Users\Jelly\Desktop\autoloadâ€™);
spl_autoload_extensions(â€˜.class.phpâ€™);
spl_autoload_register();</p>

<p>new A();
new B();
è¾“å‡ºå†…å®¹å¦‚ä¸‹ï¼š</p>

<p>string(11) â€œconstruct Aâ€ string(11) â€œconstruct Bâ€
é€šè¿‡è°ƒç”¨spl_autoload_extensionså‡½æ•°ï¼Œè®¾ç½®spl_autoloadåŠ è½½çš„æ–‡ä»¶çš„æ‰©å±•åã€‚ç„¶åé€šè¿‡ä½¿ç”¨spl_autoload_registerå‡½æ•°ï¼Œåœ¨PHPè„šæœ¬ä¸­ç¬¬ä¸€æ¬¡è°ƒç”¨spl_autoload_register()æ—¶ä¸ä½¿ç”¨ä»»ä½•å‚æ•°ï¼Œå°±å¯ä»¥å°† autoload_funcæŒ‡å‘spl_autoloadï¼Œä»è€Œä½¿ç”¨spl_autoloadä½œä¸ºé»˜è®¤çš„åŠ è½½å‡½æ•°ã€‚</p>

<p>spl_autoload_callå®ç°æœºåˆ¶
é€šè¿‡ä¸Šé¢çš„è¯´æ˜æˆ‘ä»¬çŸ¥é“ï¼Œspl_autoloadçš„åŠŸèƒ½æ¯”è¾ƒç®€å•ï¼Œå’Œ__autoloadçš„åŠŸèƒ½åŒºåˆ«ä¸å¤§ï¼Œè€Œä¸”å®ƒæ˜¯åœ¨SPLæ‰©å±•ä¸­å®ç°çš„ï¼Œæˆ‘ä»¬æ— æ³•æ‰©å……å®ƒçš„åŠŸèƒ½ã€‚å¦‚æœæƒ³å®ç°è‡ªå·±çš„æ›´çµæ´»çš„è‡ªåŠ¨åŠ è½½æœºåˆ¶æ€ä¹ˆåŠå‘¢ï¼Ÿæ­¤æ—¶ï¼Œæˆ‘ä»¬å°±éœ€è¦ç”¨åˆ°spl_autoload_calläº†ã€‚</p>

<p>æˆ‘ä»¬å…ˆæ¥ç®€å•çš„è¯´è¯´spl_autoload_callçš„å†…éƒ¨æœºåˆ¶ã€‚åœ¨SPLæ¨¡å—å†…éƒ¨ï¼Œæœ‰ä¸€ä¸ªå…¨å±€å˜é‡autoload_functionsï¼Œå®ƒæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªHashTableï¼Œä¸è¿‡æˆ‘ä»¬å¯ä»¥å°†å…¶ç®€å•çš„çœ‹ä½œä¸€ä¸ªé“¾è¡¨ï¼Œé“¾è¡¨ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆ,æŒ‡å‘ä¸€ä¸ªå…·æœ‰è‡ªåŠ¨åŠ è½½ç±»åŠŸèƒ½çš„å‡½æ•°ã€‚spl_autoload_callæœ¬èº«çš„å®ç°å¾ˆç®€å•ï¼Œåªæ˜¯ç®€å•çš„æŒ‰é¡ºåºæ‰§è¡Œè¿™ä¸ªé“¾è¡¨ä¸­æ¯ä¸ªå‡½æ•°ï¼Œåœ¨æ¯ä¸ªå‡½æ•°æ‰§è¡Œå®Œæˆåéƒ½åˆ¤æ–­ä¸€æ¬¡éœ€è¦çš„ç±»æ˜¯å¦å·²ç»åŠ è½½ï¼Œå¦‚æœåŠ è½½æˆåŠŸå°±ç›´æ¥è¿”å›ï¼Œä¸å†ç»§ç»­æ‰§è¡Œé“¾è¡¨ä¸­çš„å…¶å®ƒå‡½æ•°ã€‚å¦‚æœè¿™ä¸ªé“¾è¡¨ä¸­æ‰€æœ‰çš„å‡½æ•°éƒ½æ‰§è¡Œå®Œæˆåç±»è¿˜æ²¡æœ‰åŠ è½½ï¼Œspl_autoload_callå°±ç›´æ¥ é€€å‡ºï¼Œå¹¶ä¸å‘ç”¨æˆ·æŠ¥å‘Šé”™è¯¯ã€‚å› æ­¤ï¼Œä½¿ç”¨äº†autoloadæœºåˆ¶ï¼Œå¹¶ä¸èƒ½ä¿è¯ç±»å°±ä¸€å®šèƒ½æ­£ç¡®çš„è‡ªåŠ¨åŠ è½½ï¼Œå…³é”®è¿˜æ˜¯è¦çœ‹ä½ çš„è‡ªåŠ¨åŠ è½½å‡½æ•°å¦‚ä½•å®ç°ã€‚</p>

<p>è¯´ç™½äº†ï¼Œspl_autoload_callå½»åº•çš„è§£å†³äº†__autoload()æ˜¯å…¨å±€å‡½æ•°åªèƒ½å®šä¹‰ä¸€æ¬¡ï¼Œä¸å¤Ÿçµæ´»çš„ç¼ºé™·ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œå®šä¹‰æ¯ä¸ªæ¨¡å—çš„autoloadæœºåˆ¶ï¼Œç„¶åå°†æˆ‘ä»¬å®šä¹‰çš„åŠ è½½æœºåˆ¶é€šè¿‡spl_autoload_registerå‡½æ•°æ³¨å†Œåˆ°SPLæ¨¡å—å†…éƒ¨ç»´æŠ¤çš„è°ƒç”¨å †æ ˆä¸­å³å¯ã€‚æˆ‘ä»¬å¯ä»¥æ³¨å†Œå¤šä¸ªåŠ è½½ç­–ç•¥ï¼Œåæ­£SPLå†…éƒ¨ä¼šä¾æ¬¡æ‰§è¡Œæˆ‘ä»¬æ³¨å†Œçš„åŠ è½½ç­–ç•¥ï¼Œä»è€ŒåŠ è½½æ‰¾ä¸åˆ°çš„ç±»ã€‚åŸºäºæ­¤ï¼Œæˆ‘ä»¬è¿˜æ˜¯é€šè¿‡ä»£ç æ¥è¯´æ˜ã€‚</p>

<p>ç°åœ¨æœ‰ä»¥ä¸‹ç›®å½•ç»“æ„ï¼š</p>

<p>project/
    â”œâ”€â”€ ModuleA/
    â”‚  â”œâ”€â”€ A.class.php
    â”‚  â”œâ”€â”€ autoload.php
    â”œâ”€â”€ ModuleB/
    â”‚  â”œâ”€â”€ B.class.php
    â”‚  â”œâ”€â”€ autoload.php
    â”œâ”€â”€ Main.php
ModuleA/autoload.phpä»£ç å¦‚ä¸‹ï¼š</p>

<p>&lt;?php
function autoloadA($className) {
    var_dump(â€˜autoloadA calledâ€™);
    $fileName = <strong>DIR</strong> . â€˜/â€™ . $className . â€˜.class.phpâ€™;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if (file_exists($fileName)) {  
    require_once($fileName);  
} }
</code></pre></div></div>

<p>spl_autoload_register(â€˜autoloadAâ€™);
ModuleB/autoload.phpä»£ç å¦‚ä¸‹ï¼š</p>

<p>&lt;?php
function autoloadB($className) {
    var_dump(â€˜autoloadB calledâ€™);
    $fileName = <strong>DIR</strong> . â€˜/â€™ . $className . â€˜.class.phpâ€™;</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if (file_exists($fileName)) {    
    require_once($fileName);     
} }
</code></pre></div></div>

<p>spl_autoload_register(â€˜autoloadBâ€™);
Main.phpä»£ç å¦‚ä¸‹ï¼š</p>

<p>&lt;?php
require <strong>DIR</strong>.â€™/ModuleA/autoload.phpâ€™;
require <strong>DIR</strong>.â€™/ModuleB/autoload.phpâ€™;</p>

<p>new A();
new B();
è¿™æ ·å°±é€šè¿‡spl_autoload_registerå‡½æ•°å®ç°äº†å¤šæ¨¡å—è‡ªå®šä¹‰åŠ è½½ã€‚å½“ç„¶äº†ï¼Œä¸Šé¢çš„ä»£ç åªæ˜¯ç”¨äºæ¼”ç¤ºï¼Œå®é™…æ¡†æ¶ä¸­ï¼Œå½“å’Œcomposerç»“åˆæ—¶ï¼Œåˆä¼šæœ‰å˜åŒ–ï¼Œä½†æ˜¯ä¸‡å˜ä¸ç¦»å…¶å®—ã€‚äº†è§£äº†æˆ‘è¿™é‡Œæ€»ç»“çš„ï¼Œå†å»ç†è§£å…¶å®ƒçš„éƒ½ä¸ä¼šæœ‰å¤ªå¤§é—®é¢˜çš„ã€‚</p>

<p>æ€»ç»“
åˆ°æ­¤ï¼Œå…³äºPHPä¸­çš„SPL Autoloadæœºåˆ¶å°±æ€»ç»“å®Œæ¯•äº†ã€‚è¯¥ç³»åˆ—æˆ‘è¿˜ä¼šä¸€ç›´æ€»ç»“ä¸‹å»ã€‚å¸Œæœ›å¤§å®¶å–œæ¬¢ï¼Œä¹Ÿå¸Œæœ›æˆ‘çš„æ€»ç»“èƒ½å¤ŸçœŸæ­£çš„å¸®åŠ©å¤§å®¶ã€‚æœŸå¾…å¤§å®¶å’Œæˆ‘ä¸€èµ·æ²Ÿé€šï¼Œäº¤æµã€‚</p>
:ET