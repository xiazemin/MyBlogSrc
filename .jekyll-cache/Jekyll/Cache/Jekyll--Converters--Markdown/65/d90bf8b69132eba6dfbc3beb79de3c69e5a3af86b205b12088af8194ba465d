I"ª<p>clion æ˜¯æœ€å¥½ç”¨çš„cè¯­è¨€ç¼–è¾‘å™¨</p>

<p>æ­£å¸¸æƒ…å†µä¸‹å¯¼å…¥å·¥ç¨‹åå°±èƒ½è‡ªåŠ¨åˆ›å»ºç´¢å¼•ï¼Œæ”¯æŒè·³è½¬ï¼Œå¦‚æœåˆ›å»ºç´¢å¼•å¤±è´¥ï¼Œå¯ä»¥é‡æ–°å¯¼å…¥ï¼š
ç¬¬ä¸€æ­¥åˆ  rm -rf .idea</p>

<p>ç¬¬äºŒæ­¥ï¼Œåˆ cmakelist</p>

<p>ç¬¬ä¸‰æ­¥ï¼Œimportå³å¯
åœ¨Run/Edit Configurationsé‡Œä¿®æ”¹Working directoryä¸ºå½“å‰ä»£ç çš„æ ¹ç›®å½•
<!-- more -->
CMakeLists.txt æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°å¯¹åº”çš„.cæ–‡ä»¶ï¼Œæ³¨é‡Šæ‰.hæ–‡ä»¶å³å¯
add_executable(c
    4.4BSD-Lite2/sys/i386/floppy/mv/mv.c
    4.4BSD-Lite2/sys/i386/floppy/rm/rm.c
    #4.4BSD-Lite2/sys/i386/floppy/sh/shell.h</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>æ¥ç€ä¼šé‡æ–°å»ºç«‹ç´¢å¼•
</code></pre></div></div>

<p>C è¯­è¨€é¡¹ç›®çš„ç›®å½•ç»“æ„
ä»¥ä¸‹ä¾‹å­åŸºæœ¬æ¶µç›–äº†ä¸€ä¸ª C è¯­è¨€å¤§å‹é¡¹ç›®æ‰€èƒ½ç”¨åˆ°çš„æ‰€æœ‰ç›®å½•äº†ï¼š
.                               # é¡¹ç›®æ ¹ç›®å½•
|<strong>__CMakeLists.txt             # CMake ä¸»é…ç½®æ–‡ä»¶
|</strong><strong>test                       # æµ‹è¯•ç”¨ä¾‹ç›®å½•
| |</strong><strong>CMakeLists.txt           # æµ‹è¯•æ¨¡å—é…ç½®æ–‡ä»¶
| |</strong><strong>test.c
|</strong><strong>out                        # è¾“å‡ºç›®å½•
|</strong><strong>include                    # å¤´æ–‡ä»¶ *.h ç›®å½•
| |</strong><strong>util                     # header å­ç›®å½•
| |</strong><strong>xxx
|</strong><strong>lib                        # lib æ”¾ç½®ç›®å½•
|</strong><strong>build                      # æ„å»ºç›®å½•
|</strong><strong>src                        # æºç  *.c ç›®å½•
| |</strong><strong>CMakeLists.txt           # æºç æ¨¡å—é…ç½®æ–‡ä»¶
| |</strong><strong>util                     # æºç å­ç›®å½•
| |</strong>__xxx
ä½¿ç”¨ CMake æ„å»ºé¡¹ç›®
åœ¨ CLion ä¸­å¦‚æœæ²¡æœ‰é…ç½®å¥½ CMakeï¼ŒCLion çš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½ç”¨ä¸äº†ï¼Œæ‰€ä»¥ä½¿ç”¨ CLion åšå¼€å‘ï¼Œé…ç½® CMake æ˜¯å…³é”®ã€‚</p>

<p>CMake ä¸»é…ç½®æ–‡ä»¶
cmake_minimum_required(VERSION 3.9)</p>

<h1 id="é¡¹ç›®å">é¡¹ç›®å</h1>
<p>project(XXX)</p>

<p>set(CMAKE_C_STANDARD 99)</p>

<h1 id="æŠŠ-src-ä½œä¸ºå­-module">æŠŠ src ä½œä¸ºå­ module</h1>
<p>add_subdirectory(src)
æºç æ¨¡å—é…ç½®æ–‡ä»¶</p>
<h1 id="project_source_dir-æ˜¯-cmake-å®šä¹‰çš„å®æŒ‡å‘é¡¹ç›®æ ¹ç›®å½•">PROJECT_SOURCE_DIR æ˜¯ CMake å®šä¹‰çš„å®ï¼ŒæŒ‡å‘é¡¹ç›®æ ¹ç›®å½•</h1>
<p>include_directories(â€œ${PROJECT_SOURCE_DIR}/include/utilâ€)    # Util *.h includes</p>

<h1 id="æŠŠ-util-å­ç›®å½•ç¼–è¯‘æˆ-libraryæœ€ç»ˆä¼šç”Ÿæˆ-libutila-æ–‡ä»¶">æŠŠ util å­ç›®å½•ç¼–è¯‘æˆ libraryï¼Œæœ€ç»ˆä¼šç”Ÿæˆ libutil.a æ–‡ä»¶</h1>
<p>aux_source_directory(./util UTIL_SRC)
add_library(util ${UTIL_SRC})
æµ‹è¯•ç”¨ä¾‹ç›®å½•
include_directories(â€œ${PROJECT_SOURCE_DIR}/include/utilâ€)    # Util *.h includes</p>

<h1 id="ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶-test">ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ test</h1>
<p>add_executable(test test.c)</p>
<h1 id="æ·»åŠ é“¾æ¥åº“-util-ç­‰">æ·»åŠ é“¾æ¥åº“ util ç­‰</h1>
<p>target_link_libraries(test util)
é…ç½®å®Œæˆåï¼Œé‡æ–° Load ä¸€ä¸‹é¡¹ç›®ï¼Œåœ¨ Run Configurations ä¸­ä¾¿èƒ½çœ‹åˆ°æˆ‘ä»¬çš„ test ç¨‹åºäº†ã€‚ æ— è®ºæ˜¯ä»£ç è·³è½¬è¿˜æ˜¯ Run å’Œ Debug å°±ä¹Ÿéƒ½èƒ½ä½¿ç”¨äº†ã€‚å¼€å‘ Android é¡¹ç›®çš„æ„Ÿè§‰å…¨éƒ½å›æ¥äº†ã€‚</p>

<p>å½“ç„¶ï¼Œä¹Ÿå¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨å¦‚ä¸‹æ“ä½œæ¥ç¼–è¯‘ï¼š
cd build</p>
<h1 id="åœ¨-build-ç›®å½•ä¸‹ç¼–è¯‘æ•´ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯å¦åˆ™æ‰€äº§ç”Ÿçš„-makefile-æ–‡ä»¶ä¼šå……æ–¥åœ¨ä½ çš„æºä»£ç ä¸­">åœ¨ build ç›®å½•ä¸‹ç¼–è¯‘æ•´ä¸ªé¡¹ç›®æ˜¯ä¸€ä¸ªå¥½ä¹ æƒ¯ï¼Œå¦åˆ™æ‰€äº§ç”Ÿçš„ Makefile æ–‡ä»¶ä¼šå……æ–¥åœ¨ä½ çš„æºä»£ç ä¸­</h1>
<p>cmake ../
make</p>
:ET