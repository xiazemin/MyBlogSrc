I"Ç
<p>macä¸Šç”¨composer å…¨å±€å®‰è£…å·¥å…·æ—¶æŠ¥é”™
 [Symfony\Component\Process\Exception\RuntimeException]
  The process has been signaled with signal â€œ5â€.</p>

<p>æ–¹æ³•ä¸€ï¼šé‡æ–°å®‰è£…svn</p>

<p>æ–¹æ³•äºŒï¼šhttps://github.com/composer/composer/commit/432ace33d4216ecb3e3082d53cf06907dc329663</p>

<p>æ–¹æ³•ä¸‰ï¼š</p>

<p>Basically what helped me was to add this line:</p>

<p>putenv(â€œDYLD_LIBRARY_PATH=â€™â€™â€);</p>

<p>in the top of the Process.phpï¼ˆ~/.composer/vendor/symfony/process/Process.phpï¼‰ file of the composer.</p>

<p>åŸå› ï¼š
https://github.com/composer/composer/issues/2146</p>

<p>$brew install svn
$brew link â€“overwrite subversion</p>

<p>https://github.com/composer/composer/pull/2812
https://github.com/composer/composer/commit/432ace33d4216ecb3e3082d53cf06907dc329663</p>

<p>é—®é¢˜ä»ç„¶å­˜åœ¨
<!-- more -->
æœ€è¿‘å†™äº†ä¸€ä¸ªå‘½ä»¤è¡Œè„šæœ¬ï¼Œæ¶‰åŠcomposerå®‰è£…çš„å‡ ä¸ªåº“ï¼Œè¿˜æœ‰è‡ªå·±å°è£…çš„å››äº”ä¸ªç±»ã€‚ä¸å¸Œæœ›æŠŠä¸€å †phpè„šæœ¬æ‹·æ¥æ‹·å»ï¼Œæœ€å¥½èƒ½åƒphpunité‚£æ ·å°±ç›´æ¥å°è£…æˆä¸€ä¸ªå¯æ‰§è¡Œçš„æ–‡ä»¶ã€‚phpunitçš„åšæ³•æ˜¯æŠŠæ‰€æœ‰ç›¸å…³æ–‡ä»¶æ‰“åŒ…å°è£…åˆ°ä¸€ä¸ªpharåŒ…é‡Œå»åˆ†å‘ï¼Œæˆ‘ä¹Ÿå¯ä»¥è¿™ä¹ˆå¹²ã€‚</p>

<p>é¦–å…ˆé…ç½®php.inié‡Œçš„phar.readonly=0ï¼Œé»˜è®¤Phpè§£é‡Šå™¨å¯¹pharæ˜¯åªè¯»è®¿é—®çš„ï¼Œä¸èƒ½ä¿®æ”¹pharçš„å†…å®¹ï¼Œä»¥å…æ„å¤–ä¿®æ”¹æ•´ä½“äº¤ä»˜çš„è½¯ä»¶åŒ…ã€‚ä¿®æ”¹é…ç½®ä¹‹åæ‰å¯ä»¥ç”¨æ¥æ‰“åŒ…ç”Ÿæˆpharã€‚æ”¹å¥½é…ç½®ä¹‹åï¼Œå»ºç«‹ç¨‹åºç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>

<p>.
â”œâ”€â”€ bin
â”œâ”€â”€ generate-phar.php
â””â”€â”€ src
    â””â”€â”€ index.php
å…¶ä¸­srcç›®å½•é‡Œæœ‰å®Œæ•´çš„ä»£ç æ–‡ä»¶ï¼ŒåŒ…æ‹¬composerå¼•å…¥çš„ç¬¬ä¸‰æ–¹åº“ã€‚æˆ‘ä»¬ç”¨generate-phar.phpç¨‹åºç”Ÿæˆpharæ–‡ä»¶ï¼Œå¹¶æŠŠå®ƒæ”¾åˆ°binç›®å½•é‡Œå»ã€‚</p>

<p>&lt;?php
//åœ¨binç›®å½•ä¸‹åˆ›å»ºpharæ–‡ä»¶
$phar = new Phar(<strong>DIR</strong> . DIRECTORY_SEPARATOR . â€˜bin/mytool.pharâ€™);</p>

<p>//ä»srcç›®å½•æ„å»ºpharåŒ…
$phar-&gt;buildFromDirectory(â€˜srcâ€™);</p>

<p>//å®šä¹‰é»˜è®¤æ‰§è¡Œå…¥å£ä¸ºindex.php
$defStub = Phar::createDefaultStub(â€˜index.phpâ€™);</p>

<p>//è®¾ç½®phpè§£é‡Šå™¨shellå¤´ï¼Œè®©pharå¯ä»¥è‡ªå·±æ‰§è¡Œ
$phar-&gt;setStub(â€œ#!/usr/bin/env php\n$defStubâ€);</p>

<p>//ç”¨bzip2åº“å‹ç¼©pharåŒ…é‡Œçš„æ–‡ä»¶ï¼ˆæ­¤æ­¥è¦æ±‚PHPå®‰è£…äº†zlibå’Œbz2æ‰©å±•ï¼Œå¯ä»¥è·³è¿‡ï¼‰
$phar-&gt;compressFiles(Phar::BZ2);</p>

<p>//å°†pharåŒ…æ”¹åï¼Œå»æ‰pharæ‰©å±•å
rename(â€˜bin/mytool.pharâ€™, â€˜bin/mytoolâ€™);</p>

<p>//æˆäºˆpharåŒ…å¯æ‰§è¡Œæƒé™
chmod(â€˜bin/mytoolâ€™, 0755);
ç°åœ¨å¯ä»¥ç”¨bin/mytoolç›´æ¥æ‰§è¡ŒåŒ…ä¸­çš„ç¨‹åºäº†ï¼Œpharä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿä¸­å®‰è£…çš„PHPè§£é‡Šå™¨ï¼Œå¦‚æœæƒ³åœ¨ä»»æ„ç›®å½•è¿è¡Œæ­¤ç¨‹åºï¼Œå¯ä»¥æŠŠpharåŒ…æ‹·åˆ°$PATHè·¯å¾„è¦†ç›–çš„ç›®å½•ä¸­ï¼Œæ¯”å¦‚/usr/local/bin</p>

<p>https://xts.so/lang/pack-the-php-project-as-executable-phar.html</p>
:ET