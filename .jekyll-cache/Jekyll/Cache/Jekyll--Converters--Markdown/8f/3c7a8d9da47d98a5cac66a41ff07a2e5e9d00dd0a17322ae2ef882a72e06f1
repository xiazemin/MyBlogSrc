I"T<p>åœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸‹
æ³¨æ„ï¼šåœ¨ä¸€ä¸ªé¡¹ç›®ï¼ˆprojectï¼‰ä¸‹æˆ‘ä»¬æ˜¯å¯ä»¥å®šä¹‰å¤šä¸ªåŒ…ï¼ˆpackageï¼‰çš„ã€‚</p>

<p>å› ä¸ºè¿™ä¸¤ä¸ªåŒ…ä¸åœ¨åŒä¸€ä¸ªé¡¹ç›®è·¯å¾„ä¸‹ï¼Œä½ æƒ³è¦å¯¼å…¥æœ¬åœ°åŒ…ï¼Œå¹¶ä¸”è¿™äº›åŒ…ä¹Ÿæ²¡æœ‰å‘å¸ƒåˆ°è¿œç¨‹çš„githubæˆ–å…¶ä»–ä»£ç ä»“åº“åœ°å€ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬å°±éœ€è¦åœ¨go.modæ–‡ä»¶ä¸­ä½¿ç”¨replaceæŒ‡ä»¤ã€‚</p>

<p>åœ¨è°ƒç”¨æ–¹ä¹Ÿå°±æ˜¯packagedemo/go.modä¸­æŒ‰å¦‚ä¸‹æ–¹å¼æŒ‡å®šä½¿ç”¨ç›¸å¯¹è·¯å¾„æ¥å¯»æ‰¾mypackageè¿™ä¸ªåŒ…ã€‚</p>

<p>module moduledemo</p>

<p>go 1.14</p>

<p>require â€œmypackageâ€ v0.0.0
replace â€œmypackageâ€ =&gt; â€œ../mypackageâ€</p>

<p>https://zhuanlan.zhihu.com/p/109828249</p>

<p>æç¤ºæ‰¾ä¸åˆ° gitee.com/rockyang/testmodï¼Œæ˜¯å› ä¸ºä½ æ²¡æœ‰æŠŠä»“åº“æ¨é€åˆ°è¿œç¨‹ï¼Œæ‰€ä»¥æ— æ³•ä¸‹è½½ã€‚ go module æä¾›äº†å¦å¤–ä¸€ä¸ªæ–¹æ¡ˆ, ä½¿ç”¨ replace, ç¼–è¾‘ go.mod æ–‡ä»¶ï¼Œåœ¨æœ€åé¢æ·»åŠ ï¼š replace gitee.com/rockyang/testmod =&gt; /gopath/src/gitee.com/rockyang/testmod</p>

<p>http://www.r9it.com/20190611/go-mod-use-dev-package.html
<!-- more -->
https://n3xtchen.github.io/n3xtchen/go/2018/10/30/go-mod-local-pacakge</p>

<p>https://frankhitman.github.io/zh-CN/go_module/</p>

<p>go modules - replace does not work - replacement module without version must be directory path (rooted or starting with</p>

<p>æ›¿æ¢çš„æ—¶å€™å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„æˆ–è€…ç›¸å¯¹è·¯å¾„ï¼Œä¸èƒ½ç”¨gopathä¸‹çš„è·¯å¾„</p>

<p>https://stackoverflow.com/questions/55533971/go-modules-replace-does-not-work-replacement-module-without-version-must-be</p>

<p>https://juejin.im/post/5c9c8c4fe51d450bc9547ba1</p>

<p>https://www.zhihu.com/question/298126236</p>

<p>https://www.cnblogs.com/apocelipes/p/10295096.html</p>

<p>https://www.w3xue.com/exp/article/20191/18332.html</p>

<p>https://jaycechant.info/2020/golang-1-13-module-VS-package/</p>

<p>cannot load xxxx: malformed module path â€œxxxxxxâ€: missing dot in first path element 
è¿™ä¸ªåŸå› æ˜¯go.modæ–‡ä»¶ä¸­ï¼ŒmoduleæŒ‡å®šçš„åå­—è·Ÿå®é™…ç›®å½•ä¸åŒ¹é…ï¼Œæ”¹æˆå¯¹åº”è·¯å¾„å³å¯
å¦‚æœå‘ç°downloadpkgæ—¶é—´å¾ˆé•¿æˆ–è€…å¤±è´¥ï¼Œverifying xxx: xxx: malformed record data
å¯èƒ½æ²¡æœ‰è®¾ç½®GOPROXY=</p>

<p>å¦‚æœå‘ç°å·²æœ‰çš„åº“404 è¯·æ£€æŸ¥GOPROXY æ˜¯å¦æœ‰direct</p>

<ol>
  <li>go build æ—¶å‡ºç° no matching versions for query â€œlatestâ€
é”™è¯¯åŸå› 
go build æ£€æµ‹ä¸åˆ°ä¾èµ–</li>
</ol>

<p>è§£å†³æ–¹æ¡ˆ
å¦‚æœæ˜¯å¤–éƒ¨ä¾èµ–çš„è¯, ç¡®è®¤ä¾èµ–åœ¨ $GOPATH/pkg/mod/ ç›®å½•ä¸‹å­˜åœ¨
å¦‚æœæ˜¯é¡¹ç›®å†…éƒ¨ä¾èµ–çš„è¯, åŒæ ·éœ€è¦ç¡®è®¤ä¾èµ–çš„ä»£ç åœ¨é¡¹ç›®ç›®å½•ä¸‹å­˜åœ¨</p>
<ol>
  <li>æ‰§è¡Œ go build/test æ—¶å‡ºç° used for two different module paths
é”™è¯¯åŸå› 
åœ¨ go.mod ä½¿ç”¨äº† replace è¯­å¥å°†ä¸€ä¸ªä¾èµ– A çš„åœ°å€æ›¿æ¢ä¸ºå¦ä¸€ä¸ªä¾èµ– B, å¦‚æœ B æœ¬èº«å°±å·²ç»è¢«é¡¹ç›®ä½¿ç”¨çš„è¯, å°±ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯, ç›¸å½“åŒä¸€ä¸ªä¾èµ–è¢«ä¸åŒçš„ import è·¯å¾„ç»™å¼•å…¥äº†, è¿™æ˜¯ä¸å…è®¸çš„</li>
</ol>

<p>æ¯”å¦‚åœ¨ go.mod ä¸­å°† thrift æ›¿æ¢ä¸ºå†…éƒ¨ä¾èµ–</p>

<p>replace a v0xxx =&gt; b xxx
å¦‚æœåœ¨ä»£ç é‡ŒåŒæ—¶ import äº† a å’Œ b çš„è¯, å°±ä¼šæŠ¥é”™</p>

<p>è§£å†³æ–¹æ¡ˆ
å°† replace ä¸­çš„ä¾èµ– B æ›´æ¢ä¸ºä¸€ä¸ªæ²¡æœ‰åœ¨é¡¹ç›®ä¸­è¢«ä½¿ç”¨è¿‡çš„å¼•å…¥è·¯å¾„(æ¯”å¦‚å¯ä»¥æ–°å»ºä¸€ä¸ª git ä»“åº“æ¥æ”¾ä¾èµ– A)</p>

<ol>
  <li>å®‰è£…ä¾èµ–å‡ºç° unknown revision
é”™è¯¯åŸå› 
ä½¿ç”¨ go mod ä» git ä¸Šæ‹‰ä»“åº“æ—¶, ä¼šæœ‰å¾ˆå°æ¦‚ç‡å‡ºç°æ˜æ˜ä»“åº“æ‰“äº† tag/release, ä½†æ˜¯ go mod å´æ€ä¹ˆä¹Ÿä¸èƒ½è¯†åˆ«çš„æƒ…å†µ
è§£å†³æ–¹æ¡ˆ
go.mod ä¸­çš„ä¾èµ–ä¸ä»…å¯ä»¥æ˜¯ä¸ºä¸€ä¸ªå…·ä½“ç‰ˆæœ¬, ä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ª commit, å¯ä»¥é€šè¿‡ git ä¸Šæ‰¾åˆ°ç‰ˆæœ¬å¯¹åº”çš„ commit å¹¶è¿›è¡Œæ›¿æ¢</li>
</ol>

<p>æ¯”å¦‚ é€šè¿‡ github ä¸Šä»“åº“ä¸‹è½½ xx çš„æ–¹å¼å°±æ˜¯ç”¨çš„ commit å·</p>

<p>replace xx v0.2.3 =&gt; github.com/axzx v0.0.0-20161001171628-53dd39sda08
         æ—¶é—´æˆ³    commitid</p>

<p>https://learnku.com/articles/27401</p>

<p>https://juejin.im/post/5c8e503a6fb9a070d878184a</p>

<p>https://thewebivore.com/using-replace-in-go-mod-to-point-to-your-local-module/</p>

<p>è¸©å‘
xxx/conf imports
xxo: git ls-remote -q https://git.xxx in /Users/goLang/pkg/mod/cache/vcs/43d75fac7a7d83b: exit status 128:
        Warning: Permanently added â€˜git.  xxâ€™ (ECDSA) to the list of known hosts.</p>

<p>è§£å†³åŠæ³•
go.mod
replace git/xiazemin/mo latest =&gt; ../xiazemin/mo</p>

<p>go mod tidy
 git/xiazemin/mo: parsing ../../xiazemin/mo/go.mod: open /Users/xiazemin/mo/go.mod: no such file or 
directory</p>

<p>è§£å†³åŠæ³•
cd ../xiazemin/mo
go mod init</p>

<p>æ³¨æ„åœ¨å­packageé‡Œä¸èƒ½æœ‰ .modæ–‡ä»¶
å¦åˆ™ä¼šæŠ¥é”™
xxo: git ls-remote -q https://git.xxx in /Users/goLang/pkg/mod/cache/vcs/43d75fac7a7d83b: exit status 128:</p>

<p>åˆ é™¤å³å¯</p>

<p>æœæœè¿˜æœ‰é—®é¢˜ï¼Œæ£€æŸ¥ä¸‹æ˜¯å¦æœ‰ï¼
å¦åˆ™
replace git/xiazemin/mo/ latest =&gt; ../xiazemin/mo</p>

<p>ä»£ç å¼•ç”¨ git/xiazemin/mo/a
ä¼šæŠ¥é”™ xxo: git ls-remote -q https://git.xxxxiazemin/mo/a in /Users/goLang/pkg/mod/cache/vcs/43d75fac7a7d83b: exit status 128:</p>

<p>æ¨¡å—æ˜¯ç›¸å…³GoåŒ…çš„é›†åˆã€‚modulesæ˜¯æºä»£ç äº¤æ¢å’Œç‰ˆæœ¬æ§åˆ¶çš„å•å…ƒã€‚ goå‘½ä»¤ç›´æ¥æ”¯æŒä½¿ç”¨modulesï¼ŒåŒ…æ‹¬è®°å½•å’Œè§£æå¯¹å…¶ä»–æ¨¡å—çš„ä¾èµ–æ€§ã€‚modulesæ›¿æ¢æ—§çš„åŸºäºGOPATHçš„æ–¹æ³•æ¥æŒ‡å®šåœ¨ç»™å®šæ„å»ºä¸­ä½¿ç”¨å“ªäº›æºæ–‡ä»¶ã€‚</p>

<p>ç”±äº go.modä¼šæ‰«æåŒå·¥ä½œç›®å½•ä¸‹æ‰€æœ‰ package å¹¶ä¸”å˜æ›´å¼•å…¥æ–¹æ³•</p>

<p>https://juejin.im/post/5c8e503a6fb9a070d878184a</p>

<p>module ä¸ package
0x0 module ä¸æ˜¯ package
æ˜¯çš„ï¼Œä»–ä»¬ä¸æ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼ï¼moduleï¼ˆæ¨¡å—ï¼‰æ˜¯æ–°å¼•å…¥çš„æ¦‚å¿µï¼Œä¸€ä¸ª module æ˜¯ é›¶åˆ°å¤šä¸ª packageï¼ˆåŒ…ï¼‰çš„ç»„åˆï¼Œä¸è¦æŠŠä»–ä»¬æ··ä¸ºä¸€è°ˆã€‚</p>

<p>package	module
æœ¬è´¨	ä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰ go æºç çš„é›†åˆï¼ˆä¸åŒ…æ‹¬å­ç›®å½•ï¼Œé‚£æ˜¯å¦ä¸€ä¸ª packageï¼‰	åŒä¸€ä¸ªæ ¹ç›®å½•ä¸‹æ‰€æœ‰åŒ…çš„é›†åˆï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰
å…±äº«	ä»£ç  å…±äº«å‘½åç©ºé—´ï¼ˆåŒ…åï¼‰ï¼ŒåŒ…å†…å¯ä»¥ ç›´æ¥äº’ç›¸è°ƒç”¨ï¼ˆåŒ…æ‹¬å°å†™å¼€å¤´çš„ unexported membersï¼‰	åŒä¸€ä¸ª module ä¸‹çš„ package å…±äº« module path ä½œä¸º package path çš„å‰ç¼€ï¼Œmodule å†…å¯ä»¥ ç›´æ¥äº’ç›¸ import
å•ä½	ï¼ˆä»£ç å¼€å¤´ï¼‰import çš„å•ä½	ï¼ˆgo.modï¼‰require çš„å•ä½
package å…·ä½“ä½“ç°ä¸ºä¸€ä¸ªç›®å½•ä¸‹æ‰€æœ‰ go æºç çš„é›†åˆï¼ˆä¸åŒ…æ‹¬å­ç›®å½•ï¼Œé‚£æ˜¯å¦ä¸€ä¸ª packageï¼‰ï¼Œå®ƒä»¬ å…±äº«å‘½åç©ºé—´ï¼ˆåŒ…åï¼‰ï¼ŒåŒ…å†…å¯ä»¥ ç›´æ¥äº’ç›¸è°ƒç”¨ï¼ˆåŒ…æ‹¬å°å†™å¼€å¤´çš„ unexported membersï¼‰ã€‚package æ˜¯ import çš„å•ä½ ï¼Œimport è¯­å¥å†™åœ¨æ¯ä¸€ä¸ª go æºç æ–‡ä»¶çš„å¼€å¤´ã€‚
åŒ…åè·Ÿç›®å½•å å¯ä»¥ä¸€æ ·ä¹Ÿå¯ä»¥ä¸ä¸€æ ·ã€‚è™½ç„¶å…è®¸ä¸ä¸€æ ·ï¼Œä½†æ˜¯å¤§å®¶ä¹ æƒ¯æ€§è®¤ä¸ºç›®å½•å°±æ˜¯åŒ…åï¼›ä¸ºäº†é¿å…å¤§å®¶è¿˜è¦å»æŸ¥åŒ…åï¼Œ æ²¡ä»€ä¹ˆç‰¹åˆ«ç†ç”±å»ºè®®ä¿æŒä¸€è‡´ã€‚
ä¾‹å¦‚ï¼Œimport path/to/pkg_dir ä¸­çš„ pkg_dir æ˜¯ç›®å½•åï¼Œpackage pkg å’Œ pkg.MyFunc() é‡Œçš„ pkg æ˜¯åŒ…åã€‚</p>

<p>module åˆ™æ˜¯åŒä¸€ä¸ªæ ¹ç›®å½•ä¸‹æ‰€æœ‰åŒ…çš„é›†åˆï¼ˆåŒ…æ‹¬å­ç›®å½•ï¼‰ï¼Œå®ƒä»¬ å…±äº« module path ä½œä¸º package path çš„å‰ç¼€ï¼Œmodule å†…å¯ä»¥ ç›´æ¥äº’ç›¸ importã€‚module æ˜¯ require çš„å•ä½ ï¼Œrequire è¯­å¥åœ¨ go.mod é‡Œã€‚</p>

<p>https://jaycechant.info/2020/golang-1-13-module-VS-package/</p>

:ET