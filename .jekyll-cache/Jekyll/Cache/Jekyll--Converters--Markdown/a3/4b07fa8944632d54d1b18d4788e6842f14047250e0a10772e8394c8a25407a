I"­
<p>https://github.com/lxc/lxc
lxc_start.c
int main(int argc, char *argv[])
{
    int err = 1;
    struct lxc_conf *conf;    //åˆå§‹åŒ–configç»“æ„
    char *const *args;		 //ä¼ é€’çš„å‚æ•°
    char *rcfile = NULL;		 //æŒ‡å®šé…ç½®æ–‡ä»¶
    char *const default_args[] = {    //é»˜è®¤çš„argså‚æ•°
        â€œ/sbin/initâ€,
        NULL,
    };<br />
struct lxc_container *c;    //lxc-container çš„ç»“æ„ä½“
â€¦.
}
<!-- more -->
lxc_confè¿™ä¸ªæ•°æ®ç»“æ„
struct lxc_conf {
    int is_execute;		//å®¹å™¨æ˜¯å¦åœ¨æ‰§è¡Œ
    char *fstab;			//fstabï¼Ÿ
    int tty;				//ttyçš„ä¸ªæ•°
    int pts;				//ptsçš„ä¸ªæ•°ï¼Ÿ
    int reboot;			//é‡å¯ï¼Ÿ
    int need_utmp_watch;		//å­—é¢ç¿»è¯‘ éœ€è¦utmp æŸ¥çœ‹
    signed long personality;		//å­—é¢ç¿»è¯‘ ç‰¹ç‚¹	
    struct utsname *utsname;	//ustname
    struct lxc_list cgroup;		//cgroup list lxc_liståªæ˜¯ç®€å•çš„é“¾è¡¨ç»“æ„
    struct lxc_list id_map;		//id_map list
    struct lxc_list network;		//network list
    struct saved_nic *saved_nics;//saved_nics ç»“æ„
    int num_savednics;			//savednicsæ•°é‡ï¼Ÿ
    int auto_mounts;			//auto_mounts?
    struct lxc_list mount_list;		//mount_list list?
    struct lxc_list caps;			//caps listï¼Ÿ
    struct lxc_list keepcaps;		//keepcaps list?
    struct lxc_tty_info tty_info;	//ttyçš„ç›¸å…³ä¿¡æ¯
    struct lxc_console console;	//consoleçš„ç»“æ„ä½“
    struct lxc_rootfs rootfs;		//rootfsçš„ç»“æ„ä½“
    char *ttydir;					//ttyç›®å½•
int close_all_fds;			//å…³é—­æ‰€æœ‰fd
struct lxc_list hooks[NUM_LXC_HOOKS];	//hooks å‡½æ•°</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>char *lsm_aa_profile;   //?
char *lsm_se_context;	//?
int tmp_umount_proc;	//?
char *seccomp;  // filename with the seccomp rules #if HAVE_SCMP_FILTER_CTX
scmp_filter_ctx seccomp_ctx; #endif
int maincmd_fd;		//?
int autodev;  // if 1, mount and fill a /dev at start
int haltsignal; // signal used to halt container
int stopsignal; // signal used to hard stop container
int kmsg;  // if 1, create /dev/kmsg symlink
char *rcfile;   // Copy of the top level rcfile we read
 
// Logfile and loglevel can be set in a container config file.
// Those function as defaults.  The defaults can be overriden
// by command line.  However we don't want the command line
// specified values to be saved on c-&gt;save_config().  So we
// store the config file specified values here.
char *logfile;  // the logfile as specifed in config
int loglevel;   // loglevel as specifed in config (if any)
 
int inherit_ns_fd[LXC_NS_MAX];
 
int start_auto;
int start_delay;
int start_order;
struct lxc_list groups;
int nbd_idx;
 
/* set to true when rootfs has been setup */
bool rootfs_setup; };
</code></pre></div></div>
:ET