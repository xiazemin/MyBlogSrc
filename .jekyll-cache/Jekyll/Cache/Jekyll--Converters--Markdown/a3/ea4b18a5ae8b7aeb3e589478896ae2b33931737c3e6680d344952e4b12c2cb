I"<p>1.首先先查看mysql是否开启定时任务开关</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SHOW VARIABLES LIKE 'event_scheduler'; 2.Value为ON则已打开，OFF则关闭
</code></pre></div></div>

<p>如果是OFF，就先打开：</p>

<h1 id="set-global-event_scheduler--on">SET GLOBAL event_scheduler = ON;</h1>
<!-- more -->
<p>3.然后创建我们想要的定时器</p>

<p>DELIMITER
DROPEVENTIFEXISTSdeleteLog;CREATEEVENTdeleteLogONSCHEDULEEVERY300SECONDONCOMPLETIONPRESERVEDOBEGINdeletefromtsgcloginlogwhereTODAYS(now())−TODAYS(logintm)&gt;2;END
DROPEVENTIFEXISTSdeleteLog;CREATEEVENTdeleteLogONSCHEDULEEVERY300SECONDONCOMPLETIONPRESERVEDOBEGINdeletefromtsgcloginlogwhereTODAYS(now())−TODAYS(logintm)&gt;2;END
 
DELIMITER ; </p>

<p>该脚本的意思是：每300秒执行一次计划，执行的动作为删除两天前的数据</p>

<p>CREATE PROCEDURE <code class="language-plaintext highlighter-rouge">prc_del_um_time_stat</code>(IN date_inter int) COMMENT ‘自动删除日志’
BEGIN
delete from um_time_stat where (TO_DAYS(NOW()) - TO_DAYS(create_time))&gt;=date_inter;
END;</p>

<p>CREATE EVENT <code class="language-plaintext highlighter-rouge">auto_delete_um_time_stat</code> ON SCHEDULE EVERY 1 DAY STARTS ‘2019-05-08 00:00:00’
ON COMPLETION PRESERVE ENABLE COMMENT ‘自动删除30天以前的日志统计数据’ DO call prc_del_um_time_stat(30);</p>

<p>该脚本的意思是：每天凌晨执行一次计划，执行的动作为删除30天前的数据</p>

<p>4.创建完成后，查看定时器(需要root用户)</p>

<p>select * from  mysql.event;</p>

<p>https://www.cnblogs.com/c840136/articles/2388512.html</p>
:ET