---
title: Connection refused
layout: post
category: linux
author: 夏泽民
---
TCP/IP：连接服务器失败（错误原因：Connection refused）
Linux中，通过系统调用（system call） connect 连接指定服务器建立TCP连接。

connect 最常见的失败原因是 Connection refused。

假设服务器IP是192.168.44.148，且并 未有 进程监听端口是12500时：

若有TCP连接请求包到达192.168.44.148，则192.168.44.148的内核将 回复RST包 给客户端。

此时，在客户端一侧看来就是connect连接失败，被服务端拒绝连接
<!-- more -->
connect 发起TCP连接请求被拒绝是由于目标服务器上无对应的监听套接字（IP && PORT）。

Connection refused: connect问题解决方案集合
1）端口号被占用：杀死占用端口号（一般为8080）的进程，释放端口；彻底关闭 Tomcat 服务器，或者重新启动项目。
2）使用以下命令检查服务器中允许的最大进程数： ulimit -u。如果将此值设置为较低值，例如1024，则使用以下值将其增加到131072或无限制：ulimit -u 131072 或者 ulimit -u无限制 。
3）客户端和服务器，它们中的任何一个或两个都不在网络中。它们可能没有连接到LAN或互联网或任何其他网络，在这种情况下，Java将会抛出客户端的“ java.net.ConnectException：Connection refused ”异常。
4）服务器未运行用是服务器已关闭但未运行。在这种情况下，你也会得到java.net.ConnectException：连接被拒绝错误。可ping来检查服务器是否正在运行并侦听端口。5）服务器正在运行但没有侦听端口，客户端正在尝试连接。服务器正在运行但是正在侦听不同的端口。验证配置。如果你正在处理一个大项目，并有一个分层配置文件，它可能是默认配置或其他一些设置覆盖了您正确的设置。
6）主机端口组合不允许使用防火墙几乎每个企业网络都受防火墙保护。如果您正在连接其他公司网络，例如在任何电子交易系统中，需要提高防火墙双方要求确保他们允许彼此的IP地址和端口号。如果防火墙不允许连接，也会收到相同的java.net.ConnectException：Java应用程序中的连接拒绝异常。
7）主机端口组合不正确。提供的主机端口组合不正确，或者服务器端的早期主机端口组合已经更改。检查客户端和服务器端的最新配置。8）连接字符串中的协议不正确TCP是许多高级协议的基础协议，包括HTTP，RMI等。通过连接时字符串，你需要确保你传递正确的协议，服务器期望。例如服务器已暴露，通过 RMI 而不是连接字符串的服务应该以rmi：// 开头。