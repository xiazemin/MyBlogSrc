---
title: DDD中聚合、聚合根
layout: post
category: architect
author: 夏泽民
---
聚合: 聚合往往是一些实体为了某项业务而聚类在一起形成的集合 ， 举个例子， 社会是由一个个的个体组成的，象征着我们每一个人。随着社会的发展，慢慢出现了社团、机构、部门等组织，我们开始从个人变成了组织的一员，大家可以协同一致的工作，朝着一个最大的目标前进，发挥出更大的力量。领域模型内的实体和值对象就好比个体，而能让实体和值对象协同工作的组织就是聚合，它用来确保这些领域对象在实现共同的业务逻辑时，能保证数据的一致性。可以这么理解，聚合就是由业务和逻辑紧密关联的实体和值对象组合而成的，聚合是数据修改和持久化的基本单元，每一个聚合对应一个仓储，实现数据的持久化。

聚合根 : 前面有提到， 聚合有一个聚合根和上下文边界，这个边界根据业务单一职责和高内聚原则，定义了聚合内部应该包含哪些实体和值对象，而聚合之间的边界是松耦合的。按照这种方式设计出来的微
服务很自然就是“高内聚、低耦合”的。聚合根的主要目的是为了避免由于复杂数据模型缺少统一的业务规则控制，而导致聚合、实体之间数据不一致性的问题。传统数据模型中的每一个实体都是对等的，如果任由实体进行无控制地调用和数据修改，很可能会导致实体之间数据逻辑的不一致。而如果采用锁的方式则会增加软件的复杂度，也会降低系统的性能。

如果把聚合比作组织，那聚合根就是这个组织的负责人。聚合根也称为根实体，它不仅是实体，还是聚合的管理者。首先它作为实体本身，拥有实体的属性和业务行为，实现自身的业务逻辑。其次它作为聚合的管理者，在聚合内部负责协调实体和值对象按照固定的业务规则协同完成共同的业务逻辑。

https://blog.csdn.net/g6U8W7p06dCO99fQ3/article/details/122207270
<!-- more -->
1、用户界面层

负责用户显示信息和解释用户指令;

2、应用层

定义软件要完成的任务，并且指挥表达领域概念的对象来解决问题;

3、领域层

负责表达业务概念，业务状态信息以及业务规则;

领域层是业务软件的核心;


4、基础设施层

为上面各层提供通用的技术能力：为应用层传递消息，为领域层提供持久化机制

https://cloud.tencent.com/developer/article/1822441


常见的项目的目录结构基本上由：领域名（domain）、层名（layer）、构造型名（stereotype）、业务模块名（module）这四个部分组成。

https://xw.qq.com/cmsid/20211127A01A6D00
