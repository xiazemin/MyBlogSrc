---
title: upx
layout: post
category: golang
author: 夏泽民
---
https://github.com/upx/upx

Upx软件：https://github.com/upx/upx/releases/download/v3.94/upx-3.94-src.tar.xz

Lzma包：https://github.com/upx/upx-lzma-sdk/archive/v3.94.tar.gz

Ucl软件：http://mirrors.aliyun.com/ubuntu/pool/main/u/ucl/ucl_1.03.orig.tar.gz


UPX (the Ultimate Packer for eXecutables)是一款先进的可执行程序文件压缩器，压缩过的可执行文件体积缩小50%-70% ，这样减少了磁盘占用空间、网络上传下载的时间和其它分布以及存储费用。 通过 UPX 压缩过的程序和程序库完全没有功能损失和压缩之前一样可正常地运行，对于支持的大多数格式没有运行时间或内存的不利后果。 UPX 支持许多不同的可执行文件格式 包含 Windows 95/98/ME/NT/2000/XP/CE 程序和动态链接库、DOS 程序、 Linux 可执行文件和核心。

upx的功能有两种描述。一种叫做给程序加壳，另一种叫压缩程序。其实这两种表述都是正确的，只是从不同的角度对upx的
描述。upx的工作原理其实是这样的：首先将程序压缩。所谓的压缩包括两方面，一方面在程序的开头或者其他合适的地方插入一
段代码，另一方面是将程序的其他地方做压缩。压缩也可以叫做加密，因为压缩后的程序比较难看懂，主要是和原来的代码有很大
的不同。最大的表现也就是他的主要作用就是程序本身变小了。变小之后的程序在传输方面有很大的优势。其次就是在程序执行时
，实时的对程序解压缩。解压缩功能是在第一步时插入的代码完成的功能。联起来 就是：upx可以完成代码的压缩和实时解压执行
。且不会影响程序的执行效率。upx和普通的压缩，解压不同点就算在于upx是实时解压缩的。
<!-- more -->
upx是一
种典型的加壳程序或者压缩程序。因此已经有非常成熟的去壳程序或者解压缩程序。同时，很多的杀毒软件 也可以识别出加有upx
壳的病毒和木马。而一些软件生产场上为了防止被破解所加的壳也同时被轻易的破解。在这样 的情况下很多人想出了产生自己的
加壳程序的想法。应此很多人都通过改编一些成熟的加壳程序来产生自己的加壳程序。其实改编upx也是很简单的。因为upx的源代
码是公开的，所以可以下载它的源代码来瞧瞧。upx可以压缩很多种类型 的可执行文件。因此如果自己只是想要压缩exe程序，则
只需要阅读与压缩exe文件相关的内容。这些代码是很少的。  

改写upx一般需要注意一下几点： 
1、保证修改后的加壳程序不会产生upx产生的特征码。有很多软件可以通过这些特征码识别出程序是经过upx加壳的。 
2、保证加壳之后，程序仍然可以顺利执行。 
3、在一定程度上保证效率不会下降太多。