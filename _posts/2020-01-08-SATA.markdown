---
title: SATA硬盘和SSD硬盘性能测试对比
layout: post
category: linux
author: 夏泽民
---
测试工具： fio

测试对象： SATA硬盘， SSD硬盘

测试项目：顺序读、随机读、顺序写、随机写

 

1. 顺序读
测试命令：fio -name iops -rw=read -bs=4k -runtime=60 -iodepth 32 -filename /dev/sda -ioengine libaio -direct=1

测试结果：

                SATA硬盘      bw(io带宽)=205MB/s, iops=51455, util=99.87%(磁盘使用率)

                SSD硬盘       bw=311MB/s, iops=77911, util=99.87%

 

2. 随机读
测试命令：fio -name iops -rw=randread -bs=4k -runtime=60 -iodepth 32 -filename /dev/sda -ioengine libaio -direct=1

测试结果：

                SATA硬盘      bw=547KB/s, iops=133, util=99.92%

                SSD硬盘       bw=246MB, iops=61746, util=99.87%

3. 顺序写
测试命令：fio -name iops -rw=write -bs=4k -runtime=60 -iodepth 32 -filename /dev/sda -ioengine libaio -direct=1

测试结果：

                SATA硬盘     bw=197MB/s, iops=49408, util=100.00%

                SSD硬盘       bw=333MB/s, iops=83333, util=99.88%
<!-- more -->
4. 随机写
测试命令：fio -name iops -rw=randwrite -bs=4k -runtime=60 -iodepth 32 -filename /dev/sda -ioengine libaio -direct=1

测试结果：

                SATA硬盘      bw=558KB/s, iops=136, util=99.91%

                SSD硬盘       bw=120MB/s, iops=30168, util=99.89%

 

结论： 从结果来看，SSD硬盘在顺序读写上面是SATA硬盘的1.5~1.7 倍左右，高的并不算明显；

                                    而在随机读写方面，SSD硬盘是SATA硬盘的200~400倍。

固态硬盘从存储介质分的话，有两种：一种是采用闪存（FLASH芯片）作为存储介质，另外一种是采用DRAM作为存储介质。基于闪存的固态硬盘采用FLASH芯片作为存储介质，这也是我们通常所说的SSD固态硬盘，最大的优点就是可以移动，而且数据保护不受电源控制，能适应于各种环境，但是使用年限不高，适合于个人用户使用；基于DRAM的固态硬盘采用DRAM作为存储介质，目前应用范围较窄，它仿效传统硬盘的设计、可被绝大部分操作系统的文件系统工具进行卷设置和管理，并提供工业标准的PCI和FC接口用于连接主机或者服务器，它是一种高性能的存储器，存储速度异常快，而且使用寿命很长，美中不足的是需要独立电源来保护数据安全，一旦断电，数据全部消失。
SATA固态硬盘ATA固态硬盘则是根据接口类型划分的了。

SSD：Solid State Drive，固态硬盘，一种以半导体闪存（NAND Flash）作为介质的存储设备。和传统机械硬盘 (Hard Disk Drive，下面称HDD)不同，SSD以半导体存储数据，纯电子电路实现，没有任何机械设备，这就决定了它在性能、功耗、可靠性等方面和HDD有很大不同。其实SSD的概念很早就有，但真正成为主流存储应用还是最近10年的事情。记得笔者2008年初入SSD行业，那时候只有很少的几家公司研发SSD，如今（2017年），已有成百家大小公司参与其中。无论是在消费级还是企业级市场，SSD已经动了两家HDD巨无霸公司西数(WD)和希捷(Seagate)的根基，正在取代HDD成为主流的存储设备。

在SSD大行其道的今天，从事存储行业的人如果不知道SSD，犹如“人不见陈近南，就称英雄也枉然”。本章节将带领大家初识“陈近南”。

1.1引子

先从开机速度说起。

过去，电脑启动一般需要几十秒甚至上分钟。开机，出去倒茶，回来，电脑还在打转转。如今，使用了SSD后，开机只要几秒钟：开机，正起身准备去倒茶，开机助手就已经提示你：本次开机8秒钟，击败全国99%的用户。算了，茶还是不倒了。



图1-1 SSD开机时间统计（单位：秒）

速度快，是用户在使用SSD过程中最为直观的感受。那是什么成就了SSD的神速呢？除了速度快，相比HDD，SSD还有什么优点呢？这就得从SSD的原理说起了。

SSD是一种以半导体为主要存储介质、外形和数据传输接口与传统的HDD相同的存储产品。目前主流SSD使用一种叫闪存的存储介质，未来随着存储半导体芯片技术的发展，它也可以使用更快、更可靠、更省电的新介质，例如3D XPoint、MRAM等。由于当前业界主要使用的还是闪存，所以我们本书讨论还是以闪存为主。

外观上，加上铝盒的2.5寸的图样，和2.5寸HDD外观基本相同。除了有传统HDD的2.5寸和3.5寸的外观，SSD可以有更小的封装和尺寸，如图1-2中M.2接口的SSD。（关于SSD的接口形态，后续有详细的介绍）。





图1-2 SSD外观（上：2.5寸盘；下：M.2 SSD）

SSD是用固态电子存储芯片阵列制成的硬盘，主要部件为控制器和存储芯片，内部构造十分简单。详细来看，SSD硬件几大组成部分：主控，闪存，缓存芯片DRAM（可选，有些SSD上可能只有SRAM，并没有配置DRAM），PCB（电源芯片、电阻、电容等），接口（SATA、SAS、PCIe等），其主体就是一块PCB；软件角度，SSD内部运行固件（Firmware, FW），FW负责调度数据从接口端到介质端的读写，还包括嵌入核心的闪存介质寿命和可靠性管理调度算法，以及其它一些SSD内部算法。SSD控制器、闪存和固件是SSD的技术核心，后面章节会有一定深度的介绍。



图1-3 SSD结构

前面讲了当前SSD存储介质主要是闪存，先讲一个基本概念，什么是存储介质?



图1-4 存储介质分类

按物理材料区分为三大类：光学、半导体和磁性。光学存储，就是大家之前都使用过的DVD、 CD等光盘介质，靠光驱等主机读取或写入；在SSD出现之前，个人和企业的数据存储还是HDD的天下，HDD是以磁性介质存储数据；SSD出现以后，采取的是半导体芯片作为存储介质，更快更可靠和更省电。现在及未来技术变革最快和主要方向还是半导体存储，从图1-4可以看出半导体存储芯片五花八门，目前可以看得出的主要方向还是闪存、3D XPoint、MRAM、RRAM等等。

当前闪存生产供应商主要有：Micron（美国美光），Samsung（韩国三星），SK Hynix（韩国现代海力士），Toshiba（日本东芝），WD & Sandisk（西数和闪迪），基本上这几家垄断了闪存市场，当然未来会有新的加入者，给用户以更多的选择。

1.2 SSD vs. HDD

传统的HDD是“马达+磁头+磁盘”的机械结构，SSD则变成了“闪存介质+主控”的半导体存储芯片结构，完全不同的数据存储介质和读写方式。对比如下：

表1-1 HDD vs SSD结构对比

 	方式	数据存放介质	读取写入
HDD	机械	磁盘（磁性介质）	磁头+马达（寻址）
SSD	电子	闪存	SSD控制器
再看一下SSD和HDD物理结构的不同。