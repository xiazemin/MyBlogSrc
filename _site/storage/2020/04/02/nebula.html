<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>æ³½æ°‘åšå®¢ | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--ç™¾åº¦ç»Ÿè®¡-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--è½®æ’­å›¾ç‰‡-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--æ°´å°-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'æ³½æ°‘åšå®¢',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--æ°´å°-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">æ³½æ°‘åšå®¢</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">nebula å›¾æ•°æ®åº“</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by å¤æ³½æ°‘</span></span> <time datetime="2020-04-02T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Apr 2, 2020</time></p>
					</div>
					 <p>https://github.com/vesoft-inc/nebula?utm_source=go<br />
https://gocn.vip/topics/10164<br />
http://blog.itpub.net/69952037/viewspace-2683907/<br />
<!-- more --><br />
ä»ç¤¾äº¤ç½‘ç»œè°ˆèµ·<br />
ä¸‹é¢è¿™å¼ å›¾æ˜¯ä¸€ä¸ªç¤¾äº¤ç½‘ç»œåœºæ™¯ï¼Œæ¯ä¸ªç”¨æˆ·å¯ä»¥å‘å¾®åšã€åˆ†äº«å¾®åšæˆ–è¯„è®ºä»–äººçš„å¾®åšã€‚è¿™äº›éƒ½æ˜¯æœ€åŸºæœ¬çš„å¢åˆ æ”¹æŸ¥ï¼Œä¹Ÿæ˜¯å¤§å¤šæ•°ç ”å‘äººå‘˜å¯¹æ•°æ®åº“åšçš„å¸¸è§æ“ä½œã€‚è€Œåœ¨ç ”å‘äººå‘˜çš„æ—¥å¸¸å·¥ä½œä¸­é™¤äº†è¦æŠŠç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯å½•å…¥æ•°æ®åº“å¤–ï¼Œè¿˜éœ€æ‰¾åˆ°ä¸è¯¥ç”¨æˆ·ç›¸å…³è”çš„ä¿¡æ¯ï¼Œæ–¹ä¾¿å»å¯¹å•ä¸ªçš„ç”¨æˆ·è¿›è¡Œä¸‹ä¸€æ­¥çš„åˆ†æï¼Œæ¯”å¦‚è¯´ï¼šæˆ‘ä»¬å‘ç°å¼ ä¸‰çš„è´¦æˆ·é‡Œæœ‰å¾ˆå¤šå…³äº AI å’ŒéŸ³ä¹çš„å†…å®¹ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥æ®æ­¤æ¨æµ‹å‡ºä»–å¯èƒ½æ˜¯ä¸€åç¨‹åºå‘˜ï¼Œä»è€Œæ¨é€ä»–å¯èƒ½æ„Ÿå…´è¶£çš„å†…å®¹ã€‚</p><br />
<br />
<p>image</p><br />
<br />
<p>è¿™äº›æ•°æ®åˆ†ææ¯æ—¶æ¯åˆ»éƒ½ä¼šå‘ç”Ÿï¼Œä½†æœ‰æ—¶å€™ï¼Œä¸€ä¸ªç®€å•çš„æ•°æ®å·¥ä½œæµåœ¨å®ç°çš„æ—¶å€™å¯èƒ½ä¼šå˜å¾—ç›¸å½“å¤æ‚ï¼Œæ­¤å¤–æ•°æ®åº“æ€§èƒ½ä¹Ÿä¼šéšç€æ•°æ®é‡çš„å¢åŠ è€Œé”å‡ï¼Œæ¯”å¦‚è¯´è·å–æŸç®¡ç†è€…ä¸‹å±ä¸‰çº§æ±‡æŠ¥å…³ç³»çš„å‘˜å·¥ï¼Œè¿™ç§ç»Ÿè®¡æŸ¥è¯¢åœ¨ç°åœ¨çš„æ•°æ®åˆ†æä¸­æ˜¯ä¸€ç§å¸¸è§çš„æ“ä½œï¼Œè€Œè¿™ç§æ“ä½œå¾€å¾€ä¼šå› ä¸ºæ•°æ®åº“é€‰å‹å¯¼è‡´æ€§èƒ½äº§ç”Ÿå·¨å¤§å·®å¼‚ã€‚</p><br />
<br />
<p>ä¼ ç»Ÿæ•°æ®åº“çš„è§£å†³æ€è·¯<br />
ä¼ ç»Ÿæ•°æ®åº“çš„æ¦‚å¿µæ¨¡å‹åŠæŸ¥è¯¢çš„ä»£ç <br />
ä¼ ç»Ÿè§£å†³ä¸Šè¿°é—®é¢˜æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å»ºç«‹ä¸€ä¸ªå…³ç³»æ¨¡å‹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæ¯ä¸ªå‘˜å·¥çš„ä¿¡æ¯å½•å…¥è¡¨ä¸­ï¼Œå­˜åœ¨è¯¸å¦‚ MySQL ä¹‹ç±»çš„å…³ç³»æ•°æ®åº“ï¼Œä¸‹å›¾æ˜¯æœ€åŸºæœ¬çš„å…³ç³»æ¨¡å‹ï¼š</p><br />
<br />
<p>image</p><br />
<br />
<p>ä½†æ˜¯åŸºäºä¸Šè¿°çš„å…³ç³»æ¨¡å‹ï¼Œè¦å®ç°æˆ‘ä»¬çš„éœ€æ±‚ï¼Œå°±ä¸å¯é¿å…åœ°æ¶‰åŠåˆ°å¾ˆå¤šå…³ç³»æ•°æ®åº“ JOIN æ“ä½œï¼ŒåŒæ—¶å®ç°å‡ºæ¥çš„æŸ¥è¯¢è¯­å¥ä¹Ÿä¼šå˜å¾—ç›¸å½“é•¿ (æœ‰æ—¶è¾¾åˆ°ä¸Šç™¾è¡Œ)ï¼š</p><br />
<br />
<p>(SELECT T.directReportees AS directReportees, sum(T.count) AS count<br />
FROM (<br />
SELECT manager.pid AS directReportees, 0 AS count<br />
    FROM person_reportee manager<br />
    WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
UNION<br />
    SELECT manager.pid AS directReportees, count(manager.directly_manages) AS count<br />
FROM person_reportee manager<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
GROUP BY directReportees<br />
UNION<br />
SELECT manager.pid AS directReportees, count(reportee.directly_manages) AS count<br />
FROM person_reportee manager<br />
JOIN person_reportee reportee<br />
ON manager.directly_manages = reportee.pid<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
GROUP BY directReportees<br />
UNION<br />
SELECT manager.pid AS directReportees, count(L2Reportees.directly_manages) AS count<br />
FROM person_reportee manager<br />
JOIN person_reportee L1Reportees<br />
ON manager.directly_manages = L1Reportees.pid<br />
JOIN person_reportee L2Reportees<br />
ON L1Reportees.directly_manages = L2Reportees.pid<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
GROUP BY directReportees<br />
) AS T<br />
GROUP BY directReportees)<br />
UNION<br />
(SELECT T.directReportees AS directReportees, sum(T.count) AS count<br />
FROM (<br />
SELECT manager.directly_manages AS directReportees, 0 AS count<br />
FROM person_reportee manager<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
UNION<br />
SELECT reportee.pid AS directReportees, count(reportee.directly_manages) AS count<br />
FROM person_reportee manager<br />
JOIN person_reportee reportee<br />
ON manager.directly_manages = reportee.pid<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
GROUP BY directReportees<br />
UNION<br />
SELECT depth1Reportees.pid AS directReportees,<br />
count(depth2Reportees.directly_manages) AS count<br />
FROM person_reportee manager<br />
JOIN person_reportee L1Reportees<br />
ON manager.directly_manages = L1Reportees.pid<br />
JOIN person_reportee L2Reportees<br />
ON L1Reportees.directly_manages = L2Reportees.pid<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
GROUP BY directReportees<br />
) AS T<br />
GROUP BY directReportees)<br />
UNION<br />
(SELECT T.directReportees AS directReportees, sum(T.count) AS count<br />
    FROM(<br />
    SELECT reportee.directly_manages AS directReportees, 0 AS count<br />
FROM person_reportee manager<br />
JOIN person_reportee reportee<br />
ON manager.directly_manages = reportee.pid<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
GROUP BY directReportees<br />
UNION<br />
SELECT L2Reportees.pid AS directReportees, count(L2Reportees.directly_manages) AS<br />
count<br />
FROM person_reportee manager<br />
JOIN person_reportee L1Reportees<br />
ON manager.directly_manages = L1Reportees.pid<br />
JOIN person_reportee L2Reportees<br />
ON L1Reportees.directly_manages = L2Reportees.pid<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
GROUP BY directReportees<br />
) AS T<br />
GROUP BY directReportees)<br />
UNION<br />
(SELECT L2Reportees.directly_manages AS directReportees, 0 AS count<br />
FROM person_reportee manager<br />
JOIN person_reportee L1Reportees<br />
ON manager.directly_manages = L1Reportees.pid<br />
JOIN person_reportee L2Reportees<br />
ON L1Reportees.directly_manages = L2Reportees.pid<br />
WHERE manager.pid = (SELECT id FROM person WHERE name = â€œfName lNameâ€)<br />
)<br />
è¿™ç§ glue ä»£ç å¯¹ç»´æŠ¤äººå‘˜å’Œå¼€å‘è€…æ¥è¯´å°±æ˜¯ä¸€åœºç¾éš¾ï¼Œæ²¡æœ‰äººæƒ³å†™æˆ–è€…å»è°ƒè¯•è¿™ç§ä»£ç ï¼Œæ­¤å¤–ï¼Œè¿™ç±»ä»£ç å¾€å¾€ä¼´éšç€ä¸¥é‡çš„æ€§èƒ½é—®é¢˜ï¼Œè¿™ä¸ªåœ¨ä¹‹åä¼šè¯¦ç»†è®¨è®ºã€‚</p><br />
<br />
<p>ä¼ ç»Ÿå…³ç³»æ•°æ®åº“çš„æ€§èƒ½é—®é¢˜<br />
æ€§èƒ½é—®é¢˜çš„æœ¬è´¨åœ¨äºæ•°æ®åˆ†æé¢ä¸´çš„æ•°æ®é‡ï¼Œå‡å¦‚åªæŸ¥è¯¢å‡ åä¸ªèŠ‚ç‚¹æˆ–è€…æ›´å°‘çš„å†…å®¹ï¼Œè¿™ç§æ“ä½œæ˜¯å®Œå…¨ä¸éœ€è¦è€ƒè™‘æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–çš„ï¼Œä½†å½“èŠ‚ç‚¹æ•°æ®ä»å‡ ç™¾ä¸ªå˜æˆå‡ ç™¾ä¸‡ä¸ªç”šè‡³å‡ åƒä¸‡ä¸ªåï¼Œæ•°æ®åº“æ€§èƒ½å°±æˆä¸ºäº†æ•´ä¸ªäº§å“è®¾è®¡çš„è¿‡ç¨‹ä¸­æœ€éœ€è€ƒè™‘çš„å› ç´ ä¹‹ä¸€ã€‚</p><br />
<br />
<p>éšç€èŠ‚ç‚¹çš„å¢å¤šï¼Œç”¨æˆ·è·Ÿç”¨æˆ·é—´çš„å…³ç³»ï¼Œç”¨æˆ·å’Œäº§å“é—´çš„å…³ç³»ï¼Œæˆ–è€…äº§å“å’Œäº§å“é—´çš„å…³ç³»éƒ½ä¼šå‘ˆæŒ‡æ•°å¢é•¿ã€‚</p><br />
<br />
<p>ä»¥ä¸‹æ˜¯ä¸€äº›å…¬å¼€çš„æ•°æ®ï¼Œå¯ä»¥åæ˜ æ•°æ®ã€æ•°æ®å’Œæ•°æ®é—´å…³ç³»çš„ä¸€äº›å®é™…æƒ…å†µï¼š</p><br />
<br />
<p>æ¨ç‰¹ï¼šç”¨æˆ·é‡ä¸º 5 äº¿ï¼Œç”¨æˆ·ä¹‹é—´å­˜åœ¨å…³æ³¨ã€ç‚¹èµå…³ç³»<br />
äºšé©¬é€Šï¼šç”¨æˆ·é‡ 1.2 äº¿ï¼Œç”¨æˆ·å’Œäº§å“é—´å­˜åœ¨è´­ä¹°å…³ç³»<br />
AT&amp;Tï¼ˆç¾å›½ä¸‰å¤§è¿è¥å•†ä¹‹ä¸€ï¼‰ï¼š 1 äº¿ä¸ªå·ç ï¼Œç”µè¯å·ç é—´å¯å»ºç«‹é€šè¯å…³ç³»<br />
å¦‚ä¸‹è¡¨æ‰€ç¤ºï¼Œå¼€æºçš„å›¾æ•°æ®é›†å¾€å¾€æœ‰ç€ä¸Šåƒä¸‡ä¸ªèŠ‚ç‚¹å’Œä¸Šäº¿çš„è¾¹çš„æ•°æ®ï¼š</p><br />
<br />
<p>Data set name	nodes	edges<br />
YahooWeb	1.4 Billion	6 Billion<br />
Symantec Machine-File Graph	1 Billion	37 Billion<br />
Twitter	104 Million	3.7 Billion<br />
Phone call network	30 Million	260 Million<br />
åœ¨æ•°æ®é‡è¿™ä¹ˆå¤§çš„åœºæ™¯ä¸­ï¼Œä½¿ç”¨ä¼ ç»Ÿ SQL ä¼šäº§ç”Ÿå¾ˆå¤§çš„æ€§èƒ½é—®é¢˜ï¼ŒåŸå› ä¸»è¦æœ‰ä¸¤ä¸ªï¼š</p><br />
<br />
<p>å¤§é‡ JOIN æ“ä½œå¸¦æ¥çš„å¼€é”€ï¼šä¹‹å‰çš„æŸ¥è¯¢è¯­å¥ä½¿ç”¨äº†å¤§é‡çš„ JOIN æ“ä½œæ¥æ‰¾åˆ°éœ€è¦çš„ç»“æœã€‚è€Œå¤§é‡çš„ JOIN æ“ä½œåœ¨æ•°æ®é‡å¾ˆå¤§æ—¶ä¼šæœ‰å·¨å¤§çš„æ€§èƒ½æŸå¤±ï¼Œå› ä¸ºæ•°æ®æœ¬èº«æ˜¯è¢«å­˜æ”¾åœ¨æŒ‡å®šçš„åœ°æ–¹ï¼ŒæŸ¥è¯¢æœ¬èº«åªéœ€è¦ç”¨åˆ°éƒ¨åˆ†æ•°æ®ï¼Œä½†æ˜¯ JOIN æ“ä½œæœ¬èº«ä¼šéå†æ•´ä¸ªæ•°æ®åº“ï¼Œè¿™æ ·å°±ä¼šå¯¼è‡´æŸ¥è¯¢æ•ˆç‡ä½åˆ°è®©äººæ— æ³•æ¥å—ã€‚<br />
åå‘æŸ¥è¯¢å¸¦æ¥çš„å¼€é”€ï¼šæŸ¥è¯¢å•ä¸ªç»ç†çš„ä¸‹å±ä¸éœ€è¦å¤šå°‘å¼€é”€ï¼Œä½†æ˜¯å¦‚æœæˆ‘ä»¬è¦å»åå‘æŸ¥è¯¢ä¸€ä¸ªå‘˜å·¥çš„è€æ¿ï¼Œä½¿ç”¨è¡¨ç»“æ„ï¼Œå¼€é”€å°±ä¼šå˜å¾—éå¸¸å¤§ã€‚è¡¨ç»“æ„è®¾è®¡å¾—ä¸åˆç†ï¼Œä¼šå¯¹åç»­çš„åˆ†æã€æ¨èç³»ç»Ÿäº§ç”Ÿæ€§èƒ½ä¸Šçš„å½±å“ã€‚æ¯”å¦‚ï¼Œå½“å…³ç³»ä»è€æ¿ -&gt; å‘˜å·¥ å˜æˆ ç”¨æˆ· -&gt; äº§å“ï¼Œå¦‚æœä¸æ”¯æŒåå‘æŸ¥è¯¢ï¼Œæ¨èç³»ç»Ÿçš„å®æ—¶æ€§å°±ä¼šå¤§æ‰“æŠ˜æ‰£ï¼Œè¿›è€Œå¸¦æ¥ç»æµæŸå¤±ã€‚<br />
ä¸‹è¡¨åˆ—å‡ºçš„æ˜¯ä¸€ä¸ªéå®˜æ–¹çš„æ€§èƒ½æµ‹è¯•ï¼ˆç¤¾äº¤ç½‘ç»œæµ‹è¯•é›†ï¼Œä¸€ç™¾ä¸‡ç”¨æˆ·ï¼Œæ¯ä¸ªå¤§æ¦‚æœ‰ 50 ä¸ªå¥½å‹ï¼‰ï¼Œä½“ç°äº†åœ¨å…³ç³»æ•°æ®åº“é‡Œï¼Œéšç€å¥½å‹æŸ¥è¯¢æ·±åº¦çš„å¢åŠ è€Œäº§ç”Ÿçš„æ€§èƒ½å˜åŒ–ï¼š</p><br />
<br />
<p>levels	RDBMS execution time(s)<br />
2	0.016<br />
3	30.267<br />
4	1543.595<br />
ä¼ ç»Ÿæ•°æ®åº“çš„å¸¸è§„ä¼˜åŒ–ç­–ç•¥<br />
ç­–ç•¥ä¸€ï¼šç´¢å¼•<br />
ç´¢å¼•ï¼šSQL å¼•æ“é€šè¿‡ç´¢å¼•æ¥æ‰¾åˆ°å¯¹åº”çš„æ•°æ®ã€‚</p><br />
<br />
<p>å¸¸è§çš„ç´¢å¼•åŒ…æ‹¬ B- æ ‘ç´¢å¼•å’Œå“ˆå¸Œç´¢å¼•ï¼Œå»ºç«‹è¡¨çš„ç´¢å¼•æ˜¯æ¯”è¾ƒå¸¸è§„çš„ä¼˜åŒ– SQL æ€§èƒ½çš„æ“ä½œã€‚B- æ ‘ç´¢å¼•ç®€å•åœ°æ¥è¯´å°±æ˜¯ç»™æ¯ä¸ªäººä¸€ä¸ªå¯æ’åºçš„ç‹¬ç«‹ IDï¼ŒB- æ ‘æœ¬èº«æ˜¯ä¸€ä¸ªå¹³è¡¡å¤šå‰æœç´¢æ ‘ï¼Œè¿™ä¸ªæ ‘ä¼šå°†æ¯ä¸ªå…ƒç´ æŒ‰ç…§ç´¢å¼• ID è¿›è¡Œæ’åºï¼Œä»è€Œæ”¯æŒèŒƒå›´æŸ¥æ‰¾ï¼ŒèŒƒå›´æŸ¥æ‰¾çš„å¤æ‚åº¦æ˜¯ O(logN)  ï¼Œå…¶ä¸­ N æ˜¯ç´¢å¼•çš„æ–‡ä»¶æ•°ç›®ã€‚</p><br />
<br />
<p>ä½†æ˜¯ç´¢å¼•å¹¶ä¸èƒ½è§£å†³æ‰€æœ‰çš„é—®é¢˜ï¼Œå¦‚æœæ–‡ä»¶æ›´æ–°é¢‘ç¹æˆ–è€…æœ‰å¾ˆå¤šé‡å¤çš„å…ƒç´ ï¼Œå°±ä¼šå¯¼è‡´å¾ˆå¤§çš„ç©ºé—´æŸè€—ï¼Œæ­¤å¤–ç´¢å¼•çš„ IO æ¶ˆè€—ä¹Ÿå€¼å¾—è€ƒè™‘ï¼Œç´¢å¼• IO å°¤å…¶æ˜¯åœ¨æœºæ¢°ç¡¬ç›˜ä¸Šçš„ IO è¯»å†™æ€§èƒ½ä¸Šæ¥è¯´éå¸¸ä¸ç†æƒ³ï¼Œå¸¸è§„çš„ B- æ ‘ç´¢å¼•æ¶ˆè€—å››æ¬¡ IO éšæœºè¯»ï¼Œå½“ JOIN æ“ä½œå˜å¾—è¶Šæ¥è¶Šå¤šæ—¶ï¼Œç¡¬ç›˜æŸ¥æ‰¾æ›´å¯èƒ½å‘ç”Ÿä¸Šç™¾æ¬¡ã€‚</p><br />
<br />
<p>ç­–ç•¥äºŒï¼šç¼“å­˜<br />
ç¼“å­˜ï¼šç¼“å­˜ä¸»è¦æ˜¯ä¸ºäº†è§£å†³æœ‰å…·æœ‰ç©ºé—´æˆ–è€…æ—¶é—´å±€åŸŸæ€§æ•°æ®çš„é¢‘ç¹è¯»å–å¸¦æ¥çš„æ€§èƒ½ä¼˜åŒ–é—®é¢˜ã€‚ä¸€ä¸ªæ¯”è¾ƒå¸¸è§çš„ä½¿ç”¨ç¼“å­˜çš„æ¶æ„æ˜¯ lookaside cache architectureã€‚ä¸‹å›¾æ˜¯ä¹‹å‰ Facebook ç”¨ Memcached  + MySQL çš„å®ä¾‹ï¼ˆç°å·²è¢« Facebook è‡ªç ”çš„å›¾æ•°æ®åº“ TAO æ›¿ä»£ï¼‰ï¼š</p><br />
<br />
<p>image</p><br />
<br />
<p>åœ¨æ¶æ„ä¸­ï¼Œè®¾è®¡è€…å‡è®¾ç”¨æˆ·åˆ›é€ çš„å†…å®¹æ¯”ç”¨æˆ·è¯»å–çš„å†…å®¹è¦å°‘å¾—å¤šï¼ŒMemcached å¯ä»¥ç®€å•åœ°ç†è§£æˆä¸€ä¸ªåˆ†å¸ƒå¼çš„æ”¯æŒå¢åˆ æ”¹æŸ¥çš„å“ˆå¸Œè¡¨ï¼Œæ”¯æŒä¸Šäº¿é‡çº§çš„ç”¨æˆ·è¯·æ±‚ã€‚åŸºæœ¬çš„ä½¿ç”¨æµç¨‹æ˜¯å½“å®¢æˆ·ç«¯éœ€è¯»æ•°æ®æ—¶ï¼Œå…ˆæŸ¥çœ‹ä¸€ä¸‹ç¼“å­˜ï¼Œç„¶åå†å»æŸ¥è¯¢ SQL æ•°æ®åº“ã€‚è€Œå½“ç”¨æˆ·éœ€è¦å†™å…¥æ•°æ®æ—¶ï¼Œå®¢æˆ·ç«¯å…ˆåˆ é™¤ç¼“å­˜ä¸­çš„ keyï¼Œè®©æ•°æ®è¿‡æœŸï¼Œå†å»æ›´æ–°æ•°æ®åº“ã€‚ä½†æ˜¯è¿™ç§æ¶æ„æœ‰å‡ ä¸ªé—®é¢˜ï¼š</p><br />
<br />
<p>é¦–å…ˆï¼Œé”®å€¼ç¼“å­˜å¯¹äºå›¾ç»“æ„æ•°æ®å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„æ“ä½œè¯­å¥ï¼Œæ¯æ¬¡æŸ¥è¯¢ä¸€æ¡è¾¹ï¼Œéœ€è¦ä»ç¼“å­˜é‡ŒæŠŠèŠ‚ç‚¹å¯¹åº”çš„è¾¹å…¨éƒ¨æ‹¿å‡ºæ¥ï¼›æ­¤å¤–ï¼Œå½“æ›´æ–°ä¸€æ¡è¾¹ï¼ŒåŸæ¥çš„æ‰€æœ‰ä¾èµ–è¾¹è¦è¢«åˆ é™¤ï¼Œç»§è€Œéœ€è¦é‡æ–°åŠ è½½æ‰€æœ‰å¯¹åº”è¾¹çš„æ•°æ®ï¼Œè¿™äº›éƒ½æ˜¯å¹¶å‘çš„æ€§èƒ½ç“¶é¢ˆï¼Œæ¯•ç«Ÿå®é™…åœºæ™¯ä¸­ä¸€ä¸ªç‚¹å¾€å¾€ä¼´éšç€å‡ åƒæ¡è¾¹ï¼Œè¿™ç§æ“ä½œå¸¦æ¥çš„æ—¶é—´ã€å†…å­˜æ¶ˆè€—é—®é¢˜ä¸å¯å¿½è§†ã€‚<br />
å…¶æ¬¡ï¼Œæ•°æ®æ›´æ–°åˆ°æ•°æ®è¯»å–æœ‰ä¸€ä¸ªè¿‡ç¨‹ï¼Œåœ¨ä¸Šé¢æ¶æ„ä¸­è¿™ä¸ªè¿‡ç¨‹éœ€è¦ä¸»ä»æ•°æ®åº“è·¨åŸŸé€šä¿¡ã€‚åŸå§‹æ¨¡å‹ä½¿ç”¨äº†ä¸€ä¸ªå¤–éƒ¨æ ‡è¯†æ¥è®°å½•è¿‡æœŸçš„é”®å€¼å¯¹ï¼Œå¹¶ä¸”å¼‚æ­¥åœ°æŠŠè¿™äº›è¯»å–çš„è¯·æ±‚ä»åªè¯»çš„ä»èŠ‚ç‚¹ä¼ é€’åˆ°ä¸»èŠ‚ç‚¹ï¼Œè¿™ä¸ªéœ€è¦è·¨åŸŸé€šä¿¡ï¼Œå»¶è¿Ÿç›¸æ¯”ç›´æ¥ä»æœ¬åœ°è¯»å¤§äº†å¾ˆå¤šã€‚ï¼ˆç±»ä¼¼ä»ä¹‹å‰éœ€è¦èµ°å‡ ç™¾ç±³çš„è·ç¦»è€Œç°åœ¨éœ€è¦èµ°ä»åŒ—äº¬åˆ°æ·±åœ³çš„è·ç¦»ï¼‰<br />
ä½¿ç”¨å›¾ç»“æ„å»ºæ¨¡<br />
ä¸Šè¿°å…³ç³»å‹æ•°æ®åº“å»ºæ¨¡å¤±è´¥çš„ä¸»è¦åŸå› åœ¨äºæ•°æ®é—´ç¼ºä¹å†…åœ¨çš„å…³è”æ€§ï¼Œé’ˆå¯¹è¿™ç±»é—®é¢˜ï¼Œæ›´å¥½çš„å»ºæ¨¡æ–¹å¼æ˜¯ä½¿ç”¨å›¾ç»“æ„ã€‚ å‡å¦‚æ•°æ®æœ¬èº«å°±æ˜¯è¡¨æ ¼çš„ç»“æ„ï¼Œå…³ç³»æ•°æ®åº“å°±å¯ä»¥è§£å†³é—®é¢˜ï¼Œä½†å¦‚æœä½ è¦å±•ç¤ºçš„æ˜¯æ•°æ®ä¸æ•°æ®é—´çš„å…³ç³»ï¼Œå…³ç³»æ•°æ®åº“åè€Œä¸èƒ½è§£å†³é—®é¢˜äº†ï¼Œè¿™ä¸»è¦æ˜¯åœ¨æŸ¥è¯¢çš„è¿‡ç¨‹ä¸­ä¸å¯é¿å…çš„å¤§é‡ JOIN æ“ä½œå¯¼è‡´çš„ï¼Œè€Œæ¯æ¬¡ JOIN æ“ä½œå´åªç”¨åˆ°éƒ¨åˆ†æ•°æ®ï¼Œæ—¢ç„¶åå¤ JOIN æ“ä½œæœ¬èº«ä¼šå¯¼è‡´å¤§é‡çš„æ€§èƒ½æŸå¤±ï¼Œå¦‚ä½•å»ºæ¨¡æ‰èƒ½æ›´å¥½çš„è§£å†³é—®é¢˜å‘¢ï¼Ÿç­”æ¡ˆåœ¨ç‚¹å’Œç‚¹ä¹‹é—´çš„å…³ç³»ä¸Šã€‚</p><br />
<br />
<p>ç‚¹ã€å…³è”å…³ç³»å’Œå›¾æ•°æ®æ¨¡å‹<br />
åœ¨æˆ‘ä»¬ä¹‹å‰çš„è®¨è®ºä¸­ï¼Œä¼ ç»Ÿæ•°æ®åº“è™½ç„¶è¿ç”¨ JOIN æ“ä½œæŠŠä¸åŒçš„è¡¨é“¾æ¥äº†èµ·æ¥ï¼Œä»è€Œéšå¼åœ°è¡¨è¾¾äº†æ•°æ®ä¹‹é—´çš„å…³ç³»ï¼Œä½†æ˜¯å½“æˆ‘ä»¬è¦é€šè¿‡ A ç®¡ç† Bï¼ŒB ç®¡ç† A çš„æ–¹å¼æŸ¥è¯¢ç»“æœæ—¶ï¼Œè¡¨ç»“æ„å¹¶ä¸èƒ½ç›´æ¥å‘Šè¯‰æˆ‘ä»¬ç»“æœã€‚ å¦‚æœæˆ‘ä»¬æƒ³åœ¨åšæŸ¥è¯¢å‰å°±çŸ¥é“å¯¹åº”çš„æŸ¥è¯¢ç»“æœï¼Œæˆ‘ä»¬å¿…é¡»å…ˆå®šä¹‰èŠ‚ç‚¹å’Œå…³ç³»ã€‚</p><br />
<br />
<p>èŠ‚ç‚¹å’Œå…³ç³»å…ˆå®šä¹‰æ˜¯å›¾æ•°æ®åº“å’Œåˆ«çš„æ•°æ®åº“çš„æ ¸å¿ƒåŒºåˆ«ã€‚æ‰“ä¸ªæ¯”æ–¹ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠç»ç†ã€å‘˜å·¥è¡¨ç¤ºæˆä¸åŒçš„èŠ‚ç‚¹ï¼Œå¹¶ç”¨ä¸€æ¡è¾¹æ¥ä»£è¡¨ä»–ä»¬ä¹‹å‰å­˜åœ¨çš„ç®¡ç†å…³ç³»ï¼Œæˆ–è€…æŠŠç”¨æˆ·å’Œå•†å“çœ‹ä½œèŠ‚ç‚¹ï¼Œç”¨è´­ä¹°å…³ç³»å»ºæ¨¡ç­‰ç­‰ã€‚è€Œå½“æˆ‘ä»¬éœ€è¦æ–°çš„èŠ‚ç‚¹å’Œå…³ç³»æ—¶ï¼Œåªéœ€è¿›è¡Œå‡ æ¬¡æ›´æ–°å°±å¥½ï¼Œè€Œä¸ç”¨å»æ”¹å˜è¡¨çš„ç»“æ„æˆ–è€…å»è¿ç§»æ•°æ®ã€‚</p><br />
<br />
<p>æ ¹æ®èŠ‚ç‚¹å’Œå…³è”å…³ç³»ï¼Œä¹‹å‰çš„æ•°æ®å¯ä»¥æ ¹æ®ä¸‹å›¾æ‰€ç¤ºå»ºæ¨¡ï¼š</p><br />
<br />
<p>image</p><br />
<br />
<p>é€šè¿‡å›¾æ•°æ®åº“ Nebula Graph åŸç”Ÿ nGQL å›¾æŸ¥è¯¢è¯­è¨€è¿›è¡Œå»ºæ¨¡ï¼Œå‚è€ƒå¦‚ä¸‹æ“ä½œï¼š</p><br />
<br />
<p>â€“ Insert People<br />
INSERT VERTEX person(ID, name) VALUES 1:(2020031601, â€˜Jeffâ€™);<br />
INSERT VERTEX person(ID, name) VALUES 2:(2020031602, â€˜Aâ€™);<br />
INSERT VERTEX person(ID, name) VALUES 3:(2020031603, â€˜Bâ€™);<br />
INSERT VERTEX person(ID, name) VALUES 4:(2020031604, â€˜Câ€™);</p><br />
<br />
<p>â€“ Insert edge<br />
INSERT EDGE manage (level_s, level_end) VALUES 1 -&gt; 2: (â€˜0â€™ï¼Œ â€˜1â€™)<br />
INSERT EDGE manage (level_s, level_end) VALUES 1 -&gt; 3: (â€˜0â€™ï¼Œ â€˜1â€™)<br />
INSERT EDGE manage (level_s, level_end) VALUES 1 -&gt; 4: (â€˜0â€™ï¼Œ â€˜1â€™)<br />
è€Œä¹‹å‰è¶…é•¿çš„ query è¯­å¥ä¹Ÿå¯ä»¥é€šè¿‡ Cypher / nGQL ç¼©å‡æˆçŸ­çŸ­çš„ 3ã€4 è¡Œä»£ç ã€‚</p><br />
<br />
<p>ä¸‹é¢ä¸º nGQL è¯­å¥</p><br />
<br />
<p>GO FROM 1 OVER manage YIELD manage.level_s as start_level, manage._dst AS personid<br />
| GO FROM $personid OVER manage where manage.level_s &lt; start_level + 3<br />
YIELD SUM(\(.person.id) AS TOTAL,\).person.name AS list<br />
ä¸‹é¢ä¸º Cypher ç‰ˆæœ¬</p><br />
<br />
<p>MATCH (boss)-[:MANAGES<em>0..3]-&gt;(sub),<br />
(sub)-[:MANAGES</em>1..3]-&gt;(personid)<br />
WHERE boss.name = â€œJeffâ€<br />
RETURN sub.name AS list, count(personid) AS Total<br />
ä»è¿‘ç™¾è¡Œä»£ç å˜æˆ 3ã€4 è¡Œä»£ç å¯ä»¥æ˜æ˜¾åœ°çœ‹å‡ºå›¾æ•°æ®åº“åœ¨æ•°æ®è¡¨è¾¾èƒ½åŠ›ä¸Šçš„ä¼˜åŠ¿ã€‚</p><br />
<br />
<p>å›¾æ•°æ®åº“æ€§èƒ½ä¼˜åŒ–<br />
å›¾æ•°æ®åº“æœ¬èº«å¯¹é«˜åº¦è¿æ¥ã€ç»“æ„æ€§ä¸å¼ºçš„æ•°æ®åšäº†ä¸“é—¨ä¼˜åŒ–ã€‚ä¸åŒçš„å›¾æ•°æ®åº“æ ¹æ®ä¸åŒçš„åœºæ™¯ä¹Ÿåšäº†é’ˆå¯¹æ€§ä¼˜åŒ–ï¼Œç¬”è€…åœ¨è¿™é‡Œç®€å•ä»‹ç»ä»¥ä¸‹å‡ ç§å›¾æ•°æ®åº“ï¼ŒBTWï¼Œè¿™äº›å›¾æ•°æ®åº“éƒ½æ”¯æŒåŸç”Ÿå›¾å»ºæ¨¡ã€‚</p><br />
<br />
<p>Neo4j<br />
Neo4j æ˜¯æœ€çŸ¥åçš„ä¸€ç§å›¾æ•°æ®åº“ï¼Œåœ¨ä¸šç•Œæœ‰å¾®è½¯ã€ebay åœ¨ç”¨ Neo4j æ¥è§£å†³éƒ¨åˆ†ä¸šåŠ¡åœºæ™¯ï¼ŒNeo4j çš„æ€§èƒ½ä¼˜åŒ–æœ‰ä¸¤ç‚¹ï¼Œä¸€ä¸ªæ˜¯åŸç”Ÿå›¾æ•°æ®å¤„ç†ä¸Šçš„ä¼˜åŒ–ï¼Œä¸€ä¸ªæ˜¯è¿ç”¨äº† LRU-K ç¼“å­˜æ¥ç¼“å­˜æ•°æ®ã€‚</p><br />
<br />
<p>åŸç”Ÿå›¾æ•°æ®å¤„ç†ä¼˜åŒ–<br />
æˆ‘ä»¬è¯´ä¸€ä¸ªå›¾æ•°æ®åº“æ”¯æŒåŸç”Ÿå›¾æ•°æ®å¤„ç†å°±ä»£è¡¨è¿™ä¸ªæ•°æ®åº“æœ‰èƒ½åŠ›å»æ”¯æŒ index-free adjacencyã€‚</p><br />
<br />
<p>index-free adjancency å°±æ˜¯æ¯ä¸ªèŠ‚ç‚¹ä¼šä¿ç•™è¿æ¥èŠ‚ç‚¹çš„å¼•ç”¨ï¼Œä»è€Œè¿™ä¸ªèŠ‚ç‚¹æœ¬èº«å°±æ˜¯è¿æ¥èŠ‚ç‚¹çš„ä¸€ä¸ªç´¢å¼•ï¼Œè¿™ç§æ“ä½œçš„æ€§èƒ½æ¯”ä½¿ç”¨å…¨å±€ç´¢å¼•å¥½å¾ˆå¤šï¼ŒåŒæ—¶å‡å¦‚æˆ‘ä»¬æ ¹æ®å›¾æ¥è¿›è¡ŒæŸ¥è¯¢ï¼Œè¿™ç§æŸ¥è¯¢æ˜¯ä¸æ•´ä¸ªå›¾çš„å¤§å°æ— å…³çš„ï¼Œåªä¸æŸ¥è¯¢èŠ‚ç‚¹å…³è”è¾¹çš„æ•°ç›®æœ‰å…³ï¼Œå¦‚æœç”¨ B æ ‘ç´¢å¼•è¿›è¡ŒæŸ¥è¯¢çš„å¤æ‚åº¦æ˜¯ O(logN)ï¼Œä½¿ç”¨è¿™ç§ç»“æ„æŸ¥è¯¢çš„å¤æ‚åº¦å°±æ˜¯ O(1)ã€‚å½“æˆ‘ä»¬è¦æŸ¥è¯¢å¤šå±‚æ•°æ®æ—¶ï¼ŒæŸ¥è¯¢æ‰€éœ€è¦çš„æ—¶é—´ä¹Ÿä¸ä¼šéšç€æ•°æ®é›†çš„å˜å¤§è€Œå‘ˆç°æŒ‡æ•°å¢é•¿ï¼Œåè€Œä¼šæ˜¯ä¸€ä¸ªæ¯”è¾ƒç¨³å®šçš„å¸¸æ•°ï¼Œæ¯•ç«Ÿæ¯æ¬¡æŸ¥è¯¢åªä¼šæ ¹æ®å¯¹åº”çš„èŠ‚ç‚¹æ‰¾åˆ°è¿æ¥çš„è¾¹è€Œä¸ä¼šå»éå†æ‰€æœ‰çš„èŠ‚ç‚¹ã€‚</p><br />
<br />
<p>ä¸»å­˜ç¼“å­˜ä¼˜åŒ–<br />
åœ¨ 2.2 ç‰ˆæœ¬çš„ Neo4j ä¸­ä½¿ç”¨äº† LRU-K ç¼“å­˜ï¼Œè¿™ç§ç¼“å­˜ç®€è€Œè¨€ä¹‹å°±æ˜¯å°†ä½¿ç”¨é¢‘ç‡æœ€ä½çš„é¡µé¢ä»ç¼“å­˜ä¸­å¼¹å‡ºï¼Œé’çä½¿ç”¨é¢‘ç‡æ›´é«˜çš„é¡µé¢ï¼Œè¿™ç§è®¾è®¡ä¿è¯åœ¨ç»Ÿè®¡æ„ä¹‰ä¸Šçš„ç¼“å­˜èµ„æºä½¿ç”¨æœ€ä¼˜åŒ–ã€‚</p><br />
<br />
<p>JanusGraph<br />
JanusGraph æœ¬èº«å¹¶æ²¡æœ‰å…³æ³¨äºå»å®ç°å­˜å‚¨å’Œåˆ†æï¼Œè€Œæ˜¯å®ç°äº†å›¾æ•°æ®åº“å¼•æ“ä¸å¤šç§ç´¢å¼•å’Œå­˜å‚¨å¼•æ“çš„æ¥å£ï¼Œåˆ©ç”¨è¿™äº›æ¥å£æ¥å®ç°æ•°æ®å’Œå­˜å‚¨å’Œç´¢å¼•ã€‚JanusGraph ä¸»è¦ç›®çš„æ˜¯åœ¨åŸæ¥æ¡†æ¶çš„åŸºç¡€ä¸Šæ”¯æŒå›¾æ•°æ®çš„å»ºæ¨¡åŒæ—¶ä¼˜åŒ–å›¾æ•°æ®åºåˆ—åŒ–ã€å›¾æ•°æ®å»ºæ¨¡ã€å›¾æ•°æ®æ‰§è¡Œç›¸å…³çš„ç»†èŠ‚ã€‚JanusGraph æä¾›äº†æ¨¡å—åŒ–çš„æ•°æ®æŒä¹…åŒ–ã€æ•°æ®ç´¢å¼•å’Œå®¢æˆ·ç«¯çš„æ¥å£ï¼Œä»è€Œæ›´æ–¹ä¾¿åœ°å°†å›¾æ•°æ®æ¨¡å‹è¿ç”¨åˆ°å®é™…å¼€å‘ä¸­ã€‚</p><br />
<br />
<p>æ­¤å¤–ï¼ŒJanusGraph æ”¯æŒç”¨ Cassandraã€HBaseã€BerkelyDB ä½œä¸ºå­˜å‚¨å¼•æ“ï¼Œæ”¯æŒä½¿ç”¨ ElasticSearchã€Solr è¿˜æœ‰ Lucene è¿›è¡Œæ•°æ®ç´¢å¼•ã€‚ åœ¨åº”ç”¨æ–¹é¢ï¼Œå¯ä»¥ç”¨ä¸¤ç§æ–¹å¼ä¸ JanusGraph è¿›è¡Œäº¤äº’ï¼š</p><br />
<br />
<p>å°† JanusGraph å˜æˆåº”ç”¨çš„ä¸€éƒ¨åˆ†è¿›è¡ŒæŸ¥è¯¢ã€ç¼“å­˜ï¼Œå¹¶ä¸”è¿™äº›æ•°æ®äº¤äº’éƒ½æ˜¯åœ¨åŒä¸€å° JVM ä¸Šæ‰§è¡Œï¼Œä½†æ•°æ®çš„æ¥æºå¯èƒ½åœ¨æœ¬åœ°æˆ–è€…åœ¨åˆ«çš„åœ°æ–¹ã€‚<br />
å°† JanusGraph ä½œä¸ºä¸€ä¸ªæœåŠ¡ï¼Œè®©å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯åˆ†ç¦»ï¼ŒåŒæ—¶å®¢æˆ·ç«¯æäº¤ Gremlin æŸ¥è¯¢è¯­å¥åˆ°æœåŠ¡å™¨ä¸Šæ‰§è¡Œå¯¹åº”çš„æ•°æ®å¤„ç†æ“ä½œã€‚<br />
image</p><br />
<br />
<p>Nebula Graph<br />
ä¸‹é¢ç®€å•åœ°ä»‹ç»äº†ä¸€ä¸‹ Nebula Graph çš„ç³»ç»Ÿè®¾è®¡ã€‚</p><br />
<br />
<p>ä½¿ç”¨ KV å¯¹æ¥è¿›è¡Œå›¾æ•°æ®å¤„ç†<br />
Nebula Graph ä½¿ç”¨äº† vertexID + TagID ä½œä¸ºé”®åœ¨ä¸åŒçš„ partition é—´å­˜å‚¨ in-key å’Œ out-key ç›¸å…³çš„æ•°æ®ï¼Œè¿™ç§æ“ä½œå¯ä»¥ç¡®ä¿åœ¨å¤§è§„æ¨¡é›†ç¾¤ä¸Šçš„é«˜å¯ç”¨ï¼Œä½¿ç”¨åˆ†å¸ƒå¼çš„ partition å’Œ sharding ä¹Ÿå¢åŠ äº† Nebula Graph çš„ååé‡å’Œå®¹é”™çš„èƒ½åŠ›ã€‚</p><br />
<br />
<p>Shared-noting åˆ†å¸ƒå¼å­˜å‚¨å±‚<br />
Storage Service é‡‡ç”¨ shared-nothing çš„åˆ†å¸ƒå¼æ¶æ„è®¾è®¡ï¼Œæ¯ä¸ªå­˜å‚¨èŠ‚ç‚¹éƒ½æœ‰å¤šä¸ªæœ¬åœ° KV å­˜å‚¨å®ä¾‹ä½œä¸ºç‰©ç†å­˜å‚¨ã€‚Nebula é‡‡ç”¨å¤šæ•°æ´¾åè®® Raft æ¥ä¿è¯è¿™äº› KV å­˜å‚¨ä¹‹é—´çš„ä¸€è‡´æ€§ï¼ˆç”±äº Raft æ¯” Paxo æ›´ç®€æ´ï¼Œæˆ‘ä»¬é€‰ç”¨äº† Raftï¼‰ã€‚åœ¨ KVStore ä¹‹ä¸Šæ˜¯å›¾è¯­ä¹‰å±‚ï¼Œç”¨äºå°†å›¾æ“ä½œè½¬æ¢ä¸ºä¸‹å±‚ KV æ“ä½œã€‚ å›¾æ•°æ®ï¼ˆç‚¹å’Œè¾¹ï¼‰é€šè¿‡ Hash çš„æ–¹å¼å­˜å‚¨åœ¨ä¸åŒ partition ä¸­ã€‚è¿™é‡Œç”¨çš„ Hash å‡½æ•°å®ç°å¾ˆç›´æ¥ï¼Œå³ vertex_id å–ä½™ partition æ•°ã€‚åœ¨ Nebula Graph ä¸­ï¼Œpartition è¡¨ç¤ºä¸€ä¸ªè™šæ‹Ÿçš„æ•°æ®é›†ï¼Œè¿™äº› partition åˆ†å¸ƒåœ¨æ‰€æœ‰çš„å­˜å‚¨èŠ‚ç‚¹ï¼Œåˆ†å¸ƒä¿¡æ¯å­˜å‚¨åœ¨ Meta Service ä¸­ï¼ˆå› æ­¤æ‰€æœ‰çš„å­˜å‚¨èŠ‚ç‚¹å’Œè®¡ç®—èŠ‚ç‚¹éƒ½èƒ½è·å–åˆ°è¿™ä¸ªåˆ†å¸ƒä¿¡æ¯ï¼‰ã€‚</p><br />
<br />
<p>æ— çŠ¶æ€è®¡ç®—å±‚<br />
æ¯ä¸ªè®¡ç®—èŠ‚ç‚¹éƒ½è¿è¡Œç€ä¸€ä¸ªæ— çŠ¶æ€çš„æŸ¥è¯¢è®¡ç®—å¼•æ“ï¼Œè€ŒèŠ‚ç‚¹å½¼æ­¤é—´æ— ä»»ä½•é€šä¿¡å…³ç³»ã€‚è®¡ç®—èŠ‚ç‚¹ä»…ä» Meta Service è¯»å– meta ä¿¡æ¯ï¼Œä»¥åŠå’Œ Storage Service è¿›è¡Œäº¤äº’ã€‚è¿™æ ·è®¾è®¡ä½¿å¾—è®¡ç®—å±‚é›†ç¾¤æ›´å®¹æ˜“ä½¿ç”¨ K8s ç®¡ç†æˆ–éƒ¨ç½²åœ¨äº‘ä¸Šã€‚ è®¡ç®—å±‚çš„è´Ÿè½½å‡è¡¡æœ‰ä¸¤ç§å½¢å¼ï¼Œæœ€å¸¸è§çš„æ–¹å¼æ˜¯åœ¨è®¡ç®—å±‚ä¸ŠåŠ ä¸€ä¸ªè´Ÿè½½å‡è¡¡ï¼ˆbalanceï¼‰ï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯å°†è®¡ç®—å±‚æ‰€æœ‰èŠ‚ç‚¹çš„ IP åœ°å€é…ç½®åœ¨å®¢æˆ·ç«¯ä¸­ï¼Œè¿™æ ·å®¢æˆ·ç«¯å¯ä»¥éšæœºé€‰å–è®¡ç®—èŠ‚ç‚¹è¿›è¡Œè¿æ¥ã€‚ æ¯ä¸ªæŸ¥è¯¢è®¡ç®—å¼•æ“éƒ½èƒ½æ¥æ”¶å®¢æˆ·ç«¯çš„è¯·æ±‚ï¼Œè§£ææŸ¥è¯¢è¯­å¥ï¼Œç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰å¹¶å°† AST ä¼ é€’ç»™æ‰§è¡Œè®¡åˆ’å™¨å’Œä¼˜åŒ–å™¨ï¼Œæœ€åå†äº¤ç”±æ‰§è¡Œå™¨æ‰§è¡Œã€‚</p><br />
<br />
<p>å›¾æ•°æ®åº“æ˜¯å½“ä»Šçš„è¶‹åŠ¿<br />
åœ¨å½“ä»Šï¼Œå›¾æ•°æ®åº“æ”¶åˆ°äº†æ›´å¤šåˆ†æå¸ˆå’Œå’¨è¯¢å…¬å¸çš„å…³æ³¨</p><br />
<br />
<p>Graph analysis is possibly the single most effective  competitive differentiator for organizations  pursuing data-driven operations and  decisions after the design of data capture.        â€”â€”â€”â€”â€“Gartner â€œGraph analysis is the true killer app for Big Data.â€      â€”â€”â€”â€”â€”â€”â€“Forrester<br />
åŒæ—¶å›¾æ•°æ®åº“åœ¨ DB-Ranking ä¸Šçš„æ’åä¹Ÿå‘ˆç°å‡ºä¸Šå‡æœ€å¿«çš„è¶‹åŠ¿ï¼Œå¯è§éœ€æ±‚ä¹‹è¿«åˆ‡ï¼š</p><br />
<br />
<p>image</p><br />
<br />
<p>å›¾æ•°æ®åº“å®è·µï¼šä¸ä»…ä»…æ˜¯ç¤¾äº¤ç½‘ç»œ<br />
Netflix äº‘æ•°æ®åº“çš„å·¥ç¨‹å®è·µ<br />
image</p><br />
<br />
<p>Netflix é‡‡ç”¨äº† JanusGraph + Cassandra + ElasticSearch ä½œä¸ºè‡ªèº«çš„å›¾æ•°æ®åº“æ¶æ„ï¼Œä»–ä»¬è¿ç”¨è¿™ç§æ¶æ„æ¥åšæ•°å­—èµ„äº§ç®¡ç†ã€‚ èŠ‚ç‚¹è¡¨ç¤ºæ•°å­—äº§å“æ¯”å¦‚ç”µå½±ã€çºªå½•ç‰‡ç­‰ï¼ŒåŒæ—¶è¿™äº›äº§å“ä¹‹é—´çš„å…³ç³»å°±æ˜¯èŠ‚ç‚¹é—´çš„è¾¹ã€‚ å½“å‰çš„ Netflix æœ‰å¤§æ¦‚ 2 äº¿çš„èŠ‚ç‚¹ï¼Œ70 å¤šç§æ•°å­—äº§å“ï¼Œæ¯åˆ†é’Ÿéƒ½æœ‰ä¸Šç™¾æ¡çš„ query å’Œæ•°æ®æ›´æ–°ã€‚ æ­¤å¤–ï¼ŒNetflix ä¹ŸæŠŠå›¾æ•°æ®åº“è¿ç”¨åœ¨äº†æˆæƒã€åˆ†å¸ƒå¼è¿½è¸ªã€å¯è§†åŒ–å·¥ä½œæµä¸Šã€‚æ¯”å¦‚å¯è§†åŒ– Git çš„ commitï¼Œjenkins éƒ¨ç½²è¿™äº›å·¥ä½œã€‚</p><br />
<br />
<p>Adobe çš„æŠ€æœ¯è¿­ä»£<br />
ä¸€èˆ¬è€Œè¨€ï¼Œæ–°æŠ€æœ¯å¾€å¾€åœ¨å¼€å§‹çš„æ—¶å€™å¤§éƒ½ä¸è¢«å¤§å…¬å¸æ‰€é’çï¼Œå›¾æ•°æ®åº“å¹¶æ²¡æœ‰ä¾‹å¤–ï¼Œå¤§å…¬å¸æœ¬èº«æœ‰å¾ˆå¤šçš„é—ç•™é¡¹ç›®ï¼Œè€Œè¿™äº›é¡¹ç›®æœ¬èº«çš„ç”¨æˆ·ä½“é‡å’Œä½¿ç”¨éœ€æ±‚åˆè®©è¿™äº›å…¬å¸ä¸æ•¢å†’ç€é£é™©æ¥ä½¿ç”¨æ–°æŠ€æœ¯å»æ”¹å˜è¿™äº›å¤„äºç¨³å®šçš„äº§å“ã€‚Adobe åœ¨è¿™é‡Œåšäº†ä¸€ä¸ªè¿­ä»£æ–°æŠ€æœ¯çš„ä¾‹å­ï¼Œç”¨ Neo4j å›¾æ•°æ®åº“æ›¿æ¢äº†æ—§çš„ NoSQL Cassandra æ•°æ®åº“ã€‚</p><br />
<br />
<p>è¿™ä¸ªè¢«å¤§æ”¹çš„ç³»ç»Ÿåå­—å« Behanceï¼Œæ˜¯ Adobe åœ¨ 15 å¹´å‘å¸ƒçš„ä¸€ä¸ªå†…å®¹ç¤¾äº¤å¹³å°ï¼Œæœ‰å¤§æ¦‚ 1 åƒä¸‡çš„ç”¨æˆ·ï¼Œåœ¨è¿™é‡Œäººä»¬å¯ä»¥åˆ†äº«è‡ªå·±çš„åˆ›ä½œç»™ç™¾ä¸‡äººçœ‹ã€‚</p><br />
<br />
<p>image</p><br />
<br />
<p>è¿™æ ·ä¸€ä¸ªå·¨å¤§çš„é—ç•™ç³»ç»Ÿæœ¬æ¥æ˜¯é€šè¿‡ Cassandra å’Œ MongoDB æ­å»ºçš„ï¼ŒåŸºäºå†å²é—ç•™é—®é¢˜ï¼Œç³»ç»Ÿæœ‰ä¸å°‘çš„æ€§èƒ½ç“¶é¢ˆä¸å¾—ä¸è§£å†³ã€‚ MongoDB å’Œ Cassandra çš„è¯»å–æ€§èƒ½æ…¢ä¸»è¦å› ä¸ºåŸå…ˆçš„ç³»ç»Ÿè®¾è®¡é‡‡ç”¨äº† fan-out çš„è®¾è®¡æ¨¡å¼â€”â€”å—å…³æ³¨å¤šçš„ç”¨æˆ·å‘è¡¨çš„å†…å®¹ä¼šå•ç‹¬åˆ†å‘ç»™æ¯ä¸ªè¯»è€…ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼ä¹Ÿå¯¼è‡´äº†ç½‘ç»œæ¶æ„çš„å¤§å»¶è¿Ÿï¼Œæ­¤å¤– Cassandra æœ¬èº«çš„è¿ç»´ä¹Ÿéœ€è¦ä¸å°çš„æŠ€æœ¯å›¢é˜Ÿï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¾ˆå¤§çš„é—®é¢˜ã€‚</p><br />
<br />
<p>image</p><br />
<br />
<p>åœ¨è¿™é‡Œä¸ºäº†æ­å»ºä¸€ä¸ªçµæ´»ã€é«˜æ•ˆã€ç¨³å®šçš„ç³»ç»Ÿæ¥æä¾›æ¶ˆæ¯ feeding å¹¶æœ€å°åŒ–æ•°æ®å­˜å‚¨çš„è§„æ¨¡ï¼ŒAdobe å†³å®šè¿ç§»åŸæœ¬çš„ Cassandra æ•°æ®åº“åˆ° Neo4j å›¾æ•°æ®åº“ã€‚ åœ¨ Neo4j å›¾æ•°æ®åº“ä¸­é‡‡ç”¨ä¸€ç§æ‰€è°“çš„ Tiered relationships æ¥è¡¨ç¤ºç”¨æˆ·ä¹‹é—´çš„å…³ç³»ï¼Œè¿™ä¸ªè¾¹çš„å…³ç³»å¯ä»¥å»å®šä¹‰ä¸åŒçš„è®¿é—®çŠ¶æ€ï¼Œæ¯”å¦‚ï¼šä»…éƒ¨åˆ†ç”¨æˆ·å¯è§ï¼Œä»…å…³æ³¨è€…å¯è§è¿™äº›åŸºæœ¬æ“ä½œã€‚ æ•°æ®æ¨¡å‹å¦‚å›¾æ‰€ç¤º</p><br />
<br />
<p>image</p><br />
<br />
<p>ä½¿ç”¨è¿™ç§æ•°æ®æ¨¡å‹å¹¶ä½¿ç”¨ Leader-follower æ¶æ„æ¥ä¼˜åŒ–è¯»å†™ï¼Œè¿™ä¸ªå¹³å°è·å¾—äº†å·¨å¤§çš„æ€§èƒ½æå‡ï¼š</p><br />
<br />
<p>image</p><br />
<br />
<p>è¿ç»´éœ€æ±‚çš„æ—¶é•¿åœ¨ä½¿ç”¨äº† Neo4j ä»¥åä¸‹é™äº† 300%ã€‚<br />
å­˜å‚¨éœ€æ±‚é™ä½äº† 1000 å€ï¼Œ Neo4j ä»…éœ€ 50G å­˜å‚¨æ•°æ®ï¼Œ è€Œ Cassandra éœ€è¦ 50TBã€‚<br />
ä»…ä»…éœ€è¦ 3 ä¸ªæœåŠ¡å®ä¾‹å°±å¯ä»¥æ”¯æŒæ•´ä¸ªæœåŠ¡å™¨çš„æµç•…è¿è¡Œï¼Œä¹‹å‰åˆ™éœ€è¦ 48 ä¸ªã€‚<br />
å›¾æ•°æ®åº“æœ¬èº«å°±æä¾›äº†æ›´é«˜çš„å¯æ‰©å±•æ€§ã€‚<br />
ç»“è®º<br />
åœ¨å½“ä»Šçš„å¤§æ•°æ®æ—¶ä»£ï¼Œé‡‡ç”¨å›¾æ•°æ®åº“å¯ä»¥ç”¨å°æˆæœ¬åœ¨åŸæœ‰æ¶æ„ä¸Šè·å¾—å·¨å¤§çš„æ€§èƒ½æå‡ã€‚å›¾æ•°æ®åº“ä¸ä»…ä»…å¯ä»¥åœ¨ 5Gã€AIã€ç‰©è”ç½‘é¢†åŸŸå‘æŒ¥å·¨å¤§çš„æ¨åŠ¨ä½œç”¨ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨æ¥é‡æ„åŸæœ¬çš„é—ç•™ç³»ç»Ÿã€‚ è™½ç„¶ä¸åŒçš„å›¾æ•°æ®åº“å¯èƒ½æœ‰ç€æˆªç„¶ä¸åŒçš„åº•å±‚å®ç°ï¼Œä½†è¿™äº›éƒ½å®Œå…¨æ”¯æŒç”¨å›¾çš„æ–¹å¼æ¥æ„å»ºæ•°æ®æ¨¡å‹ä»è€Œè®©ä¸åŒçš„ç»„ä»¶ä¹‹é—´ç›¸äº’è”ç³»ï¼Œä»æˆ‘ä»¬ä¹‹å‰çš„è®¨è®ºæ¥çœ‹ï¼Œè¿™ä¸€ç§æ•°æ®æ¨¡å‹å±‚æ¬¡çš„æ”¹å˜ä¼šæå¤§åœ°ç®€åŒ–å¾ˆå¤šæ—¥å¸¸æ•°æ®ç³»ç»Ÿä¸­æ‰€é¢ä¸´çš„é—®é¢˜ï¼Œå¢å¤§ç³»ç»Ÿçš„ååé‡å¹¶ä¸”é™ä½è¿ç»´çš„éœ€æ±‚ã€‚</p><br />
<br />
<p>å›¾æ•°æ®åº“çš„ä»‹ç»å°±åˆ°æ­¤ä¸ºæ­¢äº†ï¼Œå¦‚æœä½ å¯¹å›¾æ•°æ®åº“ Nebula Graph æœ‰ä»»ä½•æƒ³æ³•æˆ–å…¶ä»–è¦æ±‚ï¼Œæ¬¢è¿å» GitHubï¼šhttps://github.com/vesoft-inc/nebula issue åŒºå‘æˆ‘ä»¬æ issue æˆ–è€…å‰å¾€å®˜æ–¹è®ºå›ï¼šhttps://discuss.nebula-graph.io/ çš„ Feedback åˆ†ç±»ä¸‹æå»ºè®® ğŸ‘ï¼›åŠ å…¥ Nebula Graph äº¤æµç¾¤ï¼Œè¯·è”ç³» Nebula Graph å®˜æ–¹å°åŠ©æ‰‹å¾®ä¿¡å·ï¼šNebulaGraphbot</p><br />
<br />
<p>Reference<br />
[1] An Overview Of Neo4j And The Property Graph Model Berkeley, CS294, Nov 2015 https://people.eecs.berkeley.edu/~istoica/classes/cs294/15/notes/21-neo4j.pdf<br />
[2] several original data sources from talk made by Duen Horng (Polo) Chau ( Geogia tech ) www.selectscience.net www.phonedog.comã€www.mediabistro.com www.practicalecommerce.com/<br />
[3] Graphs / Networks Basics, how to build &amp; store graphs, laws, etc. Centrality, and algorithms you should know   Duen Horng (Polo) Chau(Georgia tech)<br />
[4] Graph databases, 2nd Edition: New Oppotunities for Connected Data<br />
[5] R. Nishtala, H. Fugal, S. Grimm, M. Kwiatkowski, H. Lee, H. C.Li, R. McElroy, M. Paleczny, D. Peek, P. Saab, D. Stafford, T. Tung, and V. Venkataramani. Scaling Memcache at Facebook.In Proceedings of the 10th USENIX conference on Networked Systems Design and Implementation, NSDI, 2013.<br />
[6] Nathan Bronson, Zach Amsden, George Cabrera, Prasad Chakka, Peter Dimov Hui Ding, Jack Ferris, Anthony Giardullo, Sachin Kulkarni, Harry Li, Mark Marchukov Dmitri Petrov, Lovro Puzar, Yee Jiun Song, Venkat Venkataramani  TAO: Facebookâ€™s Distributed Data Store for the Social Graph USENIX 2013<br />
[7] Janus Graph Architecture https://docs.janusgraph.org/getting-started/architecture/<br />
[8] Nebula Graph Architecture â€” A Birdâ€™s View https://nebula-graph.io/en/posts/nebula-graph-architecture-overview/<br />
[9] database engine trending https://db-engines.com/en/ranking_categories<br />
[10] Netflix Content Data Management talk https://www.slideshare.net/RoopaTangirala/polyglot-persistence-netflix-cde-meetup-90955706#86<br />
[11] Harnessing the Power of Neo4j for Overhauling Legacy Systems at Adobe https://neo4j.com/graphconnect-2018/session/overhauling-legacy-systems-adobe</p><br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category storage
        </div>
	</div>
  
  
       <!--èµ-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">é¦–é¡µ</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">å¤æ³½æ°‘</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"åˆ†äº«åˆ°ï¼š","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // å¼€å¯å¯¹è¯æ¡†
            enable: true,
            script: {
              // æ¯ç©ºé—² 10 ç§’é’Ÿï¼Œæ˜¾ç¤ºä¸€æ¡ä¸€è¨€
              'every idle 10s': '$hitokoto$',
              // å½“è§¦æ‘¸åˆ°æ˜Ÿæ˜Ÿå›¾æ¡ˆ
              'hover .star': 'æ˜Ÿæ˜Ÿåœ¨å¤©ä¸Šè€Œä½ åœ¨æˆ‘å¿ƒé‡Œ (*/Ï‰ï¼¼*)',
              // å½“è§¦æ‘¸åˆ°è§’è‰²èº«ä½“
              'tap body': 'å“å‘€ï¼åˆ«ç¢°æˆ‘ï¼',
              // å½“è§¦æ‘¸åˆ°è§’è‰²å¤´éƒ¨
              'tap face': 'äººå®¶å·²ç»ä¸æ˜¯å°å­©å­äº†ï¼'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--æœ¬æ–‡æ¥è‡ª-->
     <script type="text/javascript">
      /* ä»…IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/næœ¬ç¯‡æ–‡ç« æ¥æºäº xiazemin çš„ æ³½æ°‘åšå®¢|https://xiazemin.github.io/MyBlog/index.html åŸæ–‡é“¾æ¥ï¼š"+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //ç»‘å®šåœ¨äº†bodyä¸Šï¼Œä¹Ÿå¯ä»¥ç»‘å®šåœ¨å…¶ä»–å¯ç”¨å…ƒç´ è¡Œï¼Œä½†æ˜¯ä¸æ˜¯æ‰€æœ‰å…ƒç´ éƒ½æ”¯æŒcopyå’Œpastäº‹ä»¶ã€‚

     /*
$(document.body).bind({
    copy: function(event) {//copyäº‹ä»¶
        //var cpTxt = "å¤åˆ¶çš„æ•°æ®";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//å¯ä»¥è·å–ç”¨æˆ·é€‰ä¸­å¤åˆ¶çš„æ•°æ®
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//å¦åˆ™è®¾ä¸ç”Ÿæ•ˆ
    },paste: function(e) {//pasteäº‹ä»¶
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />æœ¬æ–‡æ¥æºï¼šxiazemin çš„ æ³½æ°‘åšå®¢ <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+å½“å‰é¡µé¢é“¾æ¥
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--æœ¬æ–‡æ¥è‡ª-->

</div>
  </body>

</html>