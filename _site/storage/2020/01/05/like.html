<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">Mysql模糊查询like效率</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2020-01-05T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Jan 5, 2020</time></p>
					</div>
					 <p>在使用msyql进行模糊查询的时候，很自然的会用到like语句，通常情况下，在数据量小的时候，不容易看出查询的效率，但在数据量达到百万级，千万级的时候，查询的效率就很容易显现出来。这个时候查询的效率就显得很重要！</p><br />
<br />
<p>mysql在使用like查询的时候只有使用后面的%时，才会使用到索引。</p><br />
<br />
<p>原理:</p><br />
<br />
<p>mysql在使用like查询中，能不能用到索引？在什么地方使用索引呢？</p><br />
<br />
<p>在使用like的时候，如果使用‘%%’，会不会用到索引呢？<br />
EXPLAIN SELECT * FROM <code class="language-plaintext highlighter-rouge">user</code> WHERE username LIKE ‘%ptd_%’;<br />
MYSQL查询索引使用之like - hawk_wolf - hawk_wolf<br />
 上面的结果是全表扫描，并没有使用到索引。<br />
只是使用一个%的查询结果：<br />
EXPLAIN SELECT * FROM <code class="language-plaintext highlighter-rouge">user</code> WHERE username LIKE ‘ptd_%’;<br />
MYSQL查询索引使用之like - hawk_wolf - hawk_wolf<br />
这个使用到了索引。<br />
EXPLAIN SELECT * FROM <code class="language-plaintext highlighter-rouge">user</code> WHERE username LIKE ‘%ptd_’;<br />
MYSQL查询索引使用之like - hawk_wolf - hawk_wolf<br />
在前面使用%时也是全表扫描，没有使用到索引。</p><br />
<br />
<p>综上，mysql在使用like查询的时候只有使用后面的%时，才会使用到索引。<br />
<!-- more --><br />
一般情况下like模糊查询的写法为（field已建立索引）：</p><br />
<br />
<p>SELECT <code class="language-plaintext highlighter-rouge">column</code> FROM <code class="language-plaintext highlighter-rouge">table</code> WHERE <code class="language-plaintext highlighter-rouge">field</code> like ‘%keyword%’;<br />
上面的语句用explain解释来看，SQL语句并未用到索引，而且是全表搜索，如果在数据量超大的时候，可想而知最后的效率会是这样</p><br />
<br />
<p>对比下面的写法：</p><br />
<br />
<p>SELECT <code class="language-plaintext highlighter-rouge">column</code> FROM <code class="language-plaintext highlighter-rouge">table</code> WHERE <code class="language-plaintext highlighter-rouge">field</code> like ‘keyword%’;<br />
这样的写法用explain解释看到，SQL语句使用了索引，搜索的效率大大的提高了！</p><br />
<br />
<p>但是有的时候，我们在做模糊查询的时候，并非要想查询的关键词都在开头，所以如果不是特别的要求，”keywork%”并不合适所有的模糊查询</p><br />
<br />
<p>这个时候，我们可以考虑用其他的方法</p><br />
<br />
<p>1.LOCATE（’substr’,str,pos）方法</p><br />
<br />
<p>SELECT LOCATE(‘xbar’,<code class="language-plaintext highlighter-rouge">foobar</code>); <br />
###返回0</p><br />
<br />
<p>SELECT LOCATE(‘bar’,<code class="language-plaintext highlighter-rouge">foobarbar</code>); <br />
###返回4</p><br />
<br />
<p>SELECT LOCATE(‘bar’,<code class="language-plaintext highlighter-rouge">foobarbar</code>,5);<br />
###返回7</p><br />
<br />
<p>备注：返回 substr 在 str 中第一次出现的位置，如果 substr 在 str 中不存在，返回值为 0 。如果pos存在，返回 substr 在 str 第pos个位置后第一次出现的位置，如果 substr 在 str 中不存在，返回值为0。</p><br />
<br />
<p>SELECT <code class="language-plaintext highlighter-rouge">column</code> FROM <code class="language-plaintext highlighter-rouge">table</code> WHERE LOCATE(‘keyword’, <code class="language-plaintext highlighter-rouge">field</code>)&gt;0<br />
备注：keyword是要搜索的内容，field为被匹配的字段，查询出所有存在keyword的数据</p><br />
<br />
<p>2.POSITION(‘substr’ IN <code class="language-plaintext highlighter-rouge">field</code>)方法</p><br />
<br />
<p>position可以看做是locate的别名，功能跟locate一样</p><br />
<br />
<p>SELECT <code class="language-plaintext highlighter-rouge">column</code> FROM <code class="language-plaintext highlighter-rouge">table</code> WHERE POSITION(‘keyword’ IN <code class="language-plaintext highlighter-rouge">filed</code>)<br />
3.INSTR(<code class="language-plaintext highlighter-rouge">str</code>,’substr’)方法</p><br />
<br />
<p>SELECT <code class="language-plaintext highlighter-rouge">column</code> FROM <code class="language-plaintext highlighter-rouge">table</code> WHERE INSTR(<code class="language-plaintext highlighter-rouge">field</code>, ‘keyword’ )&gt;0</p><br />
<br />
<p>除了上述的方法外，还有一个函数FIND_IN_SET</p><br />
<br />
<p>FIND_IN_SET(str1,str2):</p><br />
<br />
<p>返回str2中str1所在的位置索引，其中str2必须以”,”分割开。</p><br />
<br />
<p>SELECT * FROM <code class="language-plaintext highlighter-rouge">person</code> WHERE FIND_IN_SET(‘apply’,<code class="language-plaintext highlighter-rouge">name</code>);</p><br />
<br />
<p>三种like查询<br />
1 like ‘memo%’<br />
2 like ‘%memo’<br />
3 like ‘%memo%’</p><br />
<br />
<p>=============<br />
第一种通过建索引能加快查询速度<br />
第二种我想了一个方法不知道能不能实现，请大家帮忙评估一下。</p><br />
<br />
<p>找一个将字符串逆转的函数(也就是将字符串倒序，我没找到这样的函数，不知道大家有没有见过)<br />
给字段建函数索引<br />
查询时用like ‘omem%’<br />
……</p><br />
<br />
<p>对于like memo，提高查询效率的方法有:<br />
  1.使用右匹配，如：like ‘memo%’<br />
  2.使用instr代替，然后建立instr函数索引. 如: instr(字段名,’memo’)&gt;0;<br />
  3.在查询的字段和like的字段上面建一个复合索引，这样在查询的时候就会走全索引扫描，即从索引段直接取数据，而不会再去查表了。</p><br />
<br />
<p>LIKE语句<br />
SELECT <code class="language-plaintext highlighter-rouge">column</code> FROM <code class="language-plaintext highlighter-rouge">table</code> where <code class="language-plaintext highlighter-rouge">condition</code> like `%keyword%’</p><br />
<br />
<p>事实上，可以使用 locate(position) 和 instr 这两个函数来代替</p><br />
<br />
<p>一、LOCATE语句<br />
SELECT <code class="language-plaintext highlighter-rouge">column</code> from <code class="language-plaintext highlighter-rouge">table</code> where locate(‘keyword’, <code class="language-plaintext highlighter-rouge">condition</code>)&gt;0</p><br />
<br />
<p>二、或是 locate 的別名 position<br />
POSITION语句<br />
SELECT <code class="language-plaintext highlighter-rouge">column</code> from <code class="language-plaintext highlighter-rouge">table</code> where position(‘keyword’ IN <code class="language-plaintext highlighter-rouge">condition</code>)</p><br />
<br />
<p>三、INSTR语句<br />
SELECT <code class="language-plaintext highlighter-rouge">column</code> from <code class="language-plaintext highlighter-rouge">table</code> where instr(<code class="language-plaintext highlighter-rouge">condition</code>, ‘keyword’ )&gt;0</p><br />
<br />
<p>locate、position 和 instr 的差別只是参数的位置不同，同时locate 多一个起始位置的参数外，两者是一样的。<br />
mysql&gt; SELECT LOCATE(‘bar’, ‘foobarbar’,5);</p><br />
<br />
<p>-&gt; 7</p><br />
<br />
<p>速度上这三个比用 like 稍快了一点。</p><br />
<br />
<p>~~~~~~~~~~~~~~~~~~~~~<del>华丽的分割线</del>~~~~~~~~~~~~~~~~~~~~~~~~~~</p><br />
<br />
<p>四、还要给大家介绍一个新成员，那就是find_in_set</p><br />
<br />
<p>使用like，还是使用locate  position高效的前提条件是查询的字段上面已经建立起了索引。</p><br />
<br />
<p>关于mysql处理百万级以上的数据时如何提高其查询速度的方法<br />
最近一段时间由于工作需要，开始关注针对Mysql数据库的select查询语句的相关优化方法。<br />
由于在参与的实际项目中发现当mysql表的数据量达到百万级时，普通SQL查询效率呈直线下降，而且如果where中的查询条件较多时，其查询速度简直无法容忍。曾经测试对一个包含400多万条记录（有索引）的表执行一条条件查询，其查询时间竟然高达40几秒，相信这么高的查询延时，任何用户都会抓狂。因此如何提高sql语句查询效率，显得十分重要。以下是网上流传比较广泛的30种SQL查询语句优化方法：<br />
1、应尽量避免在 where 子句中使用!=或&lt;&gt;操作符，否则将引擎放弃使用索引而进行全表扫描。<br />
2、对查询进行优化，应尽量避免全表扫描，首先应考虑在 where 及 order by 涉及的列上建立索引。<br />
3、应尽量避免在 where 子句中对字段进行 null 值判断，否则将导致引擎放弃使用索引而进行全表扫描，如：<br />
select id from t where num is null<br />
可以在num上设置默认值0，确保表中num列没有null值，然后这样查询：<br />
select id from t where num=0<br />
4、尽量避免在 where 子句中使用 or 来连接条件，否则将导致引擎放弃使用索引而进行全表扫描，如：<br />
select id from t where num=10 or num=20<br />
可以这样查询：<br />
select id from t where num=10<br />
union all<br />
select id from t where num=20<br />
5、下面的查询也将导致全表扫描：(不能前置百分号)<br />
select id from t where name like ‘%c%’<br />
若要提高效率，可以考虑全文检索。<br />
6、in 和 not in 也要慎用，否则会导致全表扫描，如：<br />
select id from t where num in(1,2,3)<br />
对于连续的数值，能用 between 就不要用 in 了：<br />
select id from t where num between 1 and 3<br />
7、如果在 where 子句中使用参数，也会导致全表扫描。因为SQL只有在运行时才会解析局部变量，但优化程序不能将访问计划的选择推迟到运行时；它必须在编译时进行选择。然 而，如果在编译时建立访问计划，变量的值还是未知的，因而无法作为索引选择的输入项。如下面语句将进行全表扫描：<br />
select id from t where num=@num<br />
可以改为强制查询使用索引：<br />
select id from t with(index(索引名)) where num=@num<br />
8、应尽量避免在 where 子句中对字段进行表达式操作，这将导致引擎放弃使用索引而进行全表扫描。如：<br />
select id from t where num/2=100<br />
应改为:<br />
select id from t where num=100<em>2<br />
9、应尽量避免在where子句中对字段进行函数操作，这将导致引擎放弃使用索引而进行全表扫描。如：<br />
select id from t where substring(name,1,3)=’abc’–name以abc开头的id<br />
select id from t where datediff(day,createdate,’2005-11-30′)=0–’2005-11-30′生成的id<br />
应改为:<br />
select id from t where name like ‘abc%’<br />
select id from t where createdate&gt;=’2005-11-30′ and createdate&lt;’2005-12-1′<br />
10、不要在 where 子句中的“=”左边进行函数、算术运算或其他表达式运算，否则系统将可能无法正确使用索引。<br />
11、在使用索引字段作为条件时，如果该索引是复合索引，那么必须使用到该索引中的第一个字段作为条件时才能保证系统使用该索引，否则该索引将不会被使 用，并且应尽可能的让字段顺序与索引顺序相一致。<br />
12、不要写一些没有意义的查询，如需要生成一个空表结构：<br />
select col1,col2 into #t from t where 1=0<br />
这类代码不会返回任何结果集，但是会消耗系统资源的，应改成这样：<br />
create table #t(…)<br />
13、很多时候用 exists 代替 in 是一个好的选择：<br />
select num from a where num in(select num from b)<br />
用下面的语句替换：<br />
select num from a where exists(select 1 from b where num=a.num)<br />
14、并不是所有索引对查询都有效，SQL是根据表中数据来进行查询优化的，当索引列有大量数据重复时，SQL查询可能不会去利用索引，如一表中有字段 sex，male、female几乎各一半，那么即使在sex上建了索引也对查询效率起不了作用。<br />
15、索引并不是越多越好，索引固然可以提高相应的 select 的效率，但同时也降低了 insert 及 update 的效率，因为 insert 或 update 时有可能会重建索引，所以怎样建索引需要慎重考虑，视具体情况而定。一个表的索引数最好不要超过6个，若太多则应考虑一些不常使用到的列上建的索引是否有 必要。<br />
16.应尽可能的避免更新 clustered 索引数据列，因为 clustered 索引数据列的顺序就是表记录的物理存储顺序，一旦该列值改变将导致整个表记录的顺序的调整，会耗费相当大的资源。若应用系统需要频繁更新 clustered 索引数据列，那么需要考虑是否应将该索引建为 clustered 索引。<br />
17、尽量使用数字型字段，若只含数值信息的字段尽量不要设计为字符型，这会降低查询和连接的性能，并会增加存储开销。这是因为引擎在处理查询和连接时会 逐个比较字符串中每一个字符，而对于数字型而言只需要比较一次就够了。<br />
18、尽可能的使用 varchar/nvarchar 代替 char/nchar ，因为首先变长字段存储空间小，可以节省存储空间，其次对于查询来说，在一个相对较小的字段内搜索效率显然要高些。<br />
19、任何地方都不要使用 select * from t ，用具体的字段列表代替“</em>”，不要返回用不到的任何字段。<br />
20、尽量使用表变量来代替临时表。如果表变量包含大量数据，请注意索引非常有限（只有主键索引）。<br />
21、避免频繁创建和删除临时表，以减少系统表资源的消耗。<br />
22、临时表并不是不可使用，适当地使用它们可以使某些例程更有效，例如，当需要重复引用大型表或常用表中的某个数据集时。但是，对于一次性事件，最好使 用导出表。<br />
23、在新建临时表时，如果一次性插入数据量很大，那么可以使用 select into 代替 create table，避免造成大量 log ，以提高速度；如果数据量不大，为了缓和系统表的资源，应先create table，然后insert。<br />
24、如果使用到了临时表，在存储过程的最后务必将所有的临时表显式删除，先 truncate table ，然后 drop table ，这样可以避免系统表的较长时间锁定。<br />
25、尽量避免使用游标，因为游标的效率较差，如果游标操作的数据超过1万行，那么就应该考虑改写。<br />
26、使用基于游标的方法或临时表方法之前，应先寻找基于集的解决方案来解决问题，基于集的方法通常更有效。<br />
27、与临时表一样，游标并不是不可使用。对小型数据集使用 FAST_FORWARD 游标通常要优于其他逐行处理方法，尤其是在必须引用几个表才能获得所需的数据时。在结果集中包括“合计”的例程通常要比使用游标执行的速度快。如果开发时 间允许，基于游标的方法和基于集的方法都可以尝试一下，看哪一种方法的效果更好。<br />
28、在所有的存储过程和触发器的开始处设置 SET NOCOUNT ON ，在结束时设置 SET NOCOUNT OFF 。无需在执行存储过程和触发器的每个语句后向客户端发送 DONE_IN_PROC 消息。<br />
29、尽量避免向客户端返回大数据量，若数据量过大，应该考虑相应需求是否合理。<br />
30、尽量避免大事务操作，提高系统并发能力。</p><br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category storage
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>