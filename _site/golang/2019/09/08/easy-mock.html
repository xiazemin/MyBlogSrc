<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">easy-mock</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2019-09-08T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Sep 8, 2019</time></p>
					</div>
					 <p>https://github.com/easy-mock/easy-mock</p><br />
<br />
<p>easy-mock<br />
一个在线模拟后台的数据平台，通过官网注册账户之后，你就可以生成一个在线的API接口，然后通过ajax或者axios就可以访问这个接口了。<br />
<!-- more --><br />
以登录为例，当我们将username=admin&amp;password=admin这样的数据格式通过post发送给服务器，服务器会做基本的逻辑判断，如果账号密码正确，则返回一种数据，反之亦然。<br />
那么在easy-mock怎么体现？</p><br />
<br />
<p>{<br />
  code: function({<br />
    _req<br />
  }) {<br />
    if (_req.body.username === ‘admin’ &amp;&amp; _req.body.password === ‘admin’) {<br />
      return 20000<br />
    } else {<br />
      return 50000<br />
    }<br />
  },<br />
  data: function({<br />
    _req<br />
  }) {<br />
    if (_req.body.username === ‘admin’ &amp;&amp; _req.body.password === ‘admin’) {<br />
      return {<br />
        token: “admin”<br />
      }<br />
    } else {<br />
      return “登录账号不对” + _req.body.username<br />
    }<br />
  }<br />
}<br />
easy-mock中通过function可以做基本的逻辑判断，通过_req能够获取到前端传递过来的参数（文档），需要注意地是该参数类型是application/x-www-form-urlencode类型。<br />
这也意味着，当你在easy-mock测试数据的时候，你需要更改http头部中的Content-Type信息。</p><br />
<br />
<p>get<br />
get的设置和post类似，不同点在于esay-mock对请求参数的获取，具体设置代码如下：</p><br />
<br />
<p>{<br />
  code: function({<br />
    _req<br />
  }) {<br />
    if (_req.query.token === ‘admin’) {<br />
      return 20000<br />
    } else {<br />
      50000<br />
    }<br />
  },<br />
  data: function({<br />
    _req<br />
  }) {<br />
    if (_req.query.token === ‘admin’) {<br />
      return {<br />
        roles: [<br />
          “admin”<br />
        ],<br />
        name: “admin”,<br />
        avatar: “https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif”<br />
      }<br />
    } else {<br />
      return “登录失败”<br />
    }<br />
  }<br />
}</p><br />
<br />
<p>https://easy-mock.com/login<br />
easy-mock本地部署的官方介绍，https://github.com/easy-mock/easy-mock/blob/dev/README.zh-CN.md。官方介绍的简洁明了，大致分为下面几步：</p><br />
<br />
<p>安装 node（&gt;=v8.9） &amp; MongoDB（&gt;=v3.4） &amp; Redis（&gt;=v4.0）<br />
安装 easy-mock，更改配置文件<br />
启动 easy-mock，测试项目是否可以正常启动，能的话就可以先 Ctrl + C了<br />
启动 MongoDB 和 Redis<br />
npm run build，然后用 PM2 启动 app.js</p><br />
<br />
<p>深入浅出 - Mock语法回顾<br />
@ip -&gt; 随机输出一个ip；<br />
@id -&gt; 随机输出长度18的字符，不接受参数；<br />
“array|1-10” -&gt; 随机输出1-10长度的数组，也可以直接是固定长度；<br />
“object|2” -&gt; 输出一个两个key值的对象，<br />
“@image()” 返回一个占位图url，支持size, background, foreground, format, text；<br />
等等，这里就不再一一介绍。<br />
深入浅出 - Mock语法回顾，公众号：honeyBadger8<br />
深入浅出 - 创建一个接口<br />
它的写法，跟Mock.js一模一样,上面代码已经展示过，更多示例<br />
使用Easy Mock创建一个接口，请看下图：<br />
深入浅出 - 创建一个接口，公Z好：honeyBadger8<br />
深入浅出 - 高阶用法 Function<br />
在线编辑，它也能支持 function ，<br />
是不是很优秀，能获取到全部请求头，可以让我们像写在js里一样写逻辑，写运算，<br />
当然它肯定是还有很多局限性的，如并不支持ES6，<br />
有一点需要注意的是 function 里要写传出Mock对象，不能直接@…，<br />
来看示例：<br />
对象	描述<br />
Mock	Mock 对象<br />
_req.url	获得请求 url 地址<br />
_req.method	获取请求方法<br />
_req.params	获取 url 参数对象<br />
_req.querystring	获取查询参数字符串(url中?后面的部分)，不包含 ?<br />
_req.query	将查询参数字符串进行解析并以对象的形式返回，如果没有查询参数字字符串则返回一个空对象<br />
_req.body	当 post 请求以 x-www-form-urlencoded 方式提交时，我们可以拿到请求的参数对象<br />
…	_req.cookies、ip、host等等，我只是一个代码的搬运，更详细请看这里<br />
//简单模拟登录，根据用户传入的参数，返回不同逻辑数据<br />
{<br />
  defaultName:function({_req}){<br />
    return _req.query.name;<br />
  },<br />
  code: function({_req}){<br />
    return this.defaultName ? 0 : -97;<br />
  },<br />
  message: function({_req}) {<br />
    return this.defaultName ? “登录成功” : “参数错误”;<br />
  },<br />
  data: function({_req,Mock}){<br />
    return this.defaultName ? {<br />
      token: Mock.mock(“@guid()”),<br />
      userId: Mock.mock(“@id(5)”),<br />
      cname: Mock.mock(“@cname()”),<br />
      name: Mock.mock(“@name()”),<br />
      avatar: Mock.mock(“@image(200x100, #FF6600)”),<br />
      other:”@IT·平头哥联盟-首席填坑官∙苏南 带你再谈Mock数据之easy-mock”<br />
    }:{}<br />
  }<br />
}</p><br />
<br />
<p>特性<br />
支持接口代理<br />
支持快捷键操作<br />
支持协同编辑<br />
支持团队项目<br />
支持 RESTful<br />
支持 Swagger | OpenAPI Specification (1.2 &amp; 2.0 &amp; 3.0)<br />
基于 Swagger 快速创建项目<br />
支持显示接口入参与返回值<br />
支持显示实体类<br />
支持灵活性与扩展性更高的响应式数据开发<br />
支持自定义响应配置（例：status/headers/cookies）<br />
支持 Mock.js 语法<br />
支持 restc 方式的接口预览<br />
链接<br />
在线使用文档<br />
Easy Mock CLI - 基于 Easy Mock 快速生成 api.js 的命令行工具。</p><br />
<br />
<p>$ git clone https://github.com/easy-mock/easy-mock.git<br />
$ cd easy-mock &amp;&amp; npm install</p><br />
<br />
<p>找到 config/default.json，或者创建一个 config/local.json 文件，将如下需要替换的字段换成自己的配置即可。</p><br />
<br />
<p>不同环境会加载不同的配置文件，在此之前你应该对 node-config 有所了解。</p><br />
<br />
<p>{<br />
  “port”: 7300,<br />
  “host”: “0.0.0.0”,<br />
  “pageSize”: 30,<br />
  “proxy”: false,<br />
  “db”: “mongodb://localhost/easy-mock”,<br />
  “unsplashClientId”: “”,<br />
  “redis”: {<br />
    “keyPrefix”: “[Easy Mock]”,<br />
    “port”: 6379,<br />
    “host”: “localhost”,<br />
    “password”: “”,<br />
    “db”: 0<br />
  },<br />
  “blackList”: {<br />
    “projects”: [], // projectId，例：”5a4495e16ef711102113e500”<br />
    “ips”: [] // ip，例：”127.0.0.1”<br />
  },<br />
  “rateLimit”: { // https://github.com/koajs/ratelimit<br />
    “max”: 1000,<br />
    “duration”: 1000<br />
  },<br />
  “jwt”: {<br />
    “expire”: “14 days”,<br />
    “secret”: “shared-secret”<br />
  },<br />
  “upload”: {<br />
    “types”: [“.jpg”, “.jpeg”, “.png”, “.gif”, “.json”, “.yml”, “.yaml”],<br />
    “size”: 5242880,<br />
    “dir”: “../public/upload”,<br />
    “expire”: {<br />
      “types”: [“.json”, “.yml”, “.yaml”],<br />
      “day”: -1<br />
    }<br />
  },<br />
  “ldap”: {<br />
    “server”: “”, // 设置 server 代表启用 LDAP 登录。例：”ldap://localhost:389” 或 “ldaps://localhost:389”（使用 SSL）<br />
    “bindDN”: “”, // 用户名，例：”cn=admin,dc=example,dc=com”<br />
    “password”: “”,<br />
    “filter”: {<br />
      “base”: “”, // 查询用户的路径，例：”dc=example,dc=com”<br />
      “attributeName”: “” // 查询字段，例：”mail”<br />
    }<br />
  },<br />
  “fe”: {<br />
    “copyright”: “”,<br />
    “storageNamespace”: “easy-mock_”,<br />
    “timeout”: 25000,<br />
    “publicPath”: “/dist/”<br />
  }<br />
}</p><br />
<br />
<p>Mock.js的语法，</p><br />
<br />
<ol><br />
  <li>属性值是字符串 String</li><br />
</ol><br />
<br />
<p>‘name|min-max’: string<br />
通过重复 string 生成一个字符串，重复次数大于等于 min，小于等于 max。</p><br />
<br />
<p>‘name|count’: string<br />
通过重复 string 生成一个字符串，重复次数等于 count。</p><br />
<br />
<ol><br />
  <li>属性值是数字 Number</li><br />
</ol><br />
<br />
<p>‘name|+1’: number<br />
属性值自动加 1，初始值为 number。</p><br />
<br />
<p>‘name|min-max’: number<br />
生成一个大于等于 min、小于等于 max 的整数，属性值 number 只是用来确定类型。</p><br />
<br />
<p>‘name|min-max.dmin-dmax’: number<br />
生成一个浮点数，整数部分大于等于 min、小于等于 max，小数部分保留 dmin 到 dmax位。</p><br />
<br />
<p>Mock.mock({</p><br />
<br />
<table><br />
  <tbody><br />
    <tr><br />
      <td>    ‘number1</td><br />
      <td>1-100.1-10’: 1,</td><br />
    </tr><br />
  </tbody><br />
</table><br />
<br />
<table><br />
  <tbody><br />
    <tr><br />
      <td>    ‘number2</td><br />
      <td>123.1-10’: 1,</td><br />
    </tr><br />
  </tbody><br />
</table><br />
<br />
<table><br />
  <tbody><br />
    <tr><br />
      <td>    ‘number3</td><br />
      <td>123.3’: 1,</td><br />
    </tr><br />
  </tbody><br />
</table><br />
<br />
<table><br />
  <tbody><br />
    <tr><br />
      <td>    ‘number4</td><br />
      <td>123.10’: 1.123</td><br />
    </tr><br />
  </tbody><br />
</table><br />
<br />
<p>})</p><br />
<br />
<p>. 属性值是布尔型 Boolean</p><br />
<br />
<p>‘name|1’: boolean<br />
随机生成一个布尔值，值为 true 的概率是 1/2，值为false 的概率同样是 1/2。</p><br />
<br />
<p>‘name|min-max’: value<br />
随机生成一个布尔值，值为 value 的概率是 min/ (min + max)，值为 !value 的概率是 max / (min + max)。</p><br />
<br />
<ol><br />
  <li>属性值是对象 Object</li><br />
</ol><br />
<br />
<p>‘name|count’: object<br />
从属性值 object 中随机选取 count 个属性。</p><br />
<br />
<p>‘name|min-max’: object<br />
从属性值 object 中随机选取 min 到 max 个属性。</p><br />
<br />
<ol><br />
  <li>属性值是数组 Array</li><br />
</ol><br />
<br />
<p>‘name|1’: array<br />
从属性值 array 中随机选取 1 个元素，作为最终值。</p><br />
<br />
<p>‘name|+1’: array<br />
从属性值 array 中顺序选取 1 个元素，作为最终值。</p><br />
<br />
<p>‘name|min-max’: array<br />
通过重复属性值 array 生成一个新数组，重复次数大于等于 min，小于等于 max。</p><br />
<br />
<p>‘name|count’: array<br />
通过重复属性值 array 生成一个新数组，重复次数为 count。</p><br />
<br />
<ol><br />
  <li>属性值是函数 Function</li><br />
</ol><br />
<br />
<p>‘name’: function<br />
执行函数 function，取其返回值作为最终的属性值，函数的上下文为属性 ’name’ 所在的对象。</p><br />
<br />
<ol><br />
  <li>属性值是正则表达式 RegExp</li><br />
</ol><br />
<br />
<p>‘name’: regexp</p><br />
<br />
<p>根据正则表达式 regexp 反向生成可以匹配它的字符串。用于生成自定义格式的字符串。</p><br />
<br />
<p>Mock.mock({</p><br />
<br />
<p>   ’regexp1’: /[a-z][A-Z][0-9]/,</p><br />
<br />
<p>   ’regexp2’: /\w\W\s\S\d\D/,</p><br />
<br />
<p>   ’regexp3’: /\d{5,10}/</p><br />
<br />
<p>})</p><br />
<br />
<p>在开始之前，假设你已经成功安装了 Node.js（&gt;= v8.9）&amp; MongoDB（&gt;= v3.4）&amp; Redis（&gt;= v4.0）。</p><br />
<br />
<p>MongoDB安装教程：http://www.runoob.com/mongodb…</p><br />
<br />
<p>Redis安装教程：http://www.runoob.com/redis/r…</p><br />
<br />
<p>tips小提示<br />
node.js和mongodb安装的时候一般一直next下去就可以了。<br />
redis下载下来是压缩包,解压就行了</p><br />
<br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category golang
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>