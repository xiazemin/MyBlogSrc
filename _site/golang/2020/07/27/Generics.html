<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">Generics</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2020-07-27T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Jul 27, 2020</time></p>
					</div>
					 <p>https://www.capitalone.com/tech/software-engineering/go-is-boring/<br />
https://www.capitalone.com/tech/software-engineering/generics-in-go/<br />
<!-- more --></p><br />
<br />
<p>type LinkedList struct {<br />
	value interface{}<br />
	next  *LinkedList<br />
}</p><br />
<br />
<p>And here’s what that looks like when using generics:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type LinkedList(type T) struct {<br />
value T<br />
next  *LinkedList(T) } It takes three small changes to change this type into a generic type:<br />
</code></pre></div></div><br />
<br />
<p>Place (type T) after the type name and before the struct literal. T is the name we’ll use as the placeholder for whatever type is supplied when our linked list is used. Many other languages use T as the placeholder type name for a generic type, and it’s likely that Go will adopt the same custom. If you need to refer to additional types within the same type or function, use other capital letters; we’ll see that in a bit.<br />
Use T for the value field’s type instead of interface{}.<br />
Change the next pointer’s type from *LinkedList to *LinkedList(T). When using a generic type, you must provide the type parameters. Leaving them out is a compile-time error.<br />
Let’s write some methods to work with our generic type. We’ll start with a method to find the length of our linked list:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func (ll *LinkedList(T)) Len() int {<br />
count := 0<br />
for node := ll; node != nil; node = node.next {<br />
	count++<br />
}<br />
return count }<br />
</code></pre></div></div><br />
<br />
<p>The method receiver uses *LinkedList(T) instead of *LinkedList, but the rest of the code is identical to the code that you’d write if you weren’t using generics. Let’s write a method that does refer to the parameterized type:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func (ll *LinkedList(T)) InsertAt(pos int, value T) *LinkedList(T) {<br />
if ll == nil || pos &lt;= 0 {<br />
	return &amp;LinkedList(T){<br />
		value: value,<br />
		next:  ll,<br />
	}<br />
}<br />
ll.next = ll.next.InsertAt(pos-1, value)<br />
return ll }<br />
</code></pre></div></div><br />
<br />
<p>This method takes in a parameter of type (T)</p><br />
<br />
<p>(This method isn’t the most efficient way to insert into a linked list, but it is short enough to make a good example. Also note that it is safe; if you pass 0 or a negative number for the insertion index, it will prepend to the linked list and if you pass a number greater than the length, it will simply append.)</p><br />
<br />
<p>Here are a few additional methods that are useful for our linked list:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func (ll *LinkedList(T)) Append(value T) *LinkedList(T) {<br />
return ll.InsertAt(ll.Len(), value) }<br />
</code></pre></div></div><br />
<br />
<p>func (ll *LinkedList(T)) String() string {<br />
	if ll == nil {<br />
		return “nil”<br />
	}<br />
	return fmt.Sprintf(“%v-&gt;%v”, ll.value, ll.next.String())<br />
}</p><br />
<br />
<p>And now that we have some useful methods on our generic type, let’s try it out:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var head *LinkedList(string) head = head.Append("Hello") fmt.Println(head.String()) fmt.Println(head.Len()) head = head.Append("Hola") head = head.Append("हैलो") head = head.Append("こんにちは") head = head.Append("你好") fmt.Println(head.String()) fmt.Println(head.Len())<br />
</code></pre></div></div><br />
<br />
<p>(We don’t need to call String explicitly when passing a value to fmt.Println, but I wanted to make it explicit. See https://tour.golang.org/methods/17 for more information.)</p><br />
<br />
<p>This looks exactly like existing Go code, with only one change: when declaring a variable of type *LinkedList, we supply the type that we want to use with this particular instance. This code prints out:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello-&gt;nil 1 Hello-&gt;Hola-&gt;हैलो-&gt;こんにちは-&gt;你好-&gt;nil 5<br />
</code></pre></div></div><br />
<br />
<p>If we want to use our linked list with a different type, we simply supply the different type when we instantiate a different variable. If we have a type Person:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type Person struct {<br />
Name string<br />
Age  int }<br />
</code></pre></div></div><br />
<br />
<p>We can write the following code:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var peopleList *LinkedList(Person) peopleList = peopleList.Append(Person{"Fred", 23}) peopleList = peopleList.Append(Person{"Joan", 30}) fmt.Println(peopleList)<br />
</code></pre></div></div><br />
<br />
<p>Which prints out:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{Fred 23}-&gt;{Joan 30}-&gt;nil<br />
</code></pre></div></div><br />
<br />
<p>Just as The Go Playground allows you to try out current Go code, the Go team has made a new playground for testing generic code. You can try out our linked list at https://go2goplay.golang.org/p/3c7mJDdVhlb.</p><br />
<br />
<p>Let’s try something new. We’re going to add another method to our linked list to tell us whether or not a specific value is in it:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func (ll *LinkedList(T)) Contains(value T) bool {<br />
for node := ll; node != nil; node = node.next {<br />
	if node.value == value {<br />
		return true<br />
	}<br />
}<br />
return false }<br />
</code></pre></div></div><br />
<br />
<p>Unfortunately, this will not work. If we try to compile it, we’ll get the error:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cannot compare node.value == value (operator == not defined for T)<br />
</code></pre></div></div><br />
<br />
<p>The problem is that our placeholder type T doesn’t specify what it can do. So far, all we can do is store it and retrieve it. If we want to do more, we have to specify some constraints on T.</p><br />
<br />
<p>Since many (but not all!) Go types can be compared using == and !=, the Go generics proposal includes a new built-in interface called comparable. If we go back to the definition of our linked list type we can make a small change to support ==:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type LinkedList(type T comparable) struct {<br />
value T<br />
next  *LinkedList(T) }<br />
</code></pre></div></div><br />
<br />
<p>We added the interface comparable to our type parameter definition clause and now we can use == to compare variables of type T within LinkedList’s methods.</p><br />
<br />
<p>Using our previous data, if we run the following lines:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fmt.Println(head.Contains("Hello"))<br />
fmt.Println(head.Contains("Goodbye"))<br />
fmt.Println(peopleList.Contains(Person{"Joan", 30}))<br />
</code></pre></div></div><br />
<br />
<p>You get the following results:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>true false true<br />
</code></pre></div></div><br />
<br />
<p>You can see this code run at https://go2goplay.golang.org/p/fZaoj3JaEze.</p><br />
<br />
<p>However, we can no longer assign non-comparable types to LinkedList. If we tried to make a linked list of functions:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var functionList *LinkedList(func()) functionList = functionList.Append(func() { fmt.Println("What about me?") }) fmt.Println(functionList)<br />
</code></pre></div></div><br />
<br />
<p>It would fail at compilation time with the error message:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func() does not satisfy comparable<br />
</code></pre></div></div><br />
<br />
<p>In addition to generic types, you can also write generic functions. One of the most common complaints about Go is that you cannot write a single function that processes a slice of any type. Let’s write three:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func Map(type T, E)(in []T, f func(T) E) []E {<br />
out := make([]E, len(in))<br />
for i, v := range in {<br />
	out[i] = f(v)<br />
}<br />
return out }<br />
</code></pre></div></div><br />
<br />
<p>func Reduce(type T, E)(in []T, start E, f func(E, T) E) E {<br />
	out := start<br />
	for _, v := range in {<br />
		out = f(out, v)<br />
	}<br />
	return out<br />
}</p><br />
<br />
<p>func Filter(type T)(in []T, f func(T) bool) []T {<br />
	out := make([]T, 0, len(in))<br />
	for _, v := range in {<br />
		if f(v) {<br />
			out = append(out, v)<br />
		}<br />
	}<br />
	return out<br />
}</p><br />
<br />
<p>Just like a generic type, a generic function has a type parameter section. For functions, it appears between the function name and the function parameters. For Map and Reduce, we are using two type parameters in our function, both declared in the type parameter section and separated by commas. The function bodies are identical to what you’d use if the types were specific; the only difference is that we pass []E to make in Map and []T to make in Filter.</p><br />
<br />
<p>When we run the code:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>strings := []string{"1", "2", "Fred", "3"}<br />
numStrings := Filter(strings, func(s string) bool {<br />
	_, err := strconv.Atoi(s)<br />
	return err == nil<br />
})<br />
fmt.Println(numStrings)<br />
nums := Map(numStrings, func(s string) int {<br />
	val, _ := strconv.Atoi(s)<br />
	return val<br />
})<br />
fmt.Println(nums)<br />
total := Reduce(nums, 0, func(start int, val int) int {<br />
	return start + val<br />
})<br />
fmt.Println(total)<br />
</code></pre></div></div><br />
<br />
<p>We get the output:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1 2 3] [1 2 3] 6<br />
</code></pre></div></div><br />
<br />
<p>Try it for yourself at https://go2goplay.golang.org/p/K5as7WaTxCY.</p><br />
<br />
<p>One thing to notice: we didn’t explicitly specify the types when invoking the functions. Go generics use type inference to figure which types to use for function calls. There are situations where this doesn’t work (such as a type parameter that’s used for a return type, but not an input parameter). In those cases, you are required to specify all of the type arguments.</p><br />
<br />
<p>Let’s try to write another generic function. Go has a math.Max function that compares two float64 values and returns the larger one. It’s written this way because nearly any other numeric type in Go can be converted to float64 for comparison (trivia time: a uint64 or int64 that requires more than 53 bits to express its value will lose precision when converted to a float64). Converting back and forth is ugly, so let’s try to write a generic function to do this instead:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func Max(type T)(v1, v2 T) T {<br />
if v1 &gt; v2 {<br />
    return v1<br />
}<br />
return v2 }<br />
</code></pre></div></div><br />
<br />
<p>Unfortunately, if we try to compile this function, we’ll get an error:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cannot compare v1 &gt; v2 (operator &gt; not defined for T)<br />
</code></pre></div></div><br />
<br />
<p>This is a lot like the error we got when we tried to compare values in our linked list, only this time it’s the &gt; operator instead of the ==. Go isn’t going to provide a built-in interface to support other operators. In this case, we have to write our own interface using a <em>type list</em>:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type Ordered interface {<br />
type string, int, int8, int16, int32, int64, float32, float64, uint, uint8, uint16, uint32, uintptr }<br />
</code></pre></div></div><br />
<br />
<p>func Max(type T Ordered)(v1, v2 T) T {<br />
    if v1 &gt; v2 {<br />
        return v1<br />
    }<br />
    return v2<br />
}</p><br />
<br />
<p>In order to work with operators, we declare an interface and list the types that support the operator that we want to use. Note that the valid operators are the ones that work for <em>all</em> of the listed types. For example, a generic function or type that uses Ordered as a type constraint cannot use - or *, because those are not defined for string.</p><br />
<br />
<p>Now that we have our interface constraint, we can pass an instance of any of those specified types (or any user-defined types whose underlying type is one of these types) into Max:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>fmt.Println(Max(100, 200)) fmt.Println(Max(3.5, 1.2)) fmt.Println(Max("sheep", "goat"))<br />
</code></pre></div></div><br />
<br />
<p>This produces the output:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>200 3.5 sheep<br />
</code></pre></div></div><br />
<br />
<p>You can try this for yourself at https://go2goplay.golang.org/p/PlQO-TFBZE9.</p><br />
<br />
<p>The types specified in a type list are underlying types. (See the Go language specification for a definition). That means the following code also works:</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type MyInt int<br />
</code></pre></div></div><br />
<br />
<p>var a MyInt = 10<br />
var b MyInt = 20<br />
fmt.Println(Max(a,b))</p><br />
<br />
<p>To be honest, I don’t prefer type lists. However, they provide a very concise way to specify what operators are available. They also allow you to specify what literals can be assigned to a variable of a generic type. Just as the available operators are the intersection of the operators on all types in the type list, the literals that can be assigned are the ones that can be assigned to all of the listed types. In the case of Ordered, you can’t assign a literal, because there is no literal that can be assigned to both a string and any of the numeric types.</p><br />
<br />
<p>You can use any interface as a type constraint, not just comparable or one with a type list. And an interface used as a type constraint can contain both methods and a type list. However, you cannot use an interface with a type list as a regular interface type.</p><br />
<br />
<p>There is a lot more in generics than I can cover here. Read through the Go Generics Draft (formally called the Type Parameters - Draft Design) to see more details on the draft design, things that it doesn’t cover, and additional sample code.</p><br />
<br />
<p>Generics vs. Interfaces<br />
While it’s very nice that Go reused the concept of interfaces to implement generics, it does lead to a little bit of confusion. The question is: When do you use generics and when do you use interfaces?</p><br />
<br />
<p>It’s still very early days, so patterns are still being developed. There are some basic principles that are likely to be followed. The first principle is to do nothing. If your current code works with interfaces, leave it alone. Save generics for situations that can’t be addressed with interfaces alone:</p><br />
<br />
<p>If you have a container type, consider switching to generics when they are available. Save <code class="language-plaintext highlighter-rouge">interface{}</code> for situations where reflection is needed.<br />
If you had been writing multiple implementations of functions to handle different numeric types or slice types, switch to generics.<br />
If you want to write a function or method that creates a new instance, you need to use generics.<br />
The next question that people ask is around performance. The answer is: don’t worry about it for now. The current prototype tools are using a technique (re-writing generic Go code to standard Go code) that isn’t going to be used in any production release. There are multiple ways to compile and implement generics. Once there are final tools, we’ll be able to see what the tradeoffs are. Chances are, there won’t be a significant difference for most programs.</p><br />
<br />
<p>What’s Missing?<br />
If you are a language geek, you’re probably aware of other features that fall under the umbrella of generics in other languages. Many of them will probably be left out of Go’s generics. These include:</p><br />
<br />
<p>Specialization (Providing special-case implementations of a generic function for specific types).<br />
Metaprogramming (Code that generates code at compile time).<br />
Operator methods (Making a generic type that supports operators like <code class="language-plaintext highlighter-rouge">&gt;</code>, <code class="language-plaintext highlighter-rouge">*</code>,  or <code class="language-plaintext highlighter-rouge">[]</code>).<br />
Currying (Creating a new type or function based on a generic type by specifying some of the parameterized types).<br />
What’s Next?<br />
The generics design is still in the draft stage; it’s likely that there will be further tweaks. If the design becomes a proposal and that proposal is accepted, the earliest possible release that would include generics is Go 1.17.</p><br />
<br />
<p>It’s still early days, but I’m excited about the prospects for this design. It adds the most requested features to Go without making the language a great deal more complicated. Some people will be disappointed that other advanced features are left out, but that’s not the Go way. Go is intended to be a simple language that’s easy to read, easy to learn, and easy to maintain. By adding just enough generics to solve the most common problems, Go continues to meet that ideal.</p><br />
<br />
<p>https://skarlso.github.io/2020/07/23/kubernetes-deploy-golang-react-apps-separately-part1/</p><br />
<br />
<p>https://dev.to/mnlwldr/connect-to-an-irc-server-with-golang-fj9</p><br />
<br />
<p>https://www.oschina.net/news/117438/goland-2020-2-rc-released</p><br />
<br />
<p>https://github.com/Netflix/asgard</p><br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category golang
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>