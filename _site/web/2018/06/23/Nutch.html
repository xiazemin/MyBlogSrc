<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">Nutch</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2018-06-23T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Jun 23, 2018</time></p>
					</div>
					 <!-- more --><br />
<p>Nutch是一个开源Java实现的搜索引擎。它提供了我们运行自己的搜索引擎所需的全部工具。包括全文搜索和Web爬虫。<br />
Nutch的组成：<br />
    爬虫crawler和查询searcher。Crawler主要用于从网络上抓取网页并为这些网页建立索引。Searcher主要利用这些索引检索用户的查找关键词来产生查找结果。两者之间的接口是索引，所以除去索引部分，两者之间的耦合度很低。<br />
    Crawler和Searcher两部分尽量分开的目的主要是为了使两部分可以分布式配置在硬件平台上，例如将Crawler和Searcher分别放在两个主机上，这样可以提升性能<br />
Nutch的目标：</p><br />
<br />
<p>Nutch 致力于让每个人能很容易，同时花费很少就可以配置世界一流的Web搜索引擎。为了完成这个宏伟的目标，nutch必须能够做到：<br />
• 每个月取几十亿网页<br />
• 为这些网页维护一个索引<br />
• 对搜引文件进行每秒上千次的搜索<br />
• 提供高质量的搜索结果<br />
• 以最小的成本运作<br />
这将是一个巨大的挑战</p><br />
<br />
<p>Nutch的安装：</p><br />
<br />
<p>首先获取nutch2.3</p><br />
<br />
<p>[plain] view plain copy<br />
wget https://archive.apache.org/dist/nutch/2.3/apache-nutch-2.3-src.tar.gz<br /><br />
解压nutch 2.3</p><br />
<br />
<p>[plain] view plain copy<br />
tar -zxvf apache-nutch-2.3-src.tar.gz<br /><br />
重名字nutch</p><br />
<br />
<p>[java] view plain copy<br />
mv apache-nutch-2.3 nutch</p><br />
<br />
<p>nutch的配置：</p><br />
<br />
<p>第一步：进入conf/nutch-site.xml</p><br />
<br />
<p>[html] view plain copy<br />
<!-- 指定gora 后端 ，指定存储位置为Hbase--></p><br />
<property>  <br />
     <name>storage.data.store.class</name>  <br />
     <value>org.apache.gora.hbase.store.HBaseStore</value>  <br />
     <description>Default class for storing data</description>  <br />
</property><br />
<br />
<!-- 指定nutch插件 --><br />
<property>  <br />
      <name>plugin.includes</name>   <br />
<value>protocol-httpclient|urlfilter-regex|index-(basic|more)|  <br />
query-(basic|site|url|lang)|indexer-solr|nutch-extensionpoints|  <br />
protocol-httpclient|urlfilter-regex|parse-(text|html|msexcel|msword  <br />
|mspowerpoint|pdf)|summary-basic|scoring-opic|urlnormalizer-(pass  <br />
|regex|basic)protocol-http|urlfilter-regex|parse-(html|tika|metatags)  <br />
|index-(basic|anchor|more|metadata)</value>  <br />
</property><br />
<p>第二步：进入ivy/ivy.xml<br />
[html] view plain copy<br />
<!--取消这个批注，使用hbase做为gora的后端 --></p><br />
<dependency org="org.apache.gora" name="gora-hbase" rev="0.5" conf="*-&gt;default" /><br />
<br />
<p>第三步：进入 conf/gora.properties增加如下一行<br />
[html] view plain copy<br />
&lt;–将HbaseStore设为默认的存储 –&gt;<br /><br />
gora.datastore.default=org.apache.gora.hbase.store.HBaseStore<br /><br />
第四步：进入nutch 的目录下</p><br />
<br />
<p>监测ant的版本输入ant –version</p><br />
<br />
<p>输入ant runtime 命令</p><br />
<br />
<p>这个命令将构建你的apache nutch，在nutch的家目录下面将创建相应的目录(runtime)。这个步骤是必须的，因为nutch2.3仅仅作为源码进行了发布。所有的目录里面最重要的是runtime,包含了所有需要爬行的脚本</p><br />
<br />
<p>ant之后：<br />
第五步：进入runtime/local/conf中，打开nutch-site，加入Http代理的名字。</p><br />
<br />
<p>[html] view plain copy</p><br />
<property>  <br />
   <name>http.agent.name</name>  <br />
   <value>My Nutch Spider</value>  <br />
</property><br />
<!--同时指定gora后端，以及指定插件。  <br />
<property>  <br />
      <name>storage.data.store.class</name>  <br />
       <value>org.apache.gora.hbase.store.HBaseStore</value>  <br />
        <description>Default class for storing data</description>  <br />
</property>  <br />
  <br />
<!-- 指定nutch插件 --><br />
<property>  <br />
      <name>plugin.includes</name> <value>protocol-httpclient|urlfilter-regex|index-(basic|more)|query-(basic|site|url|lang)|indexer-solr|nutch-extensionpoints|protocol-httpclient|urlfilter-regex|parse-(text|html|msexcel|msword|mspowerpoint|pdf)|summary-basic|scoring-opic|urlnormalizer-(pass|regex|basic)protocol-http|urlfilter-regex|parse-(html|tika|metatags)|index-(basic|anchor|more|metadata)</value>  <br />
</property><br />
<p>第六步：<br />
在 runtime/local目录下，创建一个urls目录。<br />
mkdir urls<br />
进入urls目录<br />
vi seed.txt<br />
在seed.txt中加入需要抓取的网址。<br />
第七步：<br />
测试：前提是在你的本机上已经安装好了Solr</p><br />
<br />
<p>bin/crawl <seedDir> <crawlID> <solrURL><numberOfRounds></numberOfRounds></solrURL></crawlID></seedDir></p><br />
<br />
<p>bin/crawl urls/seed.txt alan http://192.168.14.151:8983/solr/  2</p><br />
<br />
<p>Nutch抓取过程：</p><br />
<br />
<p>1) 建立初始 URL 集 <br />
2) 将 URL 集注入 crawldb 数据库—inject</p><br />
<br />
<p>crawldb中存放的是url地址，第一次根据所给url::http://blog.csdn.net/shuaigexiaobo/进行注入，然后updatecrawldb 保存第一次抓取的url地址，下一次即depth=2的时候就会从crawldb中获取新的url地址集，进行新一轮的抓取。</p><br />
<br />
<p>crawldb中有两个文件夹：current 和old. current就是当前url地址集，old是上一次的一个备份。每一次生成新的，都会把原来的改为old。</p><br />
<br />
<p>3) 根据 crawldb 数据库创建抓取列表—generate <br />
4) 执行抓取，获取网页信息—fetch</p><br />
<br />
<p>5) 解析抓取的内容—parse segment<br /><br />
6) 更新数据库，把获取到的页面信息存入数据库中—updatedb <br />
7) 重复进行 3～5 的步骤，直到预先设定的抓取深度。</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ---这个循环过程被称为“产生/抓取/更新”循环  8) 根据 sengments 的内容更新 linkdb 数据库---invertlinks <br />
</code></pre></div></div><br />
<br />
<p>可以看到，一个segment包括以下子目录(多是二进制格式):</p><br />
<br />
<p>content:包含每个抓取页面的内容</p><br />
<br />
<p>crawl_fetch:包含每个抓取页面的状态 <br />
crawl_generate:包含所抓取的网址列表 <br />
crawl_parse:包含网址的外部链接地址，用于更新crawldb数据库 <br />
parse_data:包含每个页面的外部链接和元数据 <br />
parse_text:包含每个抓取页面的解析文本</p><br />
<br />
<p>每个文件的生成时间</p><br />
<br />
<p>1.crawl_generate在Generator的时候生成； <br />
2.content,crawl_fetch在Fetcher的时候生成； <br />
3.crawl_parse,parse_data,parse_text在Parse segment的时候生成。</p><br />
<br />
<p>linkdb: 链接数据库，用来存储每个网址的链接地址，包括源地址和链接地址。</p><br />
<br />
<p>9) 建立索引—index</p><br />
<br />
<p>感谢：http://www.cnblogs.com/huligong1234/p/3515214.html</p><br />
<br />
<p>Nutch的 过滤</p><br />
<br />
<p>在Nutch的conf目录中有automaton-urlfilter.txt、regex-urlfilter.txt、suffix-urlfilter.txt、prefix-urlfilter.txt、domain-urlfilter.txt几个文件用于实现过滤抓取数据，比如不抓取后缀为gif、exe的文件等，通过修改其中的值可以达到只抓取感兴趣的内容的目的，在一定程度上也有助于提高抓取速度。</p><br />
<br />
<p>在抓取过程中，这几个文件不是都起作用的，默认情况下只有regex-urlfilter.txt会达到过滤目的，这一点可以从Nutch-default.xml确认。在进行过滤规则的修改之前，先说明Nutch的过滤器原理。在Nutch中，过滤器是通过插件的方式实现的，插件在nutch-default.xml中定义，具体如下：</p><br />
<br />
<!-- pluginproperties --><br />
<br />
<property><br />
<br />
  <name>plugin.folders</name><br />
<br />
  <value>plugins</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
 <name>plugin.auto-activation</name><br />
<br />
  <value>true</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
  <name>plugin.includes</name><br />
<br />
 <value>protocol-http|urlfilter-regex|parse-(html|tika)|index-(basic|anchor)|urlnormalizer-(pass|regex|basic)|scoring-opic</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
  <name>plugin.excludes</name><br />
<br />
  <value></value><br />
<br />
</property><br />
<br />
<p>其中plugin.folders定义了插件放置的位置，该值可以为绝对路径或者相对路径，若为相对路径则会在classpath中搜索，默认值为plugins，编译后的Nutch，会包含该文件夹。plugin.includes以正则表达式的方式定义了哪些插件将被包含在Nutch中，可以根据属性值查看plugins中的目录来确定默认值，比如urlfilter-regex，则说明默认情况下，过滤器插件使用的是urlfilter-regex，也即regex-urlfilter.txt文件。plugin.excludes属性以正则表达式的方式定义了哪些插件将被排除在Nutch之外定义了。</p><br />
<br />
<p>在了解了插件的定义后，具体看看过滤器分几种以及如何定义的。过滤器在nutch-default.xml中的定义如下：</p><br />
<br />
<!-- urlfilterplugin properties --><br />
<br />
<property><br />
<br />
  <name>urlfilter.domain.file</name><br />
<br />
 <value>domain-urlfilter.txt</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
  <name>urlfilter.regex.file</name><br />
<br />
 <value>regex-urlfilter.txt</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
 <name>urlfilter.automaton.file</name><br />
<br />
 <value>automaton-urlfilter.txt</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
 <name>urlfilter.prefix.file</name><br />
<br />
 <value>prefix-urlfilter.txt</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
 <name>urlfilter.suffix.file</name><br />
<br />
 <value>suffix-urlfilter.txt</value><br />
<br />
</property><br />
<br />
<property><br />
<br />
  <name>urlfilter.order</name><br />
<br />
  <value></value><br />
<br />
</property><br />
<br />
<p>通过上面的代码可知，过滤器可以分为5种，分别为：DomainURLFilter、RegexURLFilter、AutomatonURLFilter 、PrefixURLFilter、SuffixURLFilter，这5中过滤器的配置过滤规则的文件分别为：domain-urlfilter.txt、regex-urlfilter.txt、automaton-urlfilter.txt、prefix-urlfilter.txt、suffix-urlfilter.txt。属性urlfilter.order则定义了过滤器的应用顺序，所有过滤器都是与的关系。</p><br />
<br />
<p>了解了Nutch中是如何定义过滤器之后，再来看看具体的过滤规则文件，以regex-urlfilter.txt（默认情况下即按照该文件中的规则抓取数据）为例。该文件中定义的规则如下：</p><br />
<br />
<h1 id="skip-file-ftpand-mailto-urls">skip file: ftp:and mailto: urls</h1><br />
<br />
<table><br />
  <tbody><br />
    <tr><br />
      <td>-^(file</td><br />
      <td>ftp</td><br />
      <td>mailto):</td><br />
    </tr><br />
  </tbody><br />
</table><br />
<br />
<h1 id="skip-image-andother-suffixes-we-cant-yet-parse">skip image andother suffixes we can’t yet parse</h1><br />
<br />
<h1 id="for-a-moreextensive-coverage-use-the-urlfilter-suffix-plugin">for a moreextensive coverage use the urlfilter-suffix plugin</h1><br />
<br />
<table><br />
  <tbody><br />
    <tr><br />
      <td>-.(gif</td><br />
      <td>GIF</td><br />
      <td>jpg</td><br />
      <td>JPG</td><br />
      <td>png</td><br />
      <td>PNG</td><br />
      <td>ico</td><br />
      <td>ICO</td><br />
      <td>css</td><br />
      <td>CSS</td><br />
      <td>sit</td><br />
      <td>SIT</td><br />
      <td>eps</td><br />
      <td>EPS</td><br />
      <td>wmf</td><br />
      <td>WMF</td><br />
      <td>zip</td><br />
      <td>ZIP</td><br />
      <td>ppt</td><br />
      <td>PPT</td><br />
      <td>mpg</td><br />
      <td>MPG</td><br />
      <td>xls</td><br />
      <td>XLS</td><br />
      <td>gz</td><br />
      <td>GZ</td><br />
      <td>rpm</td><br />
      <td>RPM</td><br />
      <td>tgz</td><br />
      <td>TGZ</td><br />
      <td>mov</td><br />
      <td>MOV</td><br />
      <td>exe</td><br />
      <td>EXE</td><br />
      <td>jpeg</td><br />
      <td>JPEG</td><br />
      <td>bmp</td><br />
      <td>BMP</td><br />
      <td>js</td><br />
      <td>JS)$</td><br />
    </tr><br />
  </tbody><br />
</table><br />
<br />
<h1 id="skip-urlscontaining-certain-characters-as-probable-queries-etc">skip URLscontaining certain characters as probable queries, etc.</h1><br />
<br />
<p>-[?*!@=]</p><br />
<br />
<h1 id="skip-urls-withslash-delimited-segment-that-repeats-3-times-to-break-loops">skip URLs withslash-delimited segment that repeats 3+ times, to break loops</h1><br />
<br />
<p>-.*(/[^/]+)/[^/]+\1/[^/]+\1/</p><br />
<h1 id="accept-anythingelse">accept anythingelse</h1><br />
<br />
<p>+.</p><br />
<br />
<p>其中#表示注释内容，-表示忽略，+表示包含。若待抓取的url匹配该文件中的一个模式，则根据该模式前面的加号或者减号来判断该url是否抓取或者忽略，若url跟该文件中定义的规则都不匹配，则忽略该url。</p><br />
<br />
<p>感谢：http://blog.csdn.net/skywalker_only/article/details/17562543</p><br />
<br />
<p>Nutch 性能优化</p><br />
<br />
<p>读Nutch-site.xml</p><br />
<br />
<p>在nutch-site.xml中：</p><br />
<br />
<name>fetcher.threads.fetch</name><br />
<br />
<value>10</value><br />
<br />
<p>最大抓取线程数量</p><br />
<br />
<name>fetcher.threads.per.queue</name><br />
<br />
<value>1</value><br />
<br />
<p>同一时刻抓取网站的最大线程数量</p><br />
<br />
<p>配置这两个参数，扩大10至50倍，可以极大的加大抓取的性能。</p><br />
<br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category web
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>