<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">nginx_ssi</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2017-12-02T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Dec 2, 2017</time></p>
					</div>
					 <!-- more --><br />
<div class="container"><br />
什么是SSI<br />
Server Side Include，通常称为服务器端嵌入，是一种类似于ASP的基于服务器的网页制作技术。大多数（尤其是基于Unix平台）的WEB服务器如Netscape Enterprise Server等均支持SSI命令。<br />
为什么要用SSI<br />
用个例子来说明，一个静态化的页面中，需要嵌入一小块实时变化的内容，。例如首页，大部分的页面内容需要缓存但是用户登录后的个人信息是动态信息，不能缓存。那么如何解决这个”页面部分缓存”问题，利用SSI就可以解决，在首页的静态页面中嵌入个人信息的动态页，由于是服务器端的嵌入，所以用户浏览的时候都是一个嵌入后的页面。<br />
用途<br />
主要有以下几种用途：<br />
<br />
1．显示服务器端环境变量&lt;#echo&gt;。<br />
<br />
2．将文本内容直接插入到文档中&lt;#include&gt;。<br />
<br />
3．显示WEB文档相关信息&lt;#flastmod #fsize&gt; (如文件制作日期/大小等)。<br />
<br />
4．直接执行服务器上的各种程序&lt;#exec&gt;(如CGI或其他可执行程序)。<br />
<br />
5．设置SSI信息显示格式&lt;#config&gt;(如文件制作日期/大小显示方式) 高级SSI<XSSI>可设置变量使用if条件语句。<br />
<br />
　　SSI工作原理将内容发送到浏览器之前，可以使用“服务器端包含 (SSI)”指令将文本、图形或应用程序信息包含到网页中。例如，可以使用 SSI 包含时间/日期戳、版权声明或供客户填写并返回的表单。对于在多个文件中重复出现的文本或图形，使用包含文件是一种简便的方法。将内容存入一个包含文件中即可，而不必将内容输入所有文件。通过一个非常简单的语句即可调用包含文件，此语句指示 Web服务器将内容插入适当网页。而且，使用包含文件时，对内容的所有更改只需在一个地方就能完成。<br />
<br />
　　因为包含 SSI 指令的文件要求特殊处理，所以必须为所有 SSI 文件赋予 SSI文件扩展名。默认扩展名是 .stm、.shtm 和 .shtml。<br />
<br />
　　Web服务器在处理网页的同时处理 SSI 指令。当 Web服务器遇到 SSI 指令时，直接将包含文件的内容插入 HTML网页。如果“包含文件”中包含 SSI 指令，则同时插入此文件。除了用于包含文件的基本指令之外，还可以使用 SSI 指令插入文件的相关信息（如文件的大小）或者运行应用程序或 shell 命令。<br />
　使用<br />
SSI是为WEB服务器提供的一套命令，这些命令只要直接嵌入到HTML文档的注释内容之中即可。如：<br />
　　<!--#include file="info.htm"-->就是一条SSI指令，其作用是将"info.htm"的内容拷贝到当前的页面中，当访问者来浏览时，会看到其它HTML文档一样显示info.htm其中的内容。<br />
　　其它的SSI指令使用形式基本同刚才的举例差不多，可见SSI使用只是插入一点代码而已，使用形式非常简单。<br />
　　当然，如果WEB服务器不支持SSI，它就会只不过将它当作注释信息，直接跳过其中的内容；浏览器也会忽略这些信息。<br />
　　如何在我的WEB服务器上配置SSI功能？<br />
　　在一些WEB服务器上（如IIS 4.0/SAMBAR 4.2），包含 #include 指令的文件必须使用已被映射到 SSI解释程序的扩展名；否则，Web 服务器将不会处理该SSI指令；默认情况下，扩展名 .stm、.shtm 和 .shtml 被映射到解释程序（Ssinc.dll）。<br />
      Apache则是根据你的设置情况而定，修改srm.conf如：AddType text/x-server-parsed-html<br />
　　.shtml 将只对.shtml扩展名的文件解析SSI指令<br />
　　.html将对所有HTML文档解析SSI指令<br />
　　Netscape WEB服务器直接使用Administration Server(管理服务器)可打开SSI功能。<br />
　　Website使用Server Admin程序中的Mapping标签，扩展名添加内容类型为：wwwserver/html-ssi<br />
　　Cern服务器不支持SSI，可用SSI诈骗法，到http://sw.cse.bris. ac .uk/WebTools/fakessi.html;上下载一个PERL脚本，即可使你的CERN服务器使用一些SSI指令。（不支持exec指令。）<br />
格式<br />
SSI指令基本格式：<br />
　　程序代码:<br />
　　&lt;!-– 指令名称="指令参数"--&gt;<br />
　　&lt;!-– 指令名称="指令参数"--&gt;<br />
　　如 程序代码：<br />
　　　　<!--#include file="info.htm"--><br />
　　　　<!--#include file="info.htm"--><br />
　　说明：<br />
　　　　1．<!-- -->是HTML语法中表示注释，当WEB服务器不支持SSI时，会忽略这些信息。<br />
　　　　2．#include 为SSI指令之一。<br />
　　　　3．file 为include的参数，info.htm为参数值，在本指令中指将要包含的文档名。<br />
　　注意：<br />
　　　　1．<!--与#号间无空格，只有SSI指令与参数间存在空格。<br />
　　　　2．上面的标点=""，一个也不能少。<br />
　　　　3．SSI指令是大小写敏感的，因此参数必须是小写才会起作用。<br />
详解<br />
#echo 示范<br />
作用：<br />
　　将环境变量插入到页面中。<br />
语法：<br />
　　程序代码：<br />
　　<!--#echo var="变量名称"--><br />
　　本文档名称：程序代码：<br />
　　<!--#echo var="DOCUMENT_NAME"--><br />
　　当前时间：程序代码：<br />
　　<!--#echo var="DATE_LOCAL"--><br />
　　<!--#echo var="DATE_LOCAL"--><br />
　　你的IP地址是程序代码：<br />
　　<!--#echo var="REMOTE_ADDR"--><br />
 <br />
#include 示范<br />
作用：<br />
　　将文本文件的内容直接插入到文档页面中。<br />
语法：<br />
　　程序代码：<br />
　　<!--#include file="文件名称"--><br />
　　<!--#include virtual="文件名称"--><br />
　　file 文件名是一个相对路径，该路径相对于使用 #include 指令的文档所在的目录。被包含文件可以在同一级目录或其子目录中，但不能在上一级目录中。如表示当前目录下的的nav_head.htm文档，则为　　　file="nav_head.htm"。<br />
　　virtual 文件名是 Web 站点上的虚拟目录的完整路径。如表示相对于服务器文档根目录下hoyi目录下的nav_head.htm文件；则为virtual="/hoyi/nav_head.htm"<br />
　　参数：<br />
　　file 指定包含文件相对于本文档的位置<br />
　　virtual 指定相对于服务器文档根目录的位置<br />
　　注意：<br />
　　　　1．文件名称必须带有扩展名。<br />
　　　　2．被包含的文件可以具有任何文件扩展名，我觉得直接使用htm扩展名最方便，微软公司推荐使用 .inc 扩展名（这就看你的爱好了）。<br />
示例：<br />
　　程序代码：<br />
　　<!--#include file="nav_head.htm"-->将头文件插入到当前页面<br />
　　<!--#include file="nav_foot.htm"-->将尾文件插入到当前页面<br />
　　#flastmod 和#fsize 示范<br />
作用：#flastmod 文件最后一次更新日期<br />
 <br />
#fsize 文件的长度<br />
语法：<br />
　　程序代码：<br />
　　<!--#flastmod file="文件名称"--><br />
　　<!--#fsize file="文件名称"--><br />
参数：<br />
　　file 指定包含文件相对于本文档的位置 如 info.txt 表示当前目录下的的info.txt文档<br />
　　virtual 指定相对于服务器文档根目录的位置 如 /hoyi/info.txt 表示<br />
注意：<br />
　　文件名称必须带有扩展名。<br />
示例：<br />
　　程序代码：<br />
　　<!--#flastmod file="news.htm"--><br />
　　将当前目录下news.htm文件的最后一次更新日期插入到当前页面<br />
　　程序代码：<br />
　　<!--#fsize file="news.htm"--><br />
　　将当前目录下news.htm的文件大小入到当前页面<br />
 <br />
#exec 示范<br />
作用：<br />
　　将某一外部程序的输出插入到页面中。可插入CGI程序或者是常规应用程序的输入，这取决于使用的参数是cmd还是cgi。<br />
语法：<br />
　　程序代码：<br />
　　<!--#exec cmd="文件名称"--><br />
　　<!--#exec cgi="文件名称"--><br />
参数：<br />
　　cmd 常规应用程序<br />
　　cgi CGI脚本程序<br />
示例：<br />
　　程序代码：<br />
　　<!--#exec cmd="cat /etc/passwd"-->将会显示密码文件<br />
　　<!--#exec cmd="dir /b"-->将会显示当前目录下文件列表<br />
　　<!--#exec cgi="/cgi-bin/gb.cgi"-->将会执行CGI程序gb.cgi。<br />
　　<!--#exec cgi="/cgi-bin/access_log.cgi"-->将会执行CGI程序access_log.cgi。<br />
注意：<br />
　　从上面的示例可以看出，这个指令相当方便，但是也存在安全问题。<br />
禁止方法：<br />
　　．Apache，将access.conf中的"Options Includes ExecCGI"这行代码删除；<br />
　　．在IIS中，要禁用 #exec 命令，可修改 SSIExecDisable 元数据库；<br />
 <br />
#config<br />
作用：<br />
　　指定返回给客户端浏览器的错误信息、日期和文件大小的格式。<br />
语法：<br />
　　程序代码：<br />
　　<!--#config errmsg="自定义错误信息"--><br />
　　<!--#config sizefmt="显示单位"--><br />
　　<!--#config timefmt="显示格式"--><br />
参数：<br />
　　errmsg 自定义SSI执行错误信息，可以为任何你喜欢的方式。<br />
　　sizefmt 文件大小显示方式，默认为字节方式("bytes")可以改为千字节方式("abbrev")<br />
　　timefmt 时间显示方式，最灵活的配置属性。<br />
示例：显示一个不存在文件的大小<br />
　　程序代码：<br />
　　<!--#config errmsg="服务器执行错误，谢谢！"--><br />
　　<!--#fsize file="不存在的文件.htm"--><br />
　　以千字节方式显示文件大小<br />
　　程序代码：<br />
　　<!--#config sizefmt="abbrev"--><br />
　　<!--#fsizefile="news.htm"--><br />
　　以特定的时间格式显示时间<br />
　　程序代码：<br />
　　<!--#config timefmt="%Y年/%m月%d日 星期%W 北京时间%H:%M:%s，%Y年已过去了%j天 今天是%Y年的第%U个星期"--><br />
　　<!--#echo var="DATE_LOCAL"--> 显示今天是星期几，几月，时区<br />
　　<!--#config timefmt="今天%A,%B,服务器时区是 %z，是"--><br />
　　<!--#echo var="DATE_LOCAL"--><br />
XSSI<br />
XSSI（Extended SSI）是一组高级SSI指令，内置于Apache 1.2或更高版本的mod-include模块之中。<br />
其中可利用的的指令有：<br />
#printenv<br />
#set<br />
#if<br />
#printenv<br />
作用：显示当前存在于WEB服务器环境中的所有环境变量。<br />
语法：程序代码：<br />
<!--#printenv--><br />
#set<br />
作用：可给变量赋值，以用于后面的if语句。<br />
语法：程序代码：<br />
<!--#set var="变量名"value="变量值"--><br />
参数：无<br />
示例：程序代码：<br />
<!--#set var="color"value="红色"--><br />
#if<br />
作用：创建可以改变数据的页面，这些数据根据使用if语句时计算的要求予以显示。<br />
语法：程序代码：<br />
<!--#if expr="$变量名=\"变量值A\""--><br />
显示内容<br />
<!--#elif expr="$变量名=\"变量值B\""--><br />
显示内容<br />
<!--#else--><br />
显示内容<br />
<!--#endif"--><br />
示例：<br />
程序代码：<br />
<!--#if expr="$SERVER_NAME=\"bk.baidu .com\""--><br />
欢迎光临百度。<br />
<!--#elif expr="$SERVER_NAME=\"bk.baidu .com\"" --><br />
欢迎光临百度知道。<br />
<!--#else--><br />
欢迎光临百度百科。<br />
<!--#endif"--><br />
注意：用于前面指令中的反斜杠，是用来代换内部的引号，以便它们不会被解释为结束表达式。不可省略。<br />
命令<br />
config<br />
<br />
Config命令主要用于修改SSI的默认设置。其中：<br />
Errmsg：设置默认错误信息。为了能够正常的返回用户设定的错误信息，在HTML文件中Errmsg参数必须被放置在其它SSI命令的前面，否则客户端只能显示默认的错误信息，而不是由用户设定的自定义信息。<br />
<!--#config errmsg="Error! --><br />
Timefmt：定义日期和时间的使用格式。Timefmt参数必须在echo命令之前使用。<br />
<!--#config timefmt="%A,%B %d,%Y"--><br />
<!--#echo var="LAST_MODIFIED" --><br />
显示结果为：<br />
Wednesday,April 12,2000<br />
也许用户对上例中所使用的%A %B %d感到很陌生，下面我们就以表格的形式总结一下SSI中较为常用的一些日期和时间格式。<br />
Sizefmt：决定文件大小是以字节、千字节还是兆字节为单位表示。如果以字节为单位，参数值为"bytes"；对于千字节和兆字节可以使用缩写形式。同样，sizefmt参数必须放在fsize命令的前面才能使用。<br />
<!--#config sizefmt="bytes" --><br />
<!--#fsize file="index.html" --><br />
Include<br />
<br />
Include命令可以把其它文档中的文字或图片插入到当前被解析的文档中，这是整个SSI的关键所在。通过Include命令只需要改动一个文件就可以瞬间更新整个站点！<br />
Include命令具有两个不同的参数：<br />
Virtual：给出到服务器端某个文档的虚拟路径。例如：<br />
<!--#include virtual="/includes/header.html" --><br />
File：给出到当前目录的相对路径，其中不能使用"../"，也不能使用绝对路径。例如：<br />
<!--#include file="header.html" --><br />
这就要求每一个目录中都包含一个header.html文件。<br />
echo<br />
<br />
Echo命令可以显示以下各环境变量：<br />
DOCUMENT_NAME：显示当前文档的名称。<br />
<!--#echo var="DOCUMENT_NAME" --><br />
显示结果为：<br />
index.html<br />
DOCUMENT_URI：显示当前文档的虚拟路径。例如：<br />
<!--#echo var="DOCUMENT_URI" --><br />
显示结果为：<br />
/YourDirectory/YourFilename.html<br />
随着网站的不断发展，那些越来越长的URL地址肯定会让人头疼。如果使用SSI，一切就会迎刃而解。因为我们可以把网站的域名和SSI命令结合在一起显示完整的URL，即：<br />
http://YourDomain<!--#echovar="DOCUMENT_URI" --><br />
QUERY_STRING_UNESCAPED：显示未经转义处理的由客户端发送的查询字串，其中所有的特殊字符前面都有转义符"\"。例如：<br />
<!--#echo var="QUERY_STRING_UNESCAPED" --><br />
DATE_LOCAL：显示服务器设定时区的日期和时间。用户可以结合config命令的timefmt参数，定制输出信息。例如：<br />
<!--#config timefmt="%A,the %d of %B,in the year %Y" --><br />
<!--#echo var="DATE_LOCAL" --><br />
显示结果为：<br />
Saturday,the 15 of April,in the year 2000<br />
DATE_GMT：功能与DATE_LOCAL一样，只不过返回的是以格林尼治标准时间为基准的日期。例如：<br />
<!--#echo var="DATE_GMT" --><br />
LAST_MODIFIED：显示当前文档的最后更新时间。同样，这是SSI中非常实用的一个功能，只要在HTML文档中加入以下这行简单的文字，就可以在页面上动态的显示更新时间。<br />
<!--#echo var="LAST_MODIFIED" --><br />
CGI环境变量<br />
除了SSI环境变量之外，echo命令还可以显示以下CGI环境变量：<br />
SERVER_SOFTWARE：显示服务器软件的名称和版本。例如：<br />
<!--#echo var="SERVER_SOFTWARE" --><br />
SERVER_NAME：显示服务器的主机名称，DNS别名或IP地址。例如：<br />
<!--#echo var="SERVER_NAME" --><br />
SERVER_PROTOCOL：显示客户端请求所使用的协议名称和版本，如HTTP/1.0。例如：<br />
<!--#echo var="SERVER_PROTOCOL" --><br />
SERVER_PORT：显示服务器的响应端口。例如：<br />
<!--#echo var="SERVER_PORT" --><br />
REQUEST_METHOD：显示客户端的文档请求方法，包括GET,HEAD,和POST。例如：<br />
<!--#echo var="REQUEST_METHOD" --><br />
REMOTE_HOST：显示发出请求信息的客户端主机名称。<br />
<!--#echo var="REMOTE_HOST" --><br />
REMOTE_ADDR：显示发出请求信息的客户端IP地址。<br />
<!--#echo var="REMOTE_ADDR" --><br />
AUTH_TYPE：显示用户身份的验证方法。<br />
<!--#echo var="AUTH_TYPE" --><br />
REMOTE_USER：显示访问受保护页面的用户所使用的帐号名称。<br />
<!--#echo var="REMOTE_USER" --><br />
fsize<br />
<br />
显示指定文件的大小，可以结合config命令的sizefmt参数定制输出格式。<br />
<!--#fsize file="index_working.html" --><br />
flastmod<br />
<br />
显示指定文件的最后修改日期，可以结合config 命令的timefmt参数控制输出格式。<br />
<!--#config timefmt="%A,the %d of %B,in the year %Y" --><br />
<!--#flastmod file="file.html" --><br />
这里，我们可以利用flastmod参数显示出一个页面上所有链接页面的更新日期。方法如下：<br />
<!--#config timefmt=" %B %d,%Y" --><br />
File<br />
<!--#flastmod virtual="/directory/file.html" --><br />
Another File<br />
<!--#flastmod virtual="/another_directory/another_file.html" --><br />
显示结果为：<br />
File April 19,2000<br />
Another File January 08,2000<br />
exec<br />
<br />
Exec命令可以执行CGI脚本或者shell命令。使用方法如下：<br />
Cmd：使用/bin/sh执行指定的字串。如果SSI使用了IncludesNOEXEC选项，则该命令将被屏蔽。<br />
Cgi：可以用来执行CGI脚本。例如，下面这个例子中使用服务端cgi-bin目录下的counter .pl脚本程序在每个页面放置一个计数器<br />
<!--#exec cgi="/cgi-bin/counter .pl" --><br />
指令区别<br />
　　SHTML和HTML的区别，如果用一句话来解释就是：SHTML 不是HTML而是一种服务器API,shtml可通过服务器动态产成html. 虽然两者都是超文本格式，但shtml是一种用于SSI技术的文件。也就是Server Side Include--SSI服务器端包含指令。如果Web Server有SSI功能的话(大多数（尤其是基于Unix平台）的WEB服务器如Netscape Enterprise Server等均支持SSI命令)。会对shtml文件特殊招待。先扫一次shtml文件看有没有特殊的SSI指令存在。有就按Web Server设定规则解释SSI指令。解释完后跟一般html一起调去客户端。html或htm与shtml或shtm的关系是什么？html或者htm是一种静态的页面格式，也就是说不需要服务器解析其中的脚本，或者说里面没有服务器端执行的脚本，而shtml或者shtm由于它基于SSI技术，当有服务器端可执行脚本时被当作一种动态编程语言来看待，就如asp、jsp或者php一样。当shtml或者shtm中不包含服务器端可执行脚本时其作用和html或者htm是一样的。<br />
<br />
　如下是支持ssi的配置部分：<br />
server {<br />
    listen          80;<br />
    server_name     doc.outofmemory.cn;<br />
    access_log      /www/logs/doc.outofmemory.cn/access.log;<br />
<br />
    ssi on;<br />
    ssi_silent_errors on;<br />
    ssi_types text/shtml;<br />
<br />
    location / {<br />
        index index.html;<br />
        root  /www/doc.outofmemory.cn/;<br />
    }<br />
}<br />
在上面的server配置中，只要有如下三行，就可以支持ssi（server side include）了<br />
<br />
需要的选项主要是以下三个：<br />
ssi: 默认值off，启用ssi时将其设为on<br />
ssi_silent_errors: 默认值off，开启后在处理SSI文件出错时不输出错误提示"[an error occurred while processing the directive]"。<br />
ssi_types: 默认是text/html，所以如果需支持html，则不需要设置这句，如果需要支持shtml则需要设置：ssi_types text/shtml<br />
三个参数可以放在http, server或location作用域下。<br />
<br />
 # ./nginx -s reload<br />
nginx: [error] open() "/usr/local/nginx/logs/nginx.pid" failed (2: No such file or directory)<br />
 解决方法：<br />
[root@localhost nginx]# /usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.conf<br />
&lt;/div&gt;<br />
</XSSI></div><br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category web
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>