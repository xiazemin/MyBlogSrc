<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">gulp webpack grunt requirejs</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2020-02-17T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Feb 17, 2020</time></p>
					</div>
					 <ol><br />
  <li><br />
    <p>书写方式<br />
grunt 运用配置的思想来写打包脚本，一切皆配置，所以会出现比较多的配置项，诸如option,src,dest等等。而且不同的插件可能会有自己扩展字段，导致认知成本的提高，运用的时候要搞懂各种插件的配置规则。<br />
gulp 是用代码方式来写打包脚本，并且代码采用流式的写法，只抽象出了gulp.src, gulp.pipe, gulp.dest, gulp.watch gulp.task等接口,运用相当简单。经尝试，使用gulp的代码量能比grunt少一半左右。</p><br />
  </li><br />
  <li><br />
    <p>任务划分<br />
gulp是工具链、构建工具，可以配合各种插件做js压缩，css压缩，less编译 替代手工实现自动化工作</p><br />
  </li><br />
</ol><br />
<br />
<p>1.构建工具  :　   可以用构建基础项目</p><br />
<br />
<p>2.自动化  :          可以通过gulp.task配置各接口自动对js,css,html代码进行压缩, 自动刷新页面( IDE好多已经可以自动刷新了 )</p><br />
<br />
<p>3.提高效率用  :  可以编译less语法,可认快速对css的编辑</p><br />
<br />
<p>webpack是文件打包工具，可以把项目的各种js文、css文件等打包合并成一个或多个文件，主要用于模块化方案，预编译模块的方案</p><br />
<br />
<p>1.打包工具   :   gulp 也可以,但是需要按项目配置属性项 ,  webpack 很集成了,简单</p><br />
<br />
<p>2.模块化识别</p><br />
<br />
<p>3.编译模块代码方案用</p><br />
<br />
<p>所以定义和用法上来说 都不是一种东西，无可比性 ，更不冲突！【当然，也有相似的功能，比如合并，区分，但各有各的优势】</p><br />
<br />
<p>　　seajs / require : 是一种在线”编译” 模块的方案，相当于在页面上加载一个 CMD/AMD 解释器。这样浏览器就认识了 define、exports、module 这些东西。也就实现了模块化。</p><br />
<br />
<p>　　browserify / webpack : 是一个预编译模块的方案，相比于上面 ，这个方案更加智能。没用过browserify，这里以webpack为例。首先，它是预编译的，不需要在浏览器中加载解释器。另外，你在本地直接写JS，不管是 AMD / CMD / ES6 风格的模块化，它都能认识，并且编译成浏览器认识的JS。这样就知道，Gulp是一个工具，而webpack等等是模块化方案。Gulp也可以配置seajs、requirejs甚至webpack的插件。</p><br />
<br />
<p>1,gulp更注重前端开发流程</p><br />
<br />
<p>2,webpack更注重模块化开发</p><br />
<br />
<p>Gulp和Webpack的基本区别：</p><br />
<br />
<p>gulp可以进行js，html，css，img的压缩打包，是自动化构建工具，可以将多个js文件或是css压缩成一个文件，并且可以压缩为一行，以此来减少文件体积，加快请求速度和减少请求次数；并且gulp有task定义处理事务，从而构建整体流程，它是基于流的自动化构建工具。</p><br />
<br />
<p>Webpack是前端构建工具，实现了模块化开发和文件处理。他的思想就是“万物皆为模块”，它能够将各个模块进行按需加载，不会导致加载了无用或冗余的代码。所以他还有个名字叫前端模块化打包工具。</p><br />
<br />
<p>就我而言，我在实际当中会将两种都选择混合使用。虽然两个都可以进行代码的压缩合并减少代码体积，但gulp.config.js中gulp的代码更加简单易懂，需要压缩合并谁就用哪个方法，而webpack样式合并需要在node环境下下载插件才能使用。另一点，gulp 是基于流的打包工具，需要谁，引用谁，并且他的压缩简单明了，后期维护起来方便，webpack则可以将具体的模块进行划分，需要哪个模块就加载哪个模块，实现按需加载，并且排除掉冗余代码，减少代码体积。</p><br />
<br />
<p>总结起来就是，gulp是基于流的自动化构建工具，但不包括模块化的功能，如果要用到的话，就需要引入外部文件，比如require.js等；而webpack是自动化模块打包工具，本身就具有模块化，并且也具有压缩合并的功能。二者侧重点不同，我认为相互结合使用会提高代码质量和代码的优化。</p><br />
<br />
<!-- more --><br />
<p>gulp的核心配置文件:<br />
webpack的核心配置文件:</p><br />
<br />
<p>1,必须要有一个入口文件,入口文件是入口起点告诉 webpack 从哪里开始，并遵循着依赖关系图表知道要打包什么。可以将您应用程序的入口起点认为是根上下文(contextual root)或 app 第一个启动文件       入口文件需要我们自己创建,并在webpack.config.js中的entry:处写上正确路径</p><br />
<br />
<p>2,出口            将所有的资源(assets)归拢在一起后，我们还需要告诉 webpack 在哪里打包我们的应用程序。webpack 的 output 属性描述了如何处理归拢在一起的代码(bundled code)。</p><br />
<br />
<p>3加载器</p><br />
<br />
<p>webpack 的目标是，让 webpack 聚焦于项目中的所有资源(asset)，而浏览器不需要关注考虑这些（这并不意味着资源(asset)都必须打包在一起）。webpack 把每个文件(.css, .html, .scss, .jpg, etc.) 都作为模块处理。而且 webpack 只理解 JavaScript。</p><br />
<br />
<p>webpack loader 会将这些文件转换为模块，而转换后的文件会被添加到依赖图表中。</p><br />
<br />
<p>在更高层面，webpack 的配置有两个目标。</p><br />
<br />
<p>识别出(identify)应该被对应的 loader 进行转换(transform)的那些文件<br />
由于进行过文件转换，所以能够将被转换的文件添加到依赖图表（并且最终添加到 bundle 中）(use属性)<br />
以上配置中，我们对一个单独的 module 对象定义了 rules 属性，里面包含两个必须属性：test 和 use。这可以告诉 webpack compiler 如下：</p><br />
<br />
<p>“嘿，webpack compiler，当你碰到「在 require()/import 语句中被解析为 ‘.js’ 或 ‘.jsx’ 的路径」时，在你把它们添加并打包之前，要先使用 babel-loader 去转换”。</p><br />
<br />
<p>W&gt; 重要的是要记得，在 webpack 配置中定义 loader 时，要定义在 module.rules 中，而不是 rules。在定义错时 webpack 会提出严重的警告。</p><br />
<br />
<p>我们还有尚未提到的 loader，可以设定更多特定属性。</p><br />
<br />
<p>4,插件</p><br />
<br />
<p>插件是 wepback 的支柱功能。在你使用 webpack 配置时，webpack 自身也构建于同样的插件系统上！</p><br />
<br />
<p>webpack 插件是一个具有 apply 属性的 JavaScript 对象。 apply 属性会被 webpack compiler 调用，并且 compiler 对象可在整个 compilation 生命周期访问。</p><br />
<br />
<p>使用Gulp+Webpack<br />
首先安装gulp require-dir<br />
npm i -D gulp require-dir<br />
在根目录新建文件 gulpfile.js<br />
其中requireDir(传入的目录是gulp要读取的文件目录)<br />
这里gulp目录里每个js文件就是一个gulp任务<br />
gulp会读取所以js里定义的gulp任务名,与 default 任务为入口</p><br />
<br />
<p>default 任务<br />
主要是用来整个任务, 整个流程就是<br />
清除 =&gt; (编译, 这里用webpack做处理) =&gt; 文件压缩 =&gt;启动服务器 =&gt; 监听文件 (改动文件时实时刷新)</p><br />
<br />
<p>clean任务<br />
主要是清除已经打包生成的文件, 这里使用 del 模板, 如果要在管道中删除的话可以使用 vinyl-paths<br />
其中 callback 用于解决异步操作问题, ‘!build/favicon.ico’ 取反不会被删除</p><br />
<br />
<p>文件压缩, 主要是 js, css以及图片<br />
对js文件进行压缩时,如果js文件中具有ES6语法, 要先编译然后再压缩;</p><br />
<br />
<p>webpack<br />
将 webpack 当成 gulp 的一个任务,对它进行操作<br />
server<br />
建立本地服务器,导出reload以便在其他文件中实现浏览器刷新</p><br />
<br />
<p>gulp 常用插件：</p><br />
<br />
<p>gulp-load-plugins：自动加载 package.json 中的 gulp 插件<br />
gulp-rename： 重命名<br />
gulp-uglify：文件压缩<br />
gulp-concat：文件合并<br />
gulp-less：编译 less<br />
gulp-sass：编译 sass<br />
gulp-clean-css：压缩 CSS 文件<br />
gulp-htmlmin：压缩 HTML 文件<br />
gulp-babel：使用 babel 编译 JS 文件<br />
gulp-jshint：jshint 检查<br />
gulp-imagemin：压缩 jpg、png、gif 等图片<br />
gulp-livereload：当代码变化时，它可以帮我们自动刷新页面<br />
Webpack 概念很多，但搞清楚 entry，output 和 loader 三个关键点，基本上就可以解决简单的问题了，稍微复杂的场景主要包括对资源的合并处理、分拆处理、多次打包等，部分这样的问题可以使用插件辅助解决，但是 Webpack 的强大并不在文件处理，而是依赖分析，所以在流程操作特别复杂的情况，webpack 并不能胜任工作，往往会被作为 gulp 的一个 task，整体工作流交给 gulp 主导。</p><br />
<br />
<p>webpack 常用的 loader 和 plugin：</p><br />
<br />
<p>Loader 列表</p><br />
<br />
<p>less-loader, sass-loader：处理样式<br />
url-loader, file-loader：两个都必须用上。否则超过大小限制的图片无法生成到目标文件夹中<br />
babel-loader，babel-preset-es2015，babel-preset-react：js 处理，转码<br />
expose-loader： 将 js 模块暴露到全局<br />
Plugin 列表</p><br />
<br />
<p>NormalModuleReplacementPlugin：匹配 resourceRegExp，替换为 newResource<br />
ContextReplacementPlugin：替换上下文的插件<br />
IgnorePlugin：不打包匹配文件<br />
PrefetchPlugin：预加载的插件，提高性能<br />
ResolverPlugin：替换上下文的插件<br />
DedupePlugin：删除重复或者相似的文件<br />
LimitChunkCountPlugin：限制打包文件的个数<br />
UglifyJsPlugin：JS文件的压缩<br />
CommonsChunkPlugin：共用模块提取<br />
HotModuleReplacementPlugin：runtime时候的模块热替换<br />
NoErrorsPlugin：跳过编译时出错的代码并记录，使编译后运行时的包不会发生错误。<br />
HtmlWebpackPlugin：HTML模块的热更新<br />
–</p><br />
<br />
<ol><br />
  <li>Gulp 简介<br />
Gulp.js 是一个自动化构建工具，开发者可以使用它在项目开发过程中自动执行常见任务。Gulp.js 是基于 Node.js 构建的，利用 Node.js 流的威力，你可以快速构建项目并减少频繁的 IO 操作。Gulp.js 源文件和你用来定义任务的 Gulp 文件都是通过 JavaScript（或者 CoffeeScript ）源码来实现的。</li><br />
</ol><br />
<br />
<p>2.1 安装 Gulp<br />
1 . 全局安装 gulp</p><br />
<br />
<p>npm install –global gulp<br />
2 . 作为项目的开发依赖（devDependencies）安装：</p><br />
<br />
<p>npm install –save-dev gulp<br />
我们全局安装了gulp，项目也安装了gulp，全局安装gulp是为了执行gulp任务，本地安装gulp则是为了调用gulp插件的功能。</p><br />
<br />
<p>2.2 配置Gulp<br />
在项目根目录下创建一个名为 gulpfile.js 的文件，gulpfile.js是gulp项目的配置文件</p><br />
<br />
<p>var gulp = require(‘gulp’);</p><br />
<br />
<p>gulp.task(‘default’, function() {<br />
  // 将你的默认的任务代码放在这<br />
});<br />
2.3 运行gulp<br />
在命令提示符执行 gulp 任务名称</p><br />
<br />
<!-- 调用默认任务default --><br />
<p>gulp  或者  gulp default<br />
2.4 清除文件<br />
通过gulp删除某个文件夹的文件</p><br />
<br />
<p>1 . 安装 gulp-clean</p><br />
<br />
<p>npm i gulp-clean –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var clean = require(‘gulp-clean’);</p><br />
<br />
<p>gulp.task(‘clean’, function() {<br />
    return gulp.src([‘dist/css’, ‘dist/js’], { read: false })<br />
               .pipe(clean());<br />
});<br />
2.5 编译less<br />
通过gulp编译LESS代码</p><br />
<br />
<p>1 . 安装 gulp-less</p><br />
<br />
<p>npm i gulp-less –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var less = require(‘gulp-less’);</p><br />
<br />
<p>gulp.task(‘styles’, function() {<br />
    return gulp.src(‘src/less/*.less’) //源文件路径<br />
        .pipe(less()) //less编译<br />
        .pipe(gulp.dest(‘dist/css’)) //目的路径<br />
});<br />
2.6 自动前缀<br />
通过gulp处理css的自动前缀</p><br />
<br />
<p>1 . 安装 gulp-autoprefixer</p><br />
<br />
<p>npm i gulp-autoprefixer –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var autoprefixer = require(‘gulp-autoprefixer’);</p><br />
<br />
<p>gulp.task(‘styles’, function() {<br />
    return gulp.src(‘src/css/*.css’) //源文件路径<br />
        .pipe(autoprefixer()) //自动前缀<br />
        .pipe(gulp.dest(‘dist/css’)) //目的路径<br />
});<br />
2.7 base64编码<br />
通过gulp将css中的图片转换成base65编码</p><br />
<br />
<p>1 . 安装 gulp-base64</p><br />
<br />
<p>npm i gulp-base64 –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var base64 = require(‘gulp-base64’);</p><br />
<br />
<p>gulp.task(‘styles’, function() {<br />
    return gulp.src(‘src/css/*.css’) //源文件路径<br />
        .pipe(base64()) //base64编码<br />
        .pipe(gulp.dest(‘dist/css’)) //目的路径<br />
});<br />
2.8 css压缩<br />
通过gulp将css进行压缩</p><br />
<br />
<p>1 . 安装 gulp-minify-css</p><br />
<br />
<p>npm i gulp-minify-css –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var cssmin = require(‘gulp-minify-css’);</p><br />
<br />
<p>gulp.task(‘styles’, function() {<br />
    return gulp.src(‘src/css/*.css’) //源文件路径<br />
        .pipe(cssmin()) //css压缩<br />
        .pipe(gulp.dest(‘dist/css’)) //目的路径<br />
});<br />
2.9 排列文件顺序<br />
通过gulp将js调整前后顺序</p><br />
<br />
<p>1 . 安装 gulp-order</p><br />
<br />
<p>npm i gulp-order –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var order = require(“gulp-order”);</p><br />
<br />
<p>gulp.task(‘scripts’, function() {<br />
    return gulp.src(‘src/js/*.js’)  //源文件路径<br />
        .pipe(order([<br />
            “src/js/config.js”,<br />
            “src/js/index.js”<br />
        ]))<br />
        .pipe(gulp.dest(‘dist/js’)) //目的路径<br />
})<br />
2.10 合并文件<br />
通过gulp将多个文件进行合并</p><br />
<br />
<p>1 . 安装 gulp-concat</p><br />
<br />
<p>npm i gulp-concat –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var concat = require(‘gulp-concat’);</p><br />
<br />
<p>gulp.task(‘scripts’, function() {<br />
    return gulp.src(‘src/js/*.js’)  //源文件路径<br />
        .pipe(concat(‘main.js’))  //合并文件<br />
        .pipe(gulp.dest(‘dist/js’)) //目的路径<br />
})<br />
2.11 重命名文件<br />
通过gulp将文件名进行更改</p><br />
<br />
<p>1 . 安装 gulp-rename</p><br />
<br />
<p>npm i gulp-rename –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var rename = require(‘gulp-rename’);</p><br />
<br />
<p>gulp.task(‘scripts’, function() {<br />
    return gulp.src(‘src/js/*.js’)  //源文件路径<br />
         .pipe(rename({<br /><br />
              suffix: ‘.min’<br />
          }))   //修改文件名   <br /><br />
         .pipe(gulp.dest(‘dist/js’)) //目的路径<br />
})<br />
2.12 JS文件压缩<br />
通过gulp将js文件进行压缩</p><br />
<br />
<p>1 . 安装 gulp-uglify</p><br />
<br />
<p>npm i gulp-uglify –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var rename = require(‘gulp-rename’);</p><br />
<br />
<p>gulp.task(‘scripts’, function() {<br />
    return gulp.src(‘src/js/*.js’)  //源文件路径<br />
         .pipe(uglify())   //压缩js<br />
         .pipe(gulp.dest(‘dist/js’)) //目的路径<br />
})<br />
2.13 图片压缩<br />
通过gulp将图片进行压缩</p><br />
<br />
<p>1 . 安装 gulp-imagemin</p><br />
<br />
<p>npm i gulp-imagemin –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>gulp.task(‘images’, function() {<br />
    return gulp.src(‘src/img/*’)<br />
        .pipe(cache(imagemin({<br />
            optimizationLevel: 3,<br />
            progressive: true,<br />
            interlaced: true<br />
        })))<br />
        .pipe(gulp.dest(‘dist/img’))<br />
});<br />
2.14 处理串行任务<br />
定义多个任务的顺序执行关系，否则默认情况下，任务会以最大的并发数同时运行。</p><br />
<br />
<p>//清除任务<br />
gulp.task(‘clean’, function() {<br />
    return gulp.src(‘dist/css’, { read: false })<br />
        .pipe(clean());<br />
});</p><br />
<br />
<p>//编译任务<br />
gulp.task(‘styles’, function() {<br />
    return gulp.src(‘src/less/*.less’) //源文件路径<br />
        .pipe(less()) //less编译                     <br /><br />
        .pipe(gulp.dest(‘dist/css’)) //目的路径<br />
});</p><br />
<br />
<p>//先清空目录，然后再执行编译CSS<br />
gulp.task(‘default’, [‘clean’], function() {<br />
    gulp.start(‘styles’)<br />
});<br />
2.15 热加载服务<br />
使用 BrowserSync 服务实现文件变更的实时编译调试</p><br />
<br />
<p>1 . 安装 browser-sync</p><br />
<br />
<p>npm i browser-sync –save-dev<br />
2 . 编写 gulpfile.js 代码</p><br />
<br />
<p>var browserSync = require(‘browser-sync’).create();</p><br />
<br />
<p>gulp.task(‘dev’, function() {<br />
    //初始化browser-sync服务<br />
    browserSync.init({<br />
        server: {<br />
            baseDir: “./dist”<br />
        }<br />
    });</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>//检测less文件是否更改，来调用重新编译css<br />
gulp.watch('src/less/*', ['styles']);  <br />
<br />
//如果css文件更改过则刷新服务器<br />
gulp.watch( ['./dist/sys/css/*'] ).on("change", browserSync.reload) }); --<br />
</code></pre></div></div><br />
<br />
<ol><br />
  <li>Webpack 简介<br />
WebPack可以看做是模块打包机：把你的项目当做一个整体，通过一个给定的主文件（如：index.js），从这个文件开始分析你的项目结构，找到项目的所有依赖文件，使用loaders处理它们，最后打包为一个浏览器可识别的JavaScript文件。</li><br />
</ol><br />
<br />
<h2 id="imagepng">image.png</h2><br />
<br />
<p>3.1 配置webpack<br />
1 . 新建一个项目文件夹，并且安装webpack</p><br />
<br />
<p>mkdir webpack-demo &amp;&amp; cd webpack-demo<br />
npm init -y<br />
npm install –save-dev webpack<br />
2 . 新建html以及js文件如下</p><br />
<br />
<html><br />
    <head><br />
        <title>webpack</title><br />
    </head><br />
    <body><br />
        <div class="g-index"></div><br />
        <br />
        <script src="dist/bundle.js"></script><br />
    </body><br />
</html><br />
<!-- common.js --><br />
<p>exports.printmsg = function(msg) {<br />
    console.log(msg);<br />
}</p><br />
<br />
<!-- index.js --><br />
<p>var lib = require(‘./common.js’)<br />
lib.printmsg(‘good’)<br />
3 . 编译webpack</p><br />
<br />
<p>webpack src/js/index.js dist/bundle.js<br />
可以看到打包结果如下：</p><br />
<br />
<p>$ webpack src/js/index.js dist/bundle.js<br />
Hash: 39e1d99d27c58dd34eb1<br />
Version: webpack 2.5.1<br />
Time: 81ms<br />
    Asset     Size  Chunks             Chunk Names<br />
bundle.js  2.82 kB       0  [emitted]  main<br />
   [0] ./src/js/common.js 58 bytes {0} [built]<br />
   [1] ./src/js/index.js 50 bytes {0} [built]<br />
项目结构如下：</p><br />
<br />
<h2 id="imagepng-1">image.png</h2><br />
<br />
<p>3.2 编写配置文件<br />
Webpack拥有很多高级的功能，这些功能其实都可以通过命令行模式实现，但是正如已经提到的，这样不太方便且容易出错的，一个更好的办法是定义一个配置文件，这个配置文件其实也是一个简单的JavaScript模块，可以把所有的与构建相关的信息放在里面。下面来说明如何定义一个配置文件：</p><br />
<br />
<p>1 . 在根目录下面新建 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);</p><br />
<br />
<p>module.exports = {<br />
  entry: ‘./src/js/index.js’,<br />
  output: {<br />
    filename: ‘bundle.js’,<br />
    path: path.resolve(__dirname, ‘dist’)<br />
  }<br />
};<br />
2 . 修改 package.json，添加条目如下</p><br />
<br />
<p>{<br />
  …<br />
  “scripts”: {<br />
    “build”: “webpack”,<br />
  },<br />
  …<br />
}<br />
3 . 使用命令行编译项目</p><br />
<br />
<h2 id="npm-run-build">npm run build</h2><br />
<br />
<p>3.3 调试webpack<br />
开发总是离不开调试，如果可以更加方便的调试当然就能提高开发效率，不过打包后的文件有时候你是不容易找到出错了的地方对应的源代码的位置的，Source Maps就是来帮我们解决这个问题的。通过简单的配置后，Webpack在打包时可以为我们生成的source maps，这为我们提供了一种对应编译文件和源文件的方法，使得编译后的代码可读性更高，也更容易调试。</p><br />
<br />
<p>devtool选项	配置结果<br />
source-map	在一个单独的文件中产生一个完整且功能完全的文件。这个文件具有最好的source map，但是它会减慢打包文件的构建速度；<br />
cheap-module-source-map	在一个单独的文件中生成一个不带列映射的map，不带列映射提高项目构建速度，但是也使得浏览器开发者工具只能对应到具体的行，不能对应到具体的列（符号），会对调试造成不便；<br />
eval-source-map	使用eval打包源文件模块，在同一个文件中生成干净的完整的source map。这个选项可以在不影响构建速度的前提下生成完整的sourcemap，但是对打包后输出的JS文件的执行具有性能和安全的隐患。不过在开发阶段这是一个非常好的选项，但是在生产阶段一定不要用这个选项；<br />
cheap-module-eval-source-map	这是在打包文件时最快的生成source map的方法，生成的Source Map 会和打包后的JavaScript文件同行显示，没有列映射，和eval-source-map选项具有相似的缺点；<br />
在学习阶段以及在小到中性的项目上，eval-source-map 是一个很好的选项，不过记得只在开发阶段使用它，继续上面的例子，进行如下配置</p><br />
<br />
<p>var path = require(‘path’);<br />
module.exports = {<br />
  entry: ‘./src/js/index.js’,<br />
  output: {<br />
    filename: ‘bundle.js’,<br />
    path: path.resolve(__dirname, ‘dist’)<br />
  },<br />
  devtool: ‘eval-source-map’<br />
};<br />
–</p><br />
<br />
<p>3.4 建立本地开发服务器<br />
Webpack提供一个可选的本地开发服务器，这个本地服务器基于node.js构建，可以实现代码的热加载功能，可以通过它方便的进行代码的开发。其构建方法如下：</p><br />
<br />
<p>1 . 安装 webpack-dev-server</p><br />
<br />
<p>npm install –save-dev webpack-dev-server<br />
2 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);<br />
module.exports = {<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    devServer: {<br />
        contentBase: “./”,<br />
        port: 9000,<br />
        inline: true<br />
    }<br />
};<br />
3 . 修改 package.json，添加条目如下</p><br />
<br />
<p>{<br />
  …<br />
  “scripts”: {<br />
    “dev”: “webpack-dev-server”,<br />
  },<br />
  …<br />
}<br />
4 . 输入 npm run dev 启动 webpack-dev-server</p><br />
<br />
<p>$ npm run dev</p><br />
<br />
<blockquote><br />
  <p>webpackproj@1.0.0 dev F:\Project\DEMO\webpackdemo                                    <br /><br />
webpack-dev-server</p><br />
</blockquote><br />
<br />
<p>Project is running at http://localhost:9000/                                           <br /><br />
webpack output is served from /                                                        <br /><br />
Content not from webpack is served from ./                                             <br /><br />
Hash: 1aca755d21fcb2c76314                                                             <br /><br />
Version: webpack 2.5.1                                                                 <br /><br />
Time: 918ms                                                                            <br /><br />
        Asset    Size  Chunks                    Chunk Names                           <br /><br />
    bundle.js  316 kB       0  [emitted]  [big]  main                                  <br /><br />
bundle.js.map  375 kB       0  [emitted]         main                                  <br /><br />
chunk    {0} bundle.js, bundle.js.map (main) 302 kB [entry] [rendered]                 <br /><br />
   [35] (webpack)-dev-server/client?http://localhost:9000 5.68 kB {0} [built]          <br /><br />
   [36] ./src/js/index.js 69 bytes {0} [built]                                         <br /><br />
   [37] ./~/ansi-html/index.js 4.26 kB {0} [built]                                     <br /><br />
   [38] ./~/ansi-regex/index.js 135 bytes {0} [built]                                  <br /><br />
   [40] ./~/events/events.js 8.33 kB {0} [built]                                       <br /><br />
   [41] ./~/html-entities/index.js 231 bytes {0} [built]                               <br /><br />
   [48] ./~/querystring-es3/index.js 127 bytes {0} [built]                             <br /><br />
   [76] ./~/strip-ansi/index.js 161 bytes {0} [built]                                  <br /><br />
   [78] ./~/url/url.js 23.3 kB {0} [built]                                             <br /><br />
   [79] ./~/url/util.js 314 bytes {0} [built]                                          <br /><br />
   [80] (webpack)-dev-server/client/overlay.js 3.73 kB {0} [built]                     <br /><br />
   [81] (webpack)-dev-server/client/socket.js 897 bytes {0} [built]                    <br /><br />
   [83] (webpack)/hot/emitter.js 77 bytes {0} [built]                                  <br /><br />
   [84] ./src/js/common.js 58 bytes {0} [built]                                        <br /><br />
   [85] multi (webpack)-dev-server/client?http://localhost:9000 ./src/js/index.js 40 byte<br />
s {0} [built]                                                                          <br /><br />
     + 71 hidden modules                                                               <br /><br />
webpack: Compiled successfully.                                                                                                                                <br /><br />
–</p><br />
<br />
<p>3.5 配置HTML代码热加载<br />
webpack-dev-server 只能监控入口文件（JS/LESS/CSS/IMG）的变化，因此 HTML文件的变化必须依赖插件来进行监控。</p><br />
<br />
<p>1 . 安装 html-webpack-plugin</p><br />
<br />
<p>npm install html-webpack-plugin –save-dev<br />
2 . 修改配置文件 webpack.config.js, 把 index.html 加入监控</p><br />
<br />
<p>var path = require(‘path’);<br />
var HtmlWebpackPlugin = require(‘html-webpack-plugin’)</p><br />
<br />
<p>module.exports = {<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    plugins: [<br />
        new HtmlWebpackPlugin({   // html代码热加载<br />
            template: ‘./index.html’<br />
        }),<br />
    ],<br />
    devServer: {<br />
        contentBase: “./”,<br />
        port: 9000,<br />
        inline: true<br />
    }<br />
};<br />
此时可以取消 html 文件内的 js 引用，因为 html-webpack-plugin 会自动加载编译完的 js 文件</p><br />
<br />
<p>–</p><br />
<br />
<p>3.6 配置自动打开浏览器<br />
通过配置 open-browser-webpack-plugin 可以在webpack编译完之后自动打开浏览器；</p><br />
<br />
<p>1 . 安装 open-browser-webpack-plugin</p><br />
<br />
<p>npm install open-browser-webpack-plugin –save-dev<br />
2 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);<br />
var HtmlWebpackPlugin = require(‘html-webpack-plugin’)<br />
var OpenBrowserPlugin = require(‘open-browser-webpack-plugin’);</p><br />
<br />
<p>module.exports = {<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    plugins: [<br />
        new HtmlWebpackPlugin({ // html代码热加载<br />
            template: ‘./index.html’<br />
        }),<br />
        new OpenBrowserPlugin({ //自动打开浏览器<br />
            url: ‘http://localhost:9000’<br />
        })<br />
    ],<br />
    devServer: {<br />
        contentBase: “./”,<br />
        port: 9000,<br />
        inline: true<br />
    }<br />
};<br />
–</p><br />
<br />
<p>3.7 配置 json 加载器<br />
使用 json 解析器可以将常量数据定义在 json文件中，然后在 js 文件中调用。</p><br />
<br />
<p>1 . 在项目根目录下面创建 config.json 文件，内容如下</p><br />
<br />
<p>{<br />
    “name”: “demo”,<br />
    “type”: “HTML5”<br />
}<br />
2 . 修改 index.js</p><br />
<br />
<p>var config = require(‘../../config.json’)<br />
var lib = require(‘./common.js’)<br />
lib.printmsg(config.name)<br />
3 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);</p><br />
<br />
<p>module.exports = {<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: { <br />
        rules: [{<br />
            test: /.json$/,<br />
            loader: “json-loader”<br />
        }]<br />
    }<br />
};<br />
项目结构如下：</p><br />
<br />
<h2 id="imagepng-2">image.png</h2><br />
<br />
<p>3.8 配置 LESS 编译<br />
1 . 安装 less style-loader css-loader less-loader</p><br />
<br />
<p>npm install less style-loader css-loader less-loader –save-dev<br />
2 . 在项目的css目录下面创建 index.less 文件，内容如下</p><br />
<br />
<p>@charset “utf-8”;<br />
@gray-base:  #000;<br />
@gray-light:  lighten(@gray-base, 46.7%);</p><br />
<br />
<p>.g-index {<br />
    height: 100vh;<br />
    background: @gray-light;<br />
}<br />
3 . 修改 index.js</p><br />
<br />
<p>require(‘../css/index.less’)</p><br />
<br />
<p>var lib = require(‘./common.js’)<br />
lib.printmsg(‘good’)<br />
4 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);</p><br />
<br />
<p>module.exports = {<br />
    devtool: ‘source-map’,<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: { <br />
        rules: [<br />
        {<br />
            test: /.less$/, // less解析器<br />
            loader: ‘style-loader!css-loader!less-loader’<br />
        },]<br />
    }<br />
};<br />
项目结构如下：</p><br />
<br />
<h2 id="imagepng-3">image.png</h2><br />
<br />
<p>3.9 配置 Babel 编译<br />
1 . 安装 babel-core babel-loader babel-preset-es2015</p><br />
<br />
<p>npm install babel-core babel-loader babel-preset-es2015 –save-dev<br />
2 . 修改 common.js 为 ES6 格式</p><br />
<br />
<p>exports.printmsg = (msg) =&gt; {<br />
    console.log(msg);<br />
}<br />
3 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);<br />
module.exports = {<br />
    devtool: ‘source-map’,<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: { <br />
        rules: [{<br />
            test: /.js$/,   //babel解析器<br />
            exclude: /node_modules/,<br />
            loader: ‘babel-loader’,<br />
            query: {<br />
                presets: [‘es2015’]<br />
            }<br />
        }]<br />
    }<br />
};<br />
–</p><br />
<br />
<p>3.10 配置 jQuery 解析器<br />
1 . 安装 jquery</p><br />
<br />
<p>npm install jquery –save-dev<br />
2 . 修改 index.js 调用 jquery 函数</p><br />
<br />
<p>require(‘jquery’)</p><br />
<br />
<p>$(init)<br />
function init() {<br />
    var lib = require(‘./common.js’)<br />
    lib.printmsg(‘good’)<br />
}<br />
3 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);<br />
var webpack = require(‘webpack’);</p><br />
<br />
<p>module.exports = {<br />
    devtool: ‘source-map’,<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: { <br /><br />
        rules: [{<br />
            test: /.js$/,  //babel代码解析<br />
            exclude: /node_modules/,<br />
            loader: ‘babel-loader’,<br />
            query: {<br />
                presets: [‘es2015’]<br />
            }<br />
        }]<br />
    },<br />
    plugins: [<br />
        new webpack.ProvidePlugin({   //jquery解析器<br />
            $: “jquery”,<br />
            jQuery: “jquery”,<br />
            “window.jQuery”: “jquery”<br />
        })<br />
    ]<br />
};<br />
–</p><br />
<br />
<p>3.11 配置 js 代码压缩<br />
1 . 修改配置文件 webpack.config.js, 在 plugin 中添加 webpack.optimize.UglifyJsPlugin 模块</p><br />
<br />
<p>var path = require(‘path’);<br />
var webpack = require(‘webpack’);<br />
var uglifyJsPlugin = webpack.optimize.UglifyJsPlugin;</p><br />
<br />
<p>module.exports = {<br />
    devtool: ‘source-map’,<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: { //在配置文件里添加JSON loader<br />
        rules: [{<br />
            test: /.js$/,   //babel代码解析<br />
            exclude: /node_modules/,<br />
            loader: ‘babel-loader’,<br />
            query: {<br />
                presets: [‘es2015’]<br />
            }<br />
        }]<br />
    },<br />
    plugins: [<br />
         new uglifyJsPlugin({ //js代码压缩<br />
            compress: {<br />
                warnings: false<br />
            }<br />
        })<br />
    ]<br />
};</p><br />
<br />
<p>–</p><br />
<br />
<p>3.12 配置 eslint 语法解析<br />
1 . 安装 esline 库</p><br />
<br />
<p>npm install eslint eslint-loader eslint-friendly-formatter eslint-plugin-html babel-eslint eslint-config-standard eslint-plugin-import eslint-plugin-node eslint-plugin-promise eslint-plugin-standard –save-dev<br />
2 . 在项目根目录下添加eslint 配置文件.eslintrc.js</p><br />
<br />
<p>// http://eslint.org/docs/user-guide/configuring<br />
module.exports = {<br />
  root: true,<br />
  parser: ‘babel-eslint’,<br />
  parserOptions: {<br />
    sourceType: ‘module’<br />
  },<br />
  env: {<br />
    browser: true,<br />
  },<br />
  // https://github.com/feross/standard/blob/master/RULES.md#javascript-standard-style<br />
  extends: ‘standard’,<br />
  // required to lint *.vue files<br />
  plugins: [<br />
    ‘html’<br />
  ],<br />
  // add your custom rules here<br />
  ‘rules’: {<br />
    // allow paren-less arrow functions<br />
    ‘arrow-parens’: 0,<br />
    “indent”: [2, 4],//缩进风格<br />
    ‘no-undef’: 0,<br />
    // allow async-await<br />
    ‘generator-star-spacing’: 0,<br />
    // allow debugger during development<br />
    ‘no-debugger’: process.env.NODE_ENV === ‘production’ ? 2 : 0<br />
  }<br />
}<br />
3 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);</p><br />
<br />
<p>module.exports = {<br />
    devtool: ‘source-map’,<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: { <br />
        rules: [{<br />
            test: /.js$/,   //babel代码解析<br />
            exclude: /node_modules/,<br />
            loader: ‘babel-loader’,<br />
            query: {<br />
                presets: [‘es2015’]<br />
            }<br />
        }, {<br />
            test: /.js$/, //eslint语法解析<br />
            exclude: /node_modules/,<br />
            loader: ‘eslint-loader’,<br />
            enforce: ‘pre’,<br />
            options: {<br />
                formatter: require(‘eslint-friendly-formatter’)<br />
            }<br />
        }]<br />
    }<br />
};<br />
–</p><br />
<br />
<p>3.13 配置图片压缩器<br />
1 . 安装 url-loader 库</p><br />
<br />
<p>npm install url-loader –save-dev<br />
2 . 修改 index.less 文件</p><br />
<br />
<p>@charset “utf-8”;<br />
@gray-base:  #000;<br />
@gray-light:  lighten(@gray-base, 46.7%);</p><br />
<br />
<p>.g-index {<br />
    height: 100vh;<br />
    background: @gray-light;<br />
    background: url(‘../img/small.png’) no-repeat;<br />
}<br />
3 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);<br />
var webpack = require(‘webpack’);</p><br />
<br />
<p>module.exports = {<br />
    devtool: ‘source-map’,<br />
    entry: ‘./src/js/index.js’,<br />
    output: {<br />
        filename: ‘bundle.js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: {<br />
        rules: [ {<br />
            test: /.less$/, // less解析器<br />
            loader: ‘style-loader!css-loader!less-loader’<br />
        }, {<br />
            test: /.(png|jpg)$/, // img压缩器<br />
            loader: ‘url-loader?limit=8192’<br />
        }]<br />
    }<br />
项目结构如下：<br />
image.png<br />
–</p><br />
<br />
<p>3.14 配置公共库抽取<br />
1 . 安装 chunk-manifest-webpack-plugin webpack-chunk-hash 库</p><br />
<br />
<p>npm install chunk-manifest-webpack-plugin webpack-chunk-hash  –save-dev<br />
3 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>var path = require(‘path’);<br />
var webpack = require(‘webpack’);<br />
var HtmlWebpackPlugin = require(‘html-webpack-plugin’)<br />
var WebpackChunkHash = require(“webpack-chunk-hash”);<br />
var ChunkManifestPlugin = require(“chunk-manifest-webpack-plugin”);</p><br />
<br />
<p>module.exports = {<br />
    devtool: ‘source-map’,<br />
    entry: { <br />
        main: ‘./src/js/index.js’,<br />
        vendor: [‘jquery’]<br />
    },<br />
    output: {<br />
        filename: ‘[name].[chunkhash].js’,<br />
        path: path.resolve(__dirname, ‘dist’)<br />
    },<br />
    module: {<br />
        rules: [ {<br />
            test: /.less$/, // less解析器<br />
            loader: ‘style-loader!css-loader!less-loader’<br />
        }, {<br />
            test: /.(png|jpg)$/, // img压缩器<br />
            loader: ‘url-loader?limit=8192’<br />
        }]<br />
    },<br />
    plugins: [<br />
        new HtmlWebpackPlugin({ // html代码热加载<br />
            template: ‘./index.html’<br />
        }),<br />
        new webpack.ProvidePlugin({ //jquery解析器<br />
            $: “jquery”,<br />
            jQuery: “jquery”,<br />
            “window.jQuery”: “jquery”<br />
        }),<br />
        new webpack.optimize.CommonsChunkPlugin({  //公共库抽取<br />
            name: [“vendor”, “manifest”], // vendor libs + extracted manifest<br />
            minChunks: Infinity,<br />
        }),<br />
        new webpack.HashedModuleIdsPlugin(),<br />
        new WebpackChunkHash(),<br />
        new ChunkManifestPlugin({<br />
          filename: “chunk-manifest.json”,<br />
          manifestVariable: “webpackManifest”<br />
        })<br />
    ]<br />
};<br />
–</p><br />
<br />
<p>3.15 配置模块分析器<br />
在项目复杂的情况下，为了分析多个模块的相互依赖以及打包的关系，通常引入模块打包分析工具，可以清晰的给出每个模块的依赖关系。</p><br />
<br />
<p>1 . 安装 webpack-bundle-analyzer 库</p><br />
<br />
<p>npm install webpack-bundle-analyzer  –save-dev<br />
2 . 修改配置文件 webpack.config.js</p><br />
<br />
<p>Gulp构建工具<br />
gulp是工具链，构建工具，可以配合各种插件做JS压缩，CSS压缩，less编译替代手动实现自动化工作.<br />
所以它的主要作用是<br />
1.构建工具<br />
2.自动化<br />
3.提高效率</p><br />
<br />
<p>Webpack打包工具<br />
web是文件打包工具，可以把项目的各种js文件，css文件等打包合成一个或多个文件，主要用于模块化方案，预编译模块的方案<br />
所以它的主要作用是<br />
1.打包工具<br />
2.模块化识别<br />
3.编译模块代码方案</p><br />
<br />
<p>Grunt是一个任务执行者，有大量现成的插件封装了常见的任务，也能管理任务之间的依赖关系，自动化执行依赖的任务，每个任务的具体执行代码和依赖关系写在配置文件 Gruntfile.js 里，例如：</p><br />
<br />
<p>在项目根目录下执行命令 grunt dev 就会启动 JavaScript 文件压缩和自动刷新功能。</p><br />
<br />
<p>Grunt的优点是：</p><br />
<br />
<p>灵活，它只负责执行你定义的任务；<br />
大量的可复用插件封装好了常见的构建任务。<br />
Grunt的缺点是集成度不高，要写很多配置后才可以用，无法做到开箱即用。</p><br />
<br />
<p>Gulp 是一个基于流的自动化构建工具。 除了可以管理和执行任务，还支持监听文件、读写文件。Gulp 被设计得非常简单，只通过下面5种个方法就可以胜任几乎所有构建场景：</p><br />
<br />
<p>通过 gulp.task 注册一个任务；<br />
通过 gulp.run 执行任务；<br />
通过 gulp.watch 监听文件变化；<br />
通过 gulp.src 读取文件；<br />
通过 gulp.dest 写文件。<br />
Gulp 的最大特点是引入了流的概念，同时提供了一系列常用的插件去处理流，流可以在插件之间传递，</p><br />
<br />
<p>Webpack与Grunt、Gulp运行机制</p><br />
<h1 id="grunt-gulp-思路">grunt gulp 思路</h1><br />
<p>【遍历源文件】-&gt;【匹配规则】-&gt;【打包】<br />
做不到按需加载，对打包的资源，是否用到，打包过程不关心。</p><br />
<br />
<h1 id="webpack">webpack</h1><br />
<p>【入口】-&gt;【模块依赖加载】-&gt;【依赖分析】-&gt;【打包】<br />
在加载、分析、打包的过程中，可以针对性的做一些解决方案。比如：code split(拆分公共代码)</p><br />
<br />
<p>Grunt与Gulp性能比较<br />
Grunt: 每个任务处理完成后存放在本地磁盘.tmp目录中，有本地磁盘的I/O操作，会导致打包速度比较慢。<br />
Gulp: gulp与grunt都是按任务执行，gulp有一个文件流的概念。每一步构建的结果并不会存在本地磁盘，而是保存在内存中，下一个步骤是可以使用上一个步骤的内存，大大增加了打包的速度。</p><br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category web
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>