<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">bhyve</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2021-10-30T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Oct 30, 2021</time></p>
					</div>
					 <p>FreeBSD 下的虚拟技术 bhyve (The BSD Hypervisor) 包含在了 FreeBSD 10.0 发行版中。而这个 xhyve 是基于 bhyve 的 Mac OS X 移植版本</p><br />
<br />
<p>https://github.com/machyve/xhyve</p><br />
<br />
<p>使用 git 下载源码后编译，运行 xhyverun.sh 后会启动一个简单的 Tiny Core Linux 虚拟机：</p><br />
<br />
<p>$ git clone https://github.com/mist64/xhyve.git <br />
$ cd xhyve <br />
$ make <br />
$ ./xhyverun.sh<br />
<!-- more --><br />
我们知道docker 是基于linux 系统的namespace + cgroup实现的进程隔离技术，在mac下并不能很好的支持，因此需要运行在虚拟机上，虚拟机和docker的区别在于，虚拟机多了一层hypervisor。FreeBSD 下的虚拟技术 bhyve (The BSD Hypervisor) 包含在了 FreeBSD 10.0 发行版中。而这个 xhyve 是基于 bhyve 的 Mac OS X 移植版本</p><br />
<br />
<p>https://github.com/machyve/xhyve</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    Docker for Mac 也是在本地跑了一个虚拟机来运行 Docker，不过 Hypervisor 采用的是 xhyve，而 xhyve 又基于 Mac 自带的虚拟化方案 Hypervisor.framework，虚拟机里运行的发行版是 Docker 自己打包的 LinuxKit。HyperKit是一个具有hyperisor能力的工具集，包含了基于 xhyve - macOS平台的KVM/bhyve (轻量级虚拟机和容器部署) 的完整hypervisor。HyperKit设计成上层组件诸如 VPNKit 和 DataKit 的接口。<br />
</code></pre></div></div><br />
<br />
<p>注解</p><br />
<br />
<p>VPNKit：嵌入式虚拟网络库，VPNKit 是一个工具和服务集合用于帮助HyperKit虚拟机和主机VPN配置协作。https://github.com/moby/vpnkit</p><br />
<br />
<p>HyperKit：OSX上运行的轻量级虚拟化工具包https://github.com/moby/hyperkit</p><br />
<br />
<p>DataKit：现代化分布式组件框架https://github.com/moby/datakit</p><br />
<br />
<p>linuxkit是一个docker自己打包的linux镜像，非常小有点类似apline</p><br />
<br />
<p>https://github.com/linuxkit/linuxkit</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    总结起来：docker for mac 是运行在mac上的虚拟机xhyve里，linux镜像linuxkit的实例里。<br />
<br />
    那么我们如何进入linuxkit呢？整体上有两大类方法：1，通过宿主机的tty或者socket进入。2，在linuxkit上运行容器，通过enterns进入。<br />
<br />
 <br />
<br />
    在早期的docker for mac 版本中，我们看到虚拟机的文件路径是：<br />
</code></pre></div></div><br />
<br />
<p>/Users/Kamus/Library/Containers/com.docker.docker/Data/vms/0/Docker.raw<br />
进入到这个文件的所在目录。可以看到tty这个软链接文件。</p><br />
<br />
<p>$ cd /Users/Kamus/Library/Containers/com.docker.docker/Data/vms/0<br />
$ ls -l<br />
total 31067864<br />
srwxr-xr-x  1 Kamus  staff            0  7  4 12:22 00000002.000005f4<br />
srwxr-xr-x  1 Kamus  staff            0  7  4 12:22 00000002.00001000<br />
srwxr-xr-x  1 Kamus  staff            0  7  4 12:22 00000002.00001001<br />
srwxr-xr-x  1 Kamus  staff            0  7  4 12:22 00000002.0000f3a5<br />
srwxr-xr-x  1 Kamus  staff            0  7  4 12:22 00000003.000005f5<br />
srwxr-xr-x  1 Kamus  staff            0  7  4 12:22 00000003.00000948<br />
-rw-r–r–@ 1 Kamus  staff  63999836160  7  7 12:51 Docker.raw<br />
-rw-r–r–  1 Kamus  staff       215040  7  4 12:22 config.iso<br />
srwxr-xr-x  1 Kamus  staff            0  7  4 12:22 connect<br />
lrwxr-xr-x  1 Kamus  staff           17  7  4 12:22 guest.000005f5 -&gt; 00000003.000005f5<br />
lrwxr-xr-x  1 Kamus  staff           17  7  4 12:22 guest.00000948 -&gt; 00000003.00000948<br />
-rw-r–r–  1 Kamus  staff         2303  7  4 12:22 hyperkit.json<br />
-rw-r–r–  1 Kamus  staff            4  7  4 12:22 hyperkit.pid<br />
drwxr-xr-x  2 Kamus  staff           64 11 21  2018 log<br />
-rw-r–r–  1 Kamus  staff           36 11 21  2018 nic1.uuid<br />
lrwxr-xr-x  1 Kamus  staff           12  7  4 12:22 tty -&gt; /dev/ttys000<br />
screen该文件即可连接到虚拟机的输出窗口中。</p><br />
<br />
<p>$ screen tty<br />
在新的版本里（20.10.5）版本以后，使用socket代替了：</p><br />
<br />
<p>I think the new version of docker (my version is 20.10.5) uses socket instead of TTY to communicate with the virtual machine so you can use the nc command instead of the screen command.</p><br />
<br />
<p>nc -U ~/Library/Containers/com.docker.docker/Data/debug-shell.sock<br />
?????uname -a<br />
Linux docker-desktop 5.10.47-linuxkit #1 SMP PREEMPT Sat Jul 3 21:50:16 UTC 2021 aarch64 Linux<br />
可以看到，运行的镜像是linuxkit</p><br />
<br />
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    还可以使用更优雅的方式，临时建一个最小化的debian容器，指定容器运行在pid=host命名空间下，然后该容器运行nsenter命令。<br />
</code></pre></div></div><br />
<br />
<p>$ docker run -it –rm –privileged –pid=host debian nsenter -t 1 -m -u -n -i sh<br />
Unable to find image ‘debian:latest’ locally<br />
latest: Pulling from library/debian<br />
6f2f362378c5: Pull complete<br />
Digest: sha256:118cf8f3557e1ea766c02f36f05f6ac3e63628427ea8965fb861be904ec35a6f<br />
Status: Downloaded newer image for debian:latest<br />
 # uname -a<br />
Linux linuxkit-025000000001 4.9.125-linuxkit #1 SMP Fri Sep 7 08:20:28 UTC 2018 x86_64 Linux<br />
详细解释一下这条命令为什么就会登录进macOS中作为宿主机的VM里面。<br />
–rm表示在退出的时候就自动删除该容器；<br />
–privileged表示允许该容器访问宿主机（也就是我们想要登录的VM）中的各种设备；<br />
–pid=host表示允许容器共享宿主机的进程命名空间（namespace），或者通俗点儿解释就是允许容器看到宿主机中的各种进程；<br />
这些是docker在启动容器时候的参数设置，但是仅仅依靠这些参数还无法让我们直接登录到宿主机VM中，接下来解释最主要的nsenter命令。</p><br />
<br />
<p>nsenter是一个小工具允许我们进入一个指定的namespace然后运行指定的命令，ns=namespace，enter=进入。<br />
namespace是容器技术的根基，基本上可以认为namespace就是一组隔离的资源，不同的进程可以看到不同的系统资源这里和这里有比较详细的关于namespace的介绍。<br />
可以从操作系统的/proc/[pid]/ns目录下一窥全貌。比如我们进入pid=1的ns目录下。可以看到有一共8种namespace。</p><br />
<br />
<h1 id="pwd">pwd</h1><br />
<p>/proc/1/ns</p><br />
<h1 id="ls--l">ls -l</h1><br />
<p>total 0<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 cgroup -&gt; cgroup:[4026531835]<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 ipc -&gt; ipc:[4026531839]<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 mnt -&gt; mnt:[4026531840]<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 net -&gt; net:[4026531889]<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 pid -&gt; pid:[4026531836]<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 pid_for_children -&gt; pid:[4026531836]<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 user -&gt; user:[4026531837]<br />
lrwxrwxrwx 1 root root 0 Jul  8 12:51 uts -&gt; uts:[4026531838]<br />
最后解释一下nsenter命令的选项。回顾一下命令是：nsenter -t 1 -m -u -n -i sh<br />
-t 1: 表示要进入哪个pid，1表示整个操作系统的主进程id<br />
-m: 进入mount namespace，挂载点<br />
-u: 进入UTS namespace，也就是上面我们演示的那个namespace<br />
-n: 进入network namespace，网络<br />
-i: 进入IPC namespace，进程间通信<br />
sh: 表示运行/bin/sh</p><br />
<br />
<p>https://developer.aliyun.com/article/116675</p><br />
<br />
<p>https://cloud-atlas.readthedocs.io/zh_CN/latest/kvm/macos_xhyve/xhyve.html</p><br />
<br />
<p>https://www.kaifa99.com/GitHub/article_125375</p><br />
<br />
<p>https://medium.com/@hintcnuie/the-difference-between-xhyve-and-hyperkit-67a9f378ab97</p><br />
<br />
<p>https://github.com/moby/vpnkit</p><br />
<br />
<p>https://github.com/moby/datakit</p><br />
<br />
<p>https://www.nebulaworks.com/insights/posts/getting-started-linuxkit-mac-os-x-xhyve/</p><br />
<br />
<p>https://docs.docker.com/desktop/mac/</p><br />
<br />
<p>Docker for Mac 也是在本地跑了一个虚拟机来运行 Docker，不过 Hypervisor 采用的是 xhyve，而 xhyve 又基于 Mac 自带的虚拟化方案 Hypervisor.framework，虚拟机里运行的发行版是 Docker 自己打包的 LinuxKit</p><br />
<br />
<p>https://www.haoyizebo.com/posts/fd0b9bd8/</p><br />
<br />
<p>% brew install opam libev</p><br />
<br />
<p>opam init No configuration file found, using built-in defaults. Checking for available remotes: rsync and local, git.</p><br />
<br />
<p>you won’t be able to use mercurial repositories unless you install the hg command on your system.<br />
you won’t be able to use darcs repositories unless you install the darcs command on your system.<br />
&lt;&gt;&lt;&gt; Fetching repository information &gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt;&lt;&gt; 🐫 Processing 1/1: [default: http]</p><br />
<br />
<p>https://github.com/linuxkit/linuxkit</p><br />
<br />
<p>https://github.com/linuxkit/kubernetes</p><br />
<br />
<p>https://blog.51cto.com/lullaby/2421309</p><br />
<br />
<p>https://tonybai.com/2021/03/23/io-fs-interface-is-an-excellent-design/</p><br />
<br />
<p>https://github.com/docker/for-mac</p><br />
<br />
<p>https://www.zhihu.com/question/40051989?sort=created</p><br />
<br />
<p>https://cleanmymac.cn/download https://www.pagetable.com/?p=831</p><br />
<br />
<p>https://github.com/Wang-Kai/cherish-today/issues/83</p><br />
<br />
<p>https://www.zhihu.com/question/454947910/answer/1841432604</p><br />
<br />
<p>https://github.com/moby/hyperkit. √</p><br />
<br />
<p>https://forums.docker.com/t/how-to-make-changes-to-xhyve-host/11820/5</p><br />
<br />
<p>https://github.com/machyve/xhyve</p><br />
<br />
<p>https://forums.docker.com/t/is-it-possible-to-ssh-to-the-xhyve-machine/17426</p><br />
<br />
<p>https://zhuanlan.zhihu.com/p/43237959</p><br />
<br />
<p>https://docs.docker.com/engine/reference/commandline/dockerd/</p><br />
<br />
<p>https://blog.csdn.net/zhangmenghao1983/article/details/82184957</p><br />
<br />
<p>https://blog.csdn.net/baidu_32656897/article/details/86504317</p><br />
<br />
<p>https://www.cnblogs.com/cag2050/p/10100899.html</p><br />
<br />
<p>https://www.dbform.com/2019/07/08/how-to-login-the-vm-of-docker-desktop-for-mac/</p><br />
<br />
<p>https://medium.com/carvago-development/my-docker-on-macos-part-1-setup-ubuntu-virtual-machine-both-intel-and-apple-silicon-cpu-5d886af0ebba</p><br />
<br />
<p>https://gist.github.com/BretFisher/5e1a0c7bcca4c735e716abf62afad389</p><br />
<br />
<p>https://www.modb.pro/db/5458</p><br />
<br />
<p>https://earthly.dev/blog/using-apple-silicon-m1-as-a-cloud-engineer-two-months-in/</p><br />
<br />
<p>2</p><br />
<br />
<p>I think the new version of docker (my version is 20.10.5) uses socket instead of TTY to communicate with the virtual machine so you can use the nc command instead of the screen command.</p><br />
<br />
<p>nc -U ~/Library/Containers/com.docker.docker/Data/debug-shell.sock</p><br />
<br />
<p>https://stackoverflow.com/questions/38532483/where-is-var-lib-docker-on-mac-os-x</p><br />
<br />
<p>?????uname -a Linux docker-desktop 5.10.47-linuxkit #1 SMP PREEMPT Sat Jul 3 21:50:16 UTC 2021 aarch64 Linux</p><br />
<br />
<p>https://www.krenger.ch/blog/docker-desktop-for-mac-ssh-into-the-docker-vm/</p><br />
<br />
<p>https://stackoverflow.com/questions/39739560/how-to-access-the-vm-created-by-dockers-hyperkit</p><br />
<br />
<p>https://www.jianshu.com/p/ab6f8be85470</p><br />
<br />
<p>https://collabnix.com/how-docker-for-mac-works-under-the-hood/</p><br />
<br />
<p>https://collabnix.com/how-docker-for-mac-works-under-the-hood/</p><br />
<br />
<p>https://gist.github.com/retraut/1dee3d6331c4b8eeb4ef54bfdce09d62</p><br />
<br />
<p>https://wongyouth.github.io/2019/04/28/xhyve-%E8%8B%B9%E6%9E%9C%E7%94%B5%E8%84%91%E4%B8%8B%E8%BD%BB%E9%87%8F%E7%BA%A7%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%B9%E6%A1%88/</p><br />
<br />
<p>https://www.wavether.com/2016/09/docker-machine-xhyve-mac-os</p><br />
<br />
<p>/ # ^[[26;5Rctr version ctr version Client: Version: v1.3.4 Revision: 814b7956fafc7a0980ea07e950f983d0837e5578</p><br />
<br />
<p>Server: Version: v1.3.4 Revision: 814b7956fafc7a0980ea07e950f983d0837e5578 UUID: d0bdf2c7-b3d8-45f2-be9a-ffdd6c782cc5 / # ^[[26;5R^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@^@</p><br />
<br />
<p>hyperkit % make</p><br />
<br />
<p>% ./hyperkitrun.sh ~/source/hyperkit/test ~/source/hyperkit Downloading tinycore linux</p><br />
<br />
<p>~/source/hyperkit hv_vm_create HV_ERROR (unspecified error) ./hyperkitrun.sh: line 39: 84413 Abort trap: 6 build/hyperkit $ACPI $MEM $SMP $PCI_DEV $LPC_DEV $NET $IMG_CD $IMG_HDD $UUID -f kexec,$KERNEL,$INITRD,”$CMDLINE”</p><br />
<br />
<p>https://github.com/kubernetes/minikube/issues/10120</p><br />
<br />
<p>https://github.com/moby/hyperkit/issues/303#issuecomment-875122919</p><br />
<br />
<p>HyperKit是一个具有hyperisor能力的工具集，包含了基于 xhyve - macOS平台的KVM/bhyve (轻量级虚拟机和容器部署) 的完整hypervisor。HyperKit设计成上层组件诸如 VPNKit 和 DataKit 的接口。</p><br />
<br />
<p>注解</p><br />
<br />
<p>VPNKit 是一个工具和服务集合用于帮助HyperKit虚拟机和主机VPN配置协作。</p><br />
<br />
<p>DataKit 是一个使用类似Git的工作流来编排应用程序的工具，借鉴了UNIX管道(pipline)概念，使用了替代底层文本的树状结构数据的流。DataKit可以在版本控制数据上定义复杂的编译工作流。当前DataKit作为HyperKit的一个写作流，以及用于 DataKitCI 持续集成系统。</p><br />
<br />
<p>要激活块设备后端支持qcow，准备一个 OCaml OPAM开发环境。则需要通过 brew 安装 opam 和 libev 然后使用 opam 来安装相应的库:</p><br />
<br />
<p>brew install opam libev opam init eval opam config env opam install uri qcow.0.10.4 conduit.1.0.0 lwt.3.1.0 qcow-tool mirage-block-unix.2.9.0 conf-libev logs fmt mirage-unix prometheus-app</p><br />
<br />
<p>https://cloud-atlas.readthedocs.io/zh_CN/latest/docker/moby/hyperkit/run_hyperkit.html</p><br />
<br />
<p>HyperKit：OSX上运行的轻量级虚拟化工具包 DataKit：现代化分布式组件框架 VPNKit：嵌入式虚拟网络库</p><br />
<br />
<p>http://dockone.io/article/1329</p><br />
<br />
<p>https://github.com/moby/hyperkit</p><br />
<br />
<p>https://minikube.sigs.k8s.io/docs/drivers/hyperkit/</p><br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category docker, k8s
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>