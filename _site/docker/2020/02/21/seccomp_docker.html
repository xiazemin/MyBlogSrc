<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Sci blog jekyll theme">
    <meta name="author" content="AIR RAYA Group">
    <link href='/MyBlog/img/favicon.ico' type='image/icon' rel='shortcut icon'/>

    <title>泽民博客 | Jekyll theme</title>

    <link rel="stylesheet" href="/MyBlog/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" href="/MyBlog/css/font-awesome.min.css">
    <link href="/MyBlog/css/simple-sidebar.css" rel="stylesheet">
	<link href="/MyBlog/css/classic-10_7.css" rel="stylesheet" type="text/css">
    <!-- Custom CSS -->
    <link href="/MyBlog/css/style.css" rel="stylesheet">
    <link href="/MyBlog/css/pygments.css" rel="stylesheet">
    <!-- Fonts -->
 <link href="/MyBlog/css/front.css" rel="stylesheet" type="text/css">
 <link href="/MyBlog/css/Josefin_Slab.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Architects_Daughter.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Schoolbell.css" rel="stylesheet" type="text/css">
<link href="/MyBlog/css/Codystar.css" rel="stylesheet" type="text/css">

 <script type="text/javascript" src="/MyBlog/js/jquery-1.12.0.min.js"></script>	

<link href="/MyBlog/css/calendar/common.css" type="text/css"  rel="stylesheet">
<script type="text/javascript" src="/MyBlog/js/calendar/calendar.js"></script>
	<!-- share this -->
	<script type="text/javascript">var switchTo5x=true;</script>
	<script type="text/javascript" src="/MyBlog/js/buttons.js"></script>
	<script type="text/javascript">stLight.options({publisher: "b28464c3-d287-4257-ad18-058346dd35f7", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="/MyBlog/js/html5shiv.js"></script>
        <script src="/MyBlog/js/respond.min.js"></script>
    <![endif]-->
   
   <!--百度统计-->
    <script>
    var _hmt = _hmt || [];
    (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?e965cab8c73512b8b23939e7051d93bd";
    var s = document.getElementsByTagName("script")[0]; 
    s.parentNode.insertBefore(hm, s);
    })();
    </script>
    <script async src="/MyBlog/katex/katex.js"></script>
    <link rel="stylesheet" href="/MyBlog/katex/katex.css">

    <!--轮播图片-->
    <!--script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="https://xiazemin.github.io/MyBlog/js/jquery.stripesrotator.js"></script>
    <script type="text/javascript">
                    $(document).ready(function() {
                    alert($('#rotator_xzm'));
                     alert($('#rotator_xzm').fn);
                    $('#rotator_xzm').stripesRotator({ images: [ "https://xiazemin.github.io/MyBlog/img/BPlusTree.png", "https://xiazemin.github.io/MyBlog/img/linuxMMap.jpeg"] });
                    });
    </script-->

    <!--水印-->
    <script type="text/javascript" src="/MyBlog/js/waterMark.js"></script>
    <script type="text/javascript">
    $(document).ready(function(){
    watermark({watermark_txt0:'泽民博客',watermark_txt1:'zemin',watermark_txt2:(new Date()).Format("yyyy-MM-dd hh:mm:ss.S")});
    })
    </script>
     <!--水印-->
     <!--adscene-->
    <script data-ad-client="ca-pub-6672721494777557" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>

</head>

 <body>
<div id="wrapper">
 <!-- Navigation -->
    <!-- Sidebar -->
        <div id="sidebar-wrapper">
            <ul class="sidebar-nav">
                <li class="sidebar-brand">
                    <a href="/MyBlog">
                        Home
                    </a>
                </li>
                <li>
                    <a href="#">About</a>
                </li>
                <li>
                    <a href="#">Services</a>
                </li>
                <li>
                    <a href="#">Portfolio</a>
                </li>
                <li>
                    <a href="#">Events</a>
                </li>
                <li>
                    <a href="#">Blog</a>
                </li>
                <li>
                    <a href="#">FAQ</a>
                </li>
                <li>
                    <a href="#">Contact</a>
                </li>
            </ul>
        </div>


    <header class="intro-header">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="heading text-center">
                        <a href="https://xiazemin.github.io/MyBlog/" style="color: #fff; font-size: 4em; font-family: 'Schoolbell', cursive;">泽民博客</a>
                        <a href="#menu-toggle" class="btn btn-default sciblog" id="menu-toggle" style="font-weight: bold;">&#9776; Menu</a>
                    </div>
                </div>
            </div>
        </div>
    </header>

     <script async src="/MyBlog/js/busuanzi.pure.mini.js"></script>

    <script type="text/javascript" src="/MyBlog/js/jquery.js"></script>
    <script type="text/javascript" src="/MyBlog/js/jquery.stripesrotator.js"></script>


 <div class="container">
	<div class="row">
        <div class="box">
                <div class="col-lg-12">
                    <div class="intro-text text-center">
					<h1 class="post-title" itemprop="name headline">Docker容器内部使用gdb进行debug</h1>
					<p class="post-meta"> <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">by 夏泽民</span></span> <time datetime="2020-02-21T00:00:00+08:00" itemprop="datePublished"><i class="fa fa-calendar"></i> Feb 21, 2020</time></p>
					</div>
					 <p>安全计算模式（secure computing mode，seccomp）是 Linux 内核功能，可以使用它来限制容器内可用的操作。</p><br />
<br />
<p>Docker 的默认 seccomp 配置文件是一个白名单，它指定了允许的调用。</p><br />
<br />
<p>下表列出了由于不在白名单而被有效阻止的重要（但不是全部）系统调用。该表包含每个系统调用被阻止的原因。<br />
<!-- more --><br />
Syscall	Description<br />
acct	Accounting syscall which could let containers disable their own resource limits or process accounting. Also gated by CAP_SYS_PACCT.<br />
add_key	Prevent containers from using the kernel keyring, which is not namespaced.<br />
adjtimex	Similar to clock_settime and settimeofday, time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
bpf	Deny loading potentially persistent bpf programs into kernel, already gated by CAP_SYS_ADMIN.<br />
clock_adjtime	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
clock_settime	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
clone	Deny cloning new namespaces. Also gated by CAP_SYS_ADMIN for CLONE_* flags, except CLONE_USERNS.<br />
create_module	Deny manipulation and functions on kernel modules. Obsolete. Also gated by CAP_SYS_MODULE.<br />
delete_module	Deny manipulation and functions on kernel modules. Also gated by CAP_SYS_MODULE.<br />
finit_module	Deny manipulation and functions on kernel modules. Also gated by CAP_SYS_MODULE.<br />
get_kernel_syms	Deny retrieval of exported kernel and module symbols. Obsolete.<br />
get_mempolicy	Syscall that modifies kernel memory and NUMA settings. Already gated by CAP_SYS_NICE.<br />
init_module	Deny manipulation and functions on kernel modules. Also gated by CAP_SYS_MODULE.<br />
ioperm	Prevent containers from modifying kernel I/O privilege levels. Already gated by CAP_SYS_RAWIO.<br />
iopl	Prevent containers from modifying kernel I/O privilege levels. Already gated by CAP_SYS_RAWIO.<br />
kcmp	Restrict process inspection capabilities, already blocked by dropping CAP_PTRACE.<br />
kexec_file_load	Sister syscall of kexec_load that does the same thing, slightly different arguments. Also gated by CAP_SYS_BOOT.<br />
kexec_load	Deny loading a new kernel for later execution. Also gated by CAP_SYS_BOOT.<br />
keyctl	Prevent containers from using the kernel keyring, which is not namespaced.<br />
lookup_dcookie	Tracing/profiling syscall, which could leak a lot of information on the host. Also gated by CAP_SYS_ADMIN.<br />
mbind	Syscall that modifies kernel memory and NUMA settings. Already gated by CAP_SYS_NICE.<br />
mount	Deny mounting, already gated by CAP_SYS_ADMIN.<br />
move_pages	Syscall that modifies kernel memory and NUMA settings.<br />
name_to_handle_at	Sister syscall to open_by_handle_at. Already gated by CAP_SYS_NICE.<br />
nfsservctl	Deny interaction with the kernel nfs daemon. Obsolete since Linux 3.1.<br />
open_by_handle_at	Cause of an old container breakout. Also gated by CAP_DAC_READ_SEARCH.<br />
perf_event_open	Tracing/profiling syscall, which could leak a lot of information on the host.<br />
personality	Prevent container from enabling BSD emulation. Not inherently dangerous, but poorly tested, potential for a lot of kernel vulns.<br />
pivot_root	Deny pivot_root, should be privileged operation.<br />
process_vm_readv	Restrict process inspection capabilities, already blocked by dropping CAP_PTRACE.<br />
process_vm_writev	Restrict process inspection capabilities, already blocked by dropping CAP_PTRACE.<br />
ptrace	Tracing/profiling syscall, which could leak a lot of information on the host. Already blocked by dropping CAP_PTRACE.<br />
query_module	Deny manipulation and functions on kernel modules. Obsolete.<br />
quotactl	Quota syscall which could let containers disable their own resource limits or process accounting. Also gated by CAP_SYS_ADMIN.<br />
reboot	Don’t let containers reboot the host. Also gated by CAP_SYS_BOOT.<br />
request_key	Prevent containers from using the kernel keyring, which is not namespaced.<br />
set_mempolicy	Syscall that modifies kernel memory and NUMA settings. Already gated by CAP_SYS_NICE.<br />
setns	Deny associating a thread with a namespace. Also gated by CAP_SYS_ADMIN.<br />
settimeofday	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
socket, socketcall	Used to send or receive packets and for other socket operations. All socket and socketcall calls are blocked except communication domains AF_UNIX, AF_INET, AF_INET6, AF_NETLINK, and AF_PACKET.<br />
stime	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
swapon	Deny start/stop swapping to file/device. Also gated by CAP_SYS_ADMIN.<br />
swapoff	Deny start/stop swapping to file/device. Also gated by CAP_SYS_ADMIN.<br />
sysfs	Obsolete syscall.<br />
_sysctl	Obsolete, replaced by /proc/sys.<br />
umount	Should be a privileged operation. Also gated by CAP_SYS_ADMIN.<br />
umount2	Should be a privileged operation. Also gated by CAP_SYS_ADMIN.<br />
unshare	Deny cloning new namespaces for processes. Also gated by CAP_SYS_ADMIN, with the exception of unshare –user.<br />
uselib	Older syscall related to shared libraries, unused for a long time.<br />
userfaultfd	Userspace page fault handling, largely needed for process migration.<br />
ustat	Obsolete syscall.<br />
vm86	In kernel x86 real mode virtual machine. Also gated by CAP_SYS_ADMIN.<br />
vm86old	In kernel x86 real mode virtual machine. Also gated by CAP_SYS_ADMIN.<br />
其中gdb在进行进程debug时，会报错：</p><br />
<br />
<p>(gdb) attach 30721<br />
Attaching to process 30721</p><br />
<br />
<p>ptrace: Operation not permitted.</p><br />
<br />
<p>原因就是因为ptrace被Docker默认禁止的问题。考虑到应用分析的需要，可以有以下几种方法解决：</p><br />
<br />
<p>1、关闭seccomp</p><br />
<br />
<p>docker run –security-opt seccomp=unconfined</p><br />
<br />
<p>2、采用超级权限模式<br />
docker run –privileged</p><br />
<br />
<p>3、仅开放ptrace限制</p><br />
<br />
<p>docker run –cap-add sys_ptrace</p><br />
<br />
<p>当然从安全角度考虑，如只是想使用gdb进行debug的话，建议使用第三种。</p><br />
<br />
<p>小提示：</p><br />
<br />
<p>如果使用marathon进行docker的管理，应用JSON的修改在这里：</p><br />
<br />
<p>“parameters”: [<br />
        {<br />
          “key”: “cap-add”,<br />
          “value”: “SYS_PTRACE”<br />
        }<br />
      ],</p><br />
<br />
<p>https://www.elastic.co/guide/en/beats/filebeat/6.4/linux-seccomp.html</p><br />
<br />
<p>https://github.com/moby/moby/blob/master/profiles/seccomp/default.json</p><br />
<br />
<p>Secure computing mode (seccomp) is a Linux kernel feature. You can use it to restrict the actions available within the container. The seccomp() system call operates on the seccomp state of the calling process. You can use this feature to restrict your application’s access.</p><br />
<br />
<p>This feature is available only if Docker has been built with seccomp and the kernel is configured with CONFIG_SECCOMP enabled. To check if your kernel supports seccomp:</p><br />
<br />
<p>$ grep CONFIG_SECCOMP= /boot/config-$(uname -r)<br />
CONFIG_SECCOMP=y<br />
Note: seccomp profiles require seccomp 2.2.1 which is not available on Ubuntu 14.04, Debian Wheezy, or Debian Jessie. To use seccomp on these distributions, you must download the latest static Linux binaries (rather than packages).</p><br />
<br />
<p>Pass a profile for a container<br />
The default seccomp profile provides a sane default for running containers with seccomp and disables around 44 system calls out of 300+. It is moderately protective while providing wide application compatibility. The default Docker profile can be found here.</p><br />
<br />
<p>In effect, the profile is a whitelist which denies access to system calls by default, then whitelists specific system calls. The profile works by defining a defaultAction of SCMP_ACT_ERRNO and overriding that action only for specific system calls. The effect of SCMP_ACT_ERRNO is to cause a Permission Denied error. Next, the profile defines a specific list of system calls which are fully allowed, because their action is overridden to be SCMP_ACT_ALLOW. Finally, some specific rules are for individual system calls such as personality, and others, to allow variants of those system calls with specific arguments.</p><br />
<br />
<p>seccomp is instrumental for running Docker containers with least privilege. It is not recommended to change the default seccomp profile.</p><br />
<br />
<p>When you run a container, it uses the default profile unless you override it with the –security-opt option. For example, the following explicitly specifies a policy:</p><br />
<br />
<p>$ docker run –rm <br /><br />
             -it <br /><br />
             –security-opt seccomp=/path/to/seccomp/profile.json <br /><br />
             hello-world<br />
Significant syscalls blocked by the default profile<br />
Docker’s default seccomp profile is a whitelist which specifies the calls that are allowed. The table below lists the significant (but not all) syscalls that are effectively blocked because they are not on the whitelist. The table includes the reason each syscall is blocked rather than white-listed.</p><br />
<br />
<p>Syscall	Description<br />
acct	Accounting syscall which could let containers disable their own resource limits or process accounting. Also gated by CAP_SYS_PACCT.<br />
add_key	Prevent containers from using the kernel keyring, which is not namespaced.<br />
bpf	Deny loading potentially persistent bpf programs into kernel, already gated by CAP_SYS_ADMIN.<br />
clock_adjtime	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
clock_settime	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
clone	Deny cloning new namespaces. Also gated by CAP_SYS_ADMIN for CLONE_* flags, except CLONE_USERNS.<br />
create_module	Deny manipulation and functions on kernel modules. Obsolete. Also gated by CAP_SYS_MODULE.<br />
delete_module	Deny manipulation and functions on kernel modules. Also gated by CAP_SYS_MODULE.<br />
finit_module	Deny manipulation and functions on kernel modules. Also gated by CAP_SYS_MODULE.<br />
get_kernel_syms	Deny retrieval of exported kernel and module symbols. Obsolete.<br />
get_mempolicy	Syscall that modifies kernel memory and NUMA settings. Already gated by CAP_SYS_NICE.<br />
init_module	Deny manipulation and functions on kernel modules. Also gated by CAP_SYS_MODULE.<br />
ioperm	Prevent containers from modifying kernel I/O privilege levels. Already gated by CAP_SYS_RAWIO.<br />
iopl	Prevent containers from modifying kernel I/O privilege levels. Already gated by CAP_SYS_RAWIO.<br />
kcmp	Restrict process inspection capabilities, already blocked by dropping CAP_PTRACE.<br />
kexec_file_load	Sister syscall of kexec_load that does the same thing, slightly different arguments. Also gated by CAP_SYS_BOOT.<br />
kexec_load	Deny loading a new kernel for later execution. Also gated by CAP_SYS_BOOT.<br />
keyctl	Prevent containers from using the kernel keyring, which is not namespaced.<br />
lookup_dcookie	Tracing/profiling syscall, which could leak a lot of information on the host. Also gated by CAP_SYS_ADMIN.<br />
mbind	Syscall that modifies kernel memory and NUMA settings. Already gated by CAP_SYS_NICE.<br />
mount	Deny mounting, already gated by CAP_SYS_ADMIN.<br />
move_pages	Syscall that modifies kernel memory and NUMA settings.<br />
name_to_handle_at	Sister syscall to open_by_handle_at. Already gated by CAP_DAC_READ_SEARCH.<br />
nfsservctl	Deny interaction with the kernel nfs daemon. Obsolete since Linux 3.1.<br />
open_by_handle_at	Cause of an old container breakout. Also gated by CAP_DAC_READ_SEARCH.<br />
perf_event_open	Tracing/profiling syscall, which could leak a lot of information on the host.<br />
personality	Prevent container from enabling BSD emulation. Not inherently dangerous, but poorly tested, potential for a lot of kernel vulns.<br />
pivot_root	Deny pivot_root, should be privileged operation.<br />
process_vm_readv	Restrict process inspection capabilities, already blocked by dropping CAP_PTRACE.<br />
process_vm_writev	Restrict process inspection capabilities, already blocked by dropping CAP_PTRACE.<br />
ptrace	Tracing/profiling syscall, which could leak a lot of information on the host. Already blocked by dropping CAP_PTRACE. Blocked in Linux kernel versions before 4.8 to avoid seccomp bypass.<br />
query_module	Deny manipulation and functions on kernel modules. Obsolete.<br />
quotactl	Quota syscall which could let containers disable their own resource limits or process accounting. Also gated by CAP_SYS_ADMIN.<br />
reboot	Don’t let containers reboot the host. Also gated by CAP_SYS_BOOT.<br />
request_key	Prevent containers from using the kernel keyring, which is not namespaced.<br />
set_mempolicy	Syscall that modifies kernel memory and NUMA settings. Already gated by CAP_SYS_NICE.<br />
setns	Deny associating a thread with a namespace. Also gated by CAP_SYS_ADMIN.<br />
settimeofday	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
stime	Time/date is not namespaced. Also gated by CAP_SYS_TIME.<br />
swapon	Deny start/stop swapping to file/device. Also gated by CAP_SYS_ADMIN.<br />
swapoff	Deny start/stop swapping to file/device. Also gated by CAP_SYS_ADMIN.<br />
sysfs	Obsolete syscall.<br />
_sysctl	Obsolete, replaced by /proc/sys.<br />
umount	Should be a privileged operation. Also gated by CAP_SYS_ADMIN.<br />
umount2	Should be a privileged operation. Also gated by CAP_SYS_ADMIN.<br />
unshare	Deny cloning new namespaces for processes. Also gated by CAP_SYS_ADMIN, with the exception of unshare –user.<br />
uselib	Older syscall related to shared libraries, unused for a long time.<br />
userfaultfd	Userspace page fault handling, largely needed for process migration.<br />
ustat	Obsolete syscall.<br />
vm86	In kernel x86 real mode virtual machine. Also gated by CAP_SYS_ADMIN.<br />
vm86old	In kernel x86 real mode virtual machine. Also gated by CAP_SYS_ADMIN.<br />
Run without the default seccomp profile<br />
You can pass unconfined to run a container without the default seccomp profile.</p><br />
<br />
<p>$ docker run –rm -it –security-opt seccomp=unconfined debian:jessie <br /><br />
    unshare –map-root-user –user sh -c whoami</p><br />
<br />
<p>https://docs.docker.com/engine/security/seccomp/</p><br />

					 <span class='st_sharethis_large' displayText='ShareThis'></span>
						<span class='st_facebook_large' displayText='Facebook'></span>
						<span class='st_twitter_large' displayText='Tweet'></span>
						<span class='st_linkedin_large' displayText='LinkedIn'></span>
						<span class='st_pinterest_large' displayText='Pinterest'></span>
						<span class='st_email_large' displayText='Email'></span>
                </div>
                Category docker
        </div>
	</div>
  
  
       <!--赞-->
    	  <div class="row">
            <div class="col-lg-6">
                <img src="https://xiazemin.github.io/MyBlog/img/webwxgetmsgimg.jpeg"  height="400" width="auto" />
            </div>
          </div>

        <div class="row">
                <div class="col-md-12">
			<div id="disqus_thread"></div>

<div id="gitmentContainer"></div>
<link rel="stylesheet" href="/MyBlog/css/default.css">
<script src="/MyBlog/js/gitment.browser.js"></script>
<script type="text/javascript" src="/MyBlog/js/json2.js"></script>
<script>
var gitment = new Gitment({
    owner: 'xiazemin',
    repo: 'MyBlogComment',
    oauth: {
        client_id: '981ba8c916c262631ea0',
        client_secret: 'a52260ef92de69011ccd1cf355b973ef11d6da0e',
    },
});

var MyGitmentContainer=gitment.render('gitmentContainer');
window.setTimeout(MyGitMentBtnclick,1000); 
//document.ready(function(){ 
//window.onload=function(){}

function MyGitMentBtnclick(){
//var MyGitmentContainer=document.getElementById('gitmentContainer');
	var ele=[],all=MyGitmentContainer.getElementsByTagName("*");
	for(var i=0;i<all.length;i++){
	  if(all[i].className=='gitment-comments-init-btn'){
		MyGitMentBtn=all[i];
		console.log(MyGitMentBtn);
		MyGitMentBtn.click();
	  }
	}
}

</script>



			<!--script>
			/**
			* RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
			* LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
			*/
			/*
			var disqus_config = function () {
			this.page.url = PAGE_URL; // Replace PAGE_URL with your page's canonical URL variable
			this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
			};
			*/
			(function() { // DON'T EDIT BELOW THIS LINE
			var d = document, s = d.createElement('script');

			s.src = '//airrayagroup.disqus.com/embed.js';

			s.setAttribute('data-timestamp', +new Date());
			(d.head || d.body).appendChild(s);
			})();
			</script>
			<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
			<script id="dsq-count-scr" src="//airrayagroup.disqus.com/count.js" async></script-->
          </div>
       </div>

</div>
<hr>
     <footer>
        <div class="container">
             <a href="/MyBlog/" style="color: green; font-size: 2em; font-family: 'Schoolbell', cursive;">首页</a>
            <div class="row">
                <div class="col-lg-6">
                    <p>Copyright &copy; 2017 465474307@qq.com <p>
                </div>
                <div class="col-lg-6">
                    <p style="float: right;">Jekyll theme by <a href="https://github.com/xiazemin/">夏泽民</a></p>
                </div>
            </div>
        </div>
    </footer>
	
    <!-- jQuery -->
    <script src="/MyBlog/js/jquery-1.12.0.min.js"></script>
    <script src="/MyBlog/js/jquery-migrate-1.2.1.min.js"></script>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/MyBlog/js/bootstrap.min.js" integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS" crossorigin="anonymous"></script>
        <!-- Menu Toggle Script -->
    <script>
    $("#menu-toggle").click(function(e) {
        e.preventDefault();
        $("#wrapper").toggleClass("toggled");
    });
    </script>
    <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"16"},"slide":{"type":"slide","bdImg":"6","bdPos":"right","bdTop":"100"},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/MyBlog/shareapi/js/share.js?v=89860593.js?'];</script>


<!-- 2d  -->
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.0.min.js"></script>
<script type="text/javascript" charset="utf-8"  src="/MyBlog/js/L2Dwidget.min.js"></script>
<script type="text/javascript">
 setTimeout(()=> {
/*L2Dwidget.init({"display": {
        "superSample": 2,
        "width": 200,
        "height": 400,
             "position": "right",
                 "hOffset": 0,
        "vOffset": 0
          }
     });
*/
 L2Dwidget
        .on('*', (name) => {
          console.log('%c EVENT ' + '%c -> ' + name, 'background: #222; color: yellow', 'background: #fff; color: #000')
        })
        .init({
          dialog: {
            // 开启对话框
            enable: true,
            script: {
              // 每空闲 10 秒钟，显示一条一言
              'every idle 10s': '$hitokoto$',
              // 当触摸到星星图案
              'hover .star': '星星在天上而你在我心里 (*/ω＼*)',
              // 当触摸到角色身体
              'tap body': '哎呀！别碰我！',
              // 当触摸到角色头部
              'tap face': '人家已经不是小孩子了！'
            }
          }
        });

})
</script>



    <!--html xmlns:wb="http://open.weibo.com/wb">
    <script src="http://tjs.sjs.sinajs.cn/open/api/js/wb.js" type="text/javascript" charset="utf-8"></script>
    <wb:follow-button uid="2165491993" type="red_1" width="67" height="24" ></wb:follow-button-->

      <!--本文来自-->
     <script type="text/javascript">
      /* 仅IE
     document.body.oncopy = function(){
        setTimeout( 
            function () { 
        var text =window.clipboardData.getData("text"); 
        if (text) { 
            text = text + "/r/n本篇文章来源于 xiazemin 的 泽民博客|https://xiazemin.github.io/MyBlog/index.html 原文链接："+location.href; clipboardData.setData("text", text); 
          }
       },
     100 )
    }
     */
     //绑定在了body上，也可以绑定在其他可用元素行，但是不是所有元素都支持copy和past事件。

     /*
$(document.body).bind({
    copy: function(event) {//copy事件
        //var cpTxt = "复制的数据";
        var clipboardData = window.clipboardData; //for IE
        if (!clipboardData) { // for chrome
            clipboardData = event.originalEvent.clipboardData;
        }

        if (event.clipboardData != null/false/undefined) { //ignore the incorrectness of the truncation
        clipboarddata = event.clipboardData;
        } else if (window.clipboardData != null/false/undefined) {
         clipboarddata = window.clipboardData;
        } else { //default to the last option even if it is null/false/undefined
         clipboarddata = event.originalEvent.clipboardData;
        }

        //e.clipboardData.getData('text');//可以获取用户选中复制的数据
        //clipboardData.setData('Text', cpTxt);
        alert(clipboarddata.getData('text'));
        //$('#message').text('Copy Data : ' + cpTxt);
        return false;//否则设不生效
    },paste: function(e) {//paste事件
        var eve = e.originalEvent
        var cp = eve.clipboardData;
        var data = null;
        var clipboardData = window.clipboardData; // IE
        if (!clipboardData) { //chrome
            clipboardData = e.originalEvent.clipboardData
        }
        data = clipboardData.getData('Text');
        //$('#message').html(data);
    }
});     
*/
function addLink() {
    var body_element = document.getElementsByTagName('body')[0];
    var selection;
    selection = window.getSelection();
    var pagelink = "<br /><br />本文来源：xiazemin 的 泽民博客 <a href='"+document.location.href+"'>"+document.location.href+"</a>";
//+document.location.href+当前页面链接
    var copy_text = selection + pagelink;
    console.log(copy_text);
    var new_div = document.createElement('div');
    new_div.style.left='-99999px';
    new_div.style.position='absolute';
    body_element.appendChild(new_div );
    new_div.innerHTML = copy_text ;
    selection.selectAllChildren(new_div );
    window.setTimeout(function() {
        body_element.removeChild(new_div );
    },0);
}
document.oncopy = addLink;
     </script>
    <!--本文来自-->

</div>
  </body>

</html>